function BetSlipDelegates(n){this._bsContext=n}function BetSlipController(n,t){var r=this,i;this._bsInst=n;this._dlg=null;this._bsContext=t;this._delegates=new BetSlipDelegates(t);this._noStakeCount=0;this._enhancedBetSlipTypeSelector=null;this._enhancedBetSlipOddsSelector=null;this._enhancedBetSlipPitcherSelector=null;this._enhancedBetSlipIfBetSelector=null;this._enhancedBetSlipTeaserTypeSelector=null;this._enhancedBetSlipWinPlaceEachWay=null;this._enhancedBetSlipEachWayExtraSelector=null;this._currencyDisplayHelper=null;this._removeClickHandler=null;this._eachWayClickHandler=null;this._freeBetClickHandler=null;this._noReservesClickHandler=null;this._streamingClickHandler=null;this._toteHoverHandler=null;this._unitStakeClickHandler=null;this._toteStakeClickHandler=null;this._stakeFocusHandler=null;this._messageDisplayHandler=null;this._multipleItemsController=null;this.webPopupManager=null;this._quickBet=null;this.betCallHandler=null;this._pushConfigInitialisedEvent="PUSH_CONFIG_PROPERTIES_INITIALISED";this._ausMultiplesAvailabilityChangedEvent="IS_AUS_MULTIPLES_AVAILABLE";this.complexMultiplesInfo=[];this.complexMultiplesOdds=[];this.complexMultiplesNeedsRefresh=!0;this.complexMultiplesCombinationsInit=!0;this.complexMultiplesProcessing=!1;this.totalsCalculator;this._multiplesCombinationLimit=9;this._isAusMultiplesAvailable=!1;this._enhancedBetSlipAnimations=new b365.Ui.Betslip.EnhancedBetSlipAnimations(this);this._stakeEntryTypes={stakePad:1,deviceKeyBoard:2};this._stakeEntryType=null;this._suspendSelections=function(){$(".bsSusp").parents(".bs-item-container").addClass("bsSusp").find(".bsSusp").removeClass("bsSusp")};this._instanceEventAttacher=new b365.Ui.Betslip.InstanceEventAttacher(this._bsInst,r);r._instanceEventAttacher.attach();new b365.Ui.Betslip.RestoreStateHandler(this._bsInst).handle();this._isItalianDomain=window.location.host.split(".").pop()=="it";this._isGreekDomain=window.location.host.split(".").pop()=="gr";this._isAustralianDomain=window.location.host.split(".").pop()=="au";this._pushMarketsEnabled=!1;this._isItalianDomain&&(i=document.getElementById("bsDiv"),i.className=i.className+" italy");this.supressMicrophoneUpdates=!1}function clientViewport(){var n=window,t=document,i=t.documentElement,r=t.getElementsByTagName("body")[0],u=n.innerWidth||i.clientWidth||r.clientWidth,f=n.innerHeight||i.clientHeight||r.clientHeight;return{width:u,height:f}}function getBetslipWebModule(){return window.top.getBetslipFrame?window.top.getBetslipFrame():null}function initBetslip(){appLoadStatus={premiumLoaded:!1,betslipAppLoaded:!1};window.bsApp=new BetslipApp;window.bsApp.init()}var b365Mobile=b365Mobile||{},b365=b365||{},_volatileElements,$get,$getElementsByClassName,bs,BetSlipShowConfirmationHandler,BetSlipPopupOverlay;Sys={};_volatileElements={};Function.createDelegate=function(n,t){return function(){return!t||typeof t!="function"?null:t.apply(n,arguments)}};Type={};Type.registerNamespace=function(n){for(var r=window,f=n.split("."),u,i,t=0;t<f.length;t++)u=f[t],i=r[u],i||(i=r[u]={}),r=i},function(){Type.registerNamespace("Debug");var n={log:function(){},warn:function(){},error:function(){},info:function(){}};window.Debug.console||(window.Debug.console=window.console?window.console||n:n)}();String.prototype.startsWith=function(n){return this.substr(0,n.length)===n};String.prototype.endsWith=function(n){var t=this.length-n.length;return t>=0&&this.lastIndexOf(n)===t};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.escapeSelector=function(){return this.replace(/([$%&()*+,./:;<=>?@\[\\\]^\{|}~])/g,"\\$1")};Array.add=function(n,t){n[n.length]=t};Array.clone=function(n){return n.length===1?[n[0]]:Array.apply(null,n)};Array.remove=function(n,t){var i=n.indexOf(t);return i>=0&&n.splice(i,1),i>=0};Array.contains=function(n,t){for(var i=n.length;i--;)if(n[i]===t)return!0;return!1};Sys.Browser={};Sys.Platform={};Sys.Browser.InternetExplorer={};Sys.Browser.Firefox={};Sys.Browser.Safari={};Sys.Browser.Opera={};Sys.Browser.Chrome={};Sys.Platform.Windows={};Sys.Platform.Mac={};Sys.Platform.iphone={};Sys.Browser.agent=null;Sys.Browser.name=navigator.appName;Sys.Platform.name=null;Sys.Browser.version=parseFloat(navigator.appVersion);Sys.Browser.documentMode=0;navigator.userAgent.indexOf(" MSIE ")>-1?(Sys.Browser.agent=Sys.Browser.InternetExplorer,Sys.Browser.version=parseFloat(navigator.userAgent.match(/MSIE (\d+\.\d+)/)[1]),Sys.Browser.version>=8&&document.documentMode>=7&&(Sys.Browser.documentMode=document.documentMode)):navigator.userAgent.indexOf(" Firefox/")>-1?(Sys.Browser.agent=Sys.Browser.Firefox,Sys.Browser.name="Firefox",Sys.Browser.version=parseFloat(navigator.userAgent.match(/ Firefox\/(\d+\.\d+)/)[1])):navigator.userAgent.indexOf(" AppleWebKit/")>-1?(Sys.Browser.agent=Sys.Browser.Safari,Sys.Browser.version=parseFloat(navigator.userAgent.match(/ AppleWebKit\/(\d+(\.\d+)?)/)[1]),Sys.Browser.name="Safari"):navigator.userAgent.indexOf(" Chrome/")>-1?(Sys.Browser.agent=Sys.Browser.Chrome,Sys.Browser.version=parseFloat(navigator.userAgent.match(/ Chrome\/(\d+\.\d+)/)[1]),Sys.Browser.name="Chrome"):navigator.userAgent.indexOf("Opera/")>-1&&(Sys.Browser.agent=Sys.Browser.Opera,Sys.Browser.name="Opera");navigator.platform.indexOf("Mac")>-1?Sys.Platform.name=Sys.Platform.Mac:navigator.platform.indexOf("Win")>-1&&(Sys.Platform.name=Sys.Platform.Windows);Sys.UI={};Sys.UI.DomEvent=function(n){var t=n;this.type=t.type.toLowerCase();this.rawEvent=t;this.altKey=t.altKey;this.clientX=t.clientX;this.clientY=t.clientY;this.ctrlKey=t.ctrlKey;this.target=t.target?t.target:t.srcElement;this.screenX=t.screenX;this.screenY=t.screenY;this.shiftKey=t.shiftKey};Sys.UI.DomEvent.prototype={preventDefault:function(){this.rawEvent.preventDefault?this.rawEvent.preventDefault():window.event&&(this.rawEvent.returnValue=!1)},stopPropagation:function(){this.rawEvent.stopPropagation?this.rawEvent.stopPropagation():window.event&&(this.rawEvent.cancelBubble=!0)},_disposeHandlers:function(){Sys.UI.DomEvent._clearHandlers(this,!0);var n=this._chainDispose,t=typeof n;t!=="undefined"&&(this.dispose=n,this._chainDispose=null,t==="function"&&this.dispose())}};var $manageVolatileHandlers=Sys.UI.DomEvent._manageVolatileHandlers=function(){var u,t,n,i,f=0,r;if(_volatileElements)for(u in _volatileElements)if(t=_volatileElements[u],t&&t.length>0)for(i=t.length-1;i>=0;i-=1)if(n=t[i],n){for(r=!0;r===!0&&n.nodeType&&n.nodeType!==2&&n.nodeType<9;)n=n.parentNode,r=!!n;r===!1&&(t.splice(i,1),f+=1)}return f},$clearHandlers=Sys.UI.DomEvent._clearHandlers=function(n,t){var r,u,f,i,e;if(n._events){r=n._events;for(u in r)for(f=r[u],i=f.length-1;i>=0;i--)e=f[i],(!t||e.autoRemove)&&$removeHandler(n,u,e.handler);n._events=null}},$addHandler=Sys.UI.DomEvent.addHandler=function(n,t,i,r,u,f){var o,e,s,h;n!=null&&(n._events||(n._events={}),o=n._events[t],o||(n._events[t]=o=[]),e=null,n.addEventListener?(e=function(t){return i.call(n,new Sys.UI.DomEvent(t))},n.addEventListener(t,e,!1)):n.attachEvent&&(e=function(){var t={};try{t=Sys.UI.DomElement._getWindow(n).event}catch(r){}return i.call(n,new Sys.UI.DomEvent(t))},n.attachEvent("on"+t,e)),o[o.length]={handler:i,browserHandler:e,autoRemove:r},u&&(s=_volatileElements[f],s||(_volatileElements[f]=s=[]),s.push(n)),r&&(h=n.dispose,h!==Sys.UI.DomEvent._disposeHandlers&&(n.dispose=Sys.UI.DomEvent._disposeHandlers,typeof h!="undefined"&&(n._chainDispose=h))))},$removeHandler=Sys.UI.DomEvent.removeHandler=function(n,t,i){var f=null,r,u,e;if(n&&n._events&&(r=n._events[t],r)){for(u=0,e=r.length;u<e;u++)if(r[u].handler===i){f=r[u].browserHandler;break}n.removeEventListener?n.removeEventListener(t,f,!1):n.detachEvent&&n.detachEvent("on"+t,f);r.splice(u,1)}},$removeVolatileHandlers=Sys.UI.DomEvent.removeVolatile=function(n){var t,i,r;if(_volatileElements){if(t=_volatileElements[n],t&&t.length>0)for(i=t.length;i>0;i--)r=t[i-1],$clearHandlers(r,!1);_volatileElements[n]=null}},$raiseEvent=Sys.UI.DomEvent.raiseEvent=function(n,t,i){var r,u,e,f;if(n&&n._events&&(r=n._events[t],r))for(u=0,e=r.length;u<e;u++)if(f=r[u].handler,f){f(this,i);break}};Sys.UI.DomElement={};Sys.UI.DomElement._getWindow=function(n){var t=n.ownerDocument||n.document||n;return t.defaultView||t.parentWindow};String.prototype.escapeSelector=function(){return this.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")};$get=Sys.UI.DomElement.getElementById=function(n,t){var i=t?t:document,r="#"+n.escapeSelector();return $(i).find(r)[0]};$getElementsByClassName=Sys.UI.DomElement.getElementsByClassName=function(n,t,i){var r,u=[],f=t?t:document;return i||(i="*"),r=$(f).find("."+n).filter(i),$.map(r,function(n){u.push(n)}),u};Sys.EventHandlerList=function(){this._list={}};Sys.EventHandlerList.prototype={addHandler:function(n,t){Array.add(this._getEvent(n,!0),t)},removeHandler:function(n,t){var i=this._getEvent(n);i&&Array.remove(i,t)},getHandler:function(n){var t=this._getEvent(n);return!t||t.length===0?null:(t=Array.clone(t),function(n,i){for(var r=0,u=t.length;r<u;r++)t[r]&&t[r](n,i)})},_getEvent:function(n,t){if(!this._list[n]){if(!t)return null;this._list[n]=[]}return this._list[n]}};Sys._Application=function(){this._domReady();this._unloadHandlerDelegate=Function.createDelegate(this,this._unloadHandler);Sys.UI.DomEvent.addHandler(window,"unload",this._unloadHandlerDelegate)};Sys._Application.prototype={_initialized:!1,_disposing:!1,_enableHistory:!1,_historyInitialized:!1,_ignoreIFrame:!1,_state:{},_historyPointIsNew:!1,_currentEntry:"",_historyFrame:null,_timerHandler:null,add_init:function(n){this._initialized?n(this,null):this.get_events().addHandler("init",n)},add_load:function(n){this.get_events().addHandler("load",n)},remove_load:function(n){this.get_events().removeHandler("load",n)},add_unload:function(n){this.get_events().addHandler("unload",n)},get_events:function(){return this._events||(this._events=new Sys.EventHandlerList),this._events},dispose:function(){if(!this._disposing){this._disposing=!0;window.pageUnload&&window.pageUnload(this,null);var n=this.get_events().getHandler("unload");n&&n(this,null);Sys.UI.DomEvent.removeHandler(window,"unload",this._unloadHandlerDelegate)}},_domReady:function(){function i(){u.initialize()}var t,u=this,n=document,f,r;if(n.addEventListener)try{n.addEventListener("DOMContentLoaded",t=function(){n.removeEventListener("DOMContentLoaded",t,!1);i()},!1)}catch(e){}else n.attachEvent&&(window==window.top&&n.documentElement.doScroll?(r=n.createElement("div"),t=function(){try{r.doScroll("left")}catch(n){f=window.setTimeout(t,0);return}r=null;i()},t()):n.attachEvent("onreadystatechange",t=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",t),i())}))},_unloadHandler:function(){this.dispose()},_raiseInit:function(){var n=this.get_events().getHandler("init");n&&n(this,null)},initialize:function(){if(!this._initialized&&!this._disposing){if(this._initialized=!0,this._raiseInit(),this.get_stateString){var n=this.get_stateString();n!==this._currentEntry?this._navigate(n):this._ensureHistory()}this.raiseLoad()}},raiseLoad:function(){var n=this.get_events().getHandler("load");this._loaded=!0;n&&n(this,null);window.pageLoad&&window.pageLoad(this,null)}};Sys.HistoryEventArgs=function(n){this._state=n;this.get_state=function(){return this._state}};Sys._Application.prototype.add_navigate=function(n){this.get_events().addHandler("navigate",n)};Sys._Application.prototype._onIFrameLoad=function(n){this._ensureHistory();this._ignoreIFrame||(this._historyPointIsNew=!1,this._navigate(n));this._ignoreIFrame=!1};window.onhashchange=function(){var n=Sys.Application.get_stateString();if(n=="!financials"||n=="!Financials"){window.FinancialsNavController.show(Sys.Application._currentEntry);return}n!==Sys.Application._currentEntry&&(Sys.Application._ignoreTimer||((Sys.Application._currentEntry=="!financials"||Sys.Application._currentEntry=="!Financials")&&($("#prlnk").find("li > a").removeClass("selected"),window.FinancialsNavController.backButtonReset()),Sys.Application._historyPointIsNew=!1,Sys.Application._navigate(n)))};Sys._Application.prototype.set_enableHistory=function(n){this._enableHistory=n};Sys._Application.prototype.addHistoryPoint=function(n,t){if(!this._enableHistory)throw"History disabled";this._ensureHistory();var i=n;this._historyPointIsNew=!0;this._setState(i,t);this._raiseNavigate()};Sys._Application.prototype._ensureHistory=function(){if(!this._historyInitialized&&this._enableHistory){try{this._initialState=this.get_stateString()}catch(n){}this._historyInitialized=!0}};Sys._Application.prototype._navigate=function(n){this._ensureHistory();var t=n;this._setState(n);this._state=t;this._raiseNavigate()};Sys._Application.prototype._setState=function(n,t){var i,u,r,f;this._enableHistory&&(n=n||"",n!==this._currentEntry&&(window.theForm&&(i=window.theForm.action,u=i.indexOf("#"),window.theForm.action=(u!==-1?i.substring(0,u):i)+"#"+n),this._historyFrame&&this._historyPointIsNew&&(n=unescape(n),this._ignoreIFrame=!0,r=this._historyFrame.contentWindow.document,r.open("javascript:'<html><\/html>'"),r.write("<html><head><title>"+(t||document.title)+'<\/title><script type="text/javascript">parent.Sys.Application._onIFrameLoad( \''+escape(n)+"' );<\/script><\/head><body><\/body><\/html>"),r.close()),this._ignoreTimer=!1,this._currentEntry=n,(this._historyFrame||this._historyPointIsNew)&&(f=this.get_stateString(),n!==f&&(window.location.hash=n,this._currentEntry=this.get_stateString(),typeof t!="undefined"&&t!==null&&document.title==""&&(document.title=t))),this._historyPointIsNew=!1))};Sys._Application.prototype.get_stateString=function(){var n,t,i;return Sys.Browser.agent===Sys.Browser.Firefox?(t=window.location.href,i=t.indexOf("#"),i!==-1?t.substring(i+1):""):(n=window.location.hash,n.length>0&&n.charAt(0)==="#"&&(n=n.substring(1)),n)};Sys._Application.prototype._raiseNavigate=function(){var t=this._historyPointIsNew,n=this.get_events().getHandler("navigate"),i=this._state,r=new Sys.HistoryEventArgs(i);if(n&&n(this,r),!t)try{Sys.Browser.agent===Sys.Browser.Firefox&&window.location.hash&&(!window.frameElement||window.top.location.hash)&&(Sys.Browser.version<3.5?window.history.go(0):location.hash=this.get_stateString())}catch(u){}};Sys.Application=new Sys._Application;Type.registerNamespace("b365");b365.Sys=function(){this._eleList=[];this._eleList.A=0;this._eleList.INPUT=1;this._eleList.SELECT=2;this._filter=function(n,t,i,r){var u=n?n:0;return u=r?t&&u<t?t:u:t&&u>t||!u?t:u,r?i&&u<i?i:u:i&&u>i||!u?i:u}};b365.Sys.prototype={getEleSib:function(n,t,i){for(var r=t=="n"?n.nextSibling:n.previousSibling;r!=null&&(r.nodeType!=1||i&&!$hasCls(r,i));)r=t=="n"?r.nextSibling:r.previousSibling;return r!=null&&r.nodeType!=1&&(r=null),r},getPTag:function(n,t,i,r){if(r=typeof r=="undefined"||r==null?0:r+1,!n)return null;if(t==null||n.tagName==t)if(i){if(n.className!=null&&n.className.indexOf(i)>=0)return n}else return n;return r>10?null:this.getPTag(n.parentNode,t,i,r)},getCTag:function(n,t,i){for(var r,u;n&&n.nodeType===3;)n=n.nextSibling;return!n||n.tagName==t&&(!i||n.className.indexOf(i)>=0)?n:(r=this.getCTag(n.firstChild,t,i),r&&r.tagName==t&&(!i||r.className.indexOf(i)>=0))?r:(u=this.getCTag(n.nextSibling,t,i),u&&u.tagName==t&&(!i||u.className.indexOf(i)>=0))?u:null},getParIDTag:function(n,t,i){var r,u,f;if(n&&t&&i&&(r=t.getElementsByTagName(i),r&&r.length>0))for(u=0;u<r.length;u++)if(f=r[u].getAttribute("id"),f&&f.startsWith(n))return r[u];return undefined},getParIDPTag:function(n,t,i){if(typeof n!="undefined"){while(n!=null){if(n.id&&(i&&n.tagName==i&&n.id.startsWith(t)||n.id.startsWith(t)))break;n=n.parentNode}return n}return undefined},getMediaType:function(n){var t=this.getPTag(n,null,"MTsrc",null),i="";return t&&t.getAttribute("data-mt")&&(i=t.getAttribute("data-mt")),i},getItemIdSuffix:function(n,t,i){return n=this.getParIDPTag(n,t,i),n?n.id.substring(t.length):-1},firstChild:function(n,t,i){var r=$(n).find("*").not("[type=text]");return typeof t!="undefined"&&t!==""&&(r=r.filter(t)),typeof i!="undefined"&&i!==""&&(r=r.filter("."+i)),r.first()[0]},parentNode:function(n){for(n=n.parentNode;n!=null&&n.nodeType===3;)n=n.parentNode;return n},toggleElement:function(n){typeof n!="undefined"&&n!=null&&(n.className.indexOf("hidden",0)==-1?(n.className=n.className.length>0?n.className+" hidden":"hidden",n.disabled=!0):this.showElement(n))},addClass:function(n,t){typeof n!="undefined"&&n!==null&&(RegExp("\\b"+t+"\\b","ig").test(n.className)||(n.className+=n.className.length>0?" "+t:t))},removeClass:function(n,t){typeof n!="undefined"&&n!==null&&(n.className=n.className.replace(RegExp("\\b"+t+"\\b","ig"),"").trim())},swapClass:function(n,t,i){this.removeClass(n,t);this.addClass(n,i)},getOffSets:function(n){var i,r,t;try{if(i=n.offsetLeft,r=n.offsetTop,n.offsetParent)for(t="static",window.getComputedStyle?t=window.getComputedStyle(n.offsetParent,null).getPropertyValue("position"):n.currentStyle&&(t=n.currentStyle.position);n.offsetParent&&t!="fixed"&&t!="absolute";)n=n.offsetParent,n&&(i+=n.offsetLeft,r+=n.offsetTop);return[i,r]}catch(u){return null}},hitTest:function(n,t,i){var r=this.getOffSets(n);return r?t>=r[0]&&t<=r[0]+n.clientWidth&&i>=r[1]&&i<=r[1]+n.clientHeight:!1},getEleW:function(n,t){return this._filter(n.innerWidth?n.innerWidth:0,n.clientWidth?n.clientWidth:0,n.scrollWidth?n.scrollWidth:0,t)},getEleH:function(n,t){return this._filter(n.innerHeight?n.innerHeight:0,n.clientHeight?n.clientHeight:0,n.scrollHeight?n.scrollHeight:0,t)},getWH:function(){return this._filter(window.innerHeight?window.innerHeight:0,document.documentElement?document.documentElement.clientHeight:0,document.body?document.body.clientHeight:0)},getWSL:function(){return this._filter(window.pageXOffset?window.pageXOffset:0,document.documentElement?document.documentElement.scrollLeft:0,document.body?document.body.scrollLeft:0)},getWST:function(){return this._filter(window.pageYOffset?window.pageYOffset:0,document.documentElement?document.documentElement.scrollTop:0,document.body?document.body.scrollTop:0)},mouseX:function(n){var t=null;return n.pageX?t=n.pageX:n.clientX&&(t=n.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)),t},mouseY:function(n){var t=null;return n.pageY?t=n.pageY:n.clientY&&(t=n.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)),t},showElement:function(n){return n!=null?(n.className.indexOf("hidden",0)!=-1&&(n.className=n.className.replace(/hidden/i,""),n.className=n.className.trim()),n.disabled=!1,n.removeAttribute("disabled"),!0):!1},hideElement:function(n){return n!=null?(n.className.indexOf("hidden",0)==-1&&(n.className+=" hidden"),n.setAttribute("disabled","true"),n.disabled=!0,!0):!1},setValueInCookie:function(n,t,i){var f=arguments.length==3||arguments.length==4&&arguments[3]==!0?!0:!1,o=this.getValueFromCookie(n,"",""),e,u,r;if(i=unescape(i),o!=""){if(t!=""){for(e=!1,u=o.split("&"),r=0;r<u.length;r++)if(u[r].startsWith(t+"=")){u[r]=t+"="+escape(i)+(!f||i.endsWith("||")?"":"||");e=!0;break}for(e||i==""||u.push(t+"="+escape(i)+(!f||i.endsWith("||")?"":"||")),i="",r=0;r<u.length;r++)i+=u[r]==""?"":u[r]+"&"}}else t!=""&&(i=t+"="+escape(i)+(!f||i.endsWith("||")?"":"||"));document.cookie=n+"="+i.replace(/\$amp\$/g,"&amp;").replace(/\$quot\$/g,"&quot;").replace(/\$lt\$/g,"&lt;").replace(/\$gt\$/g,"&gt;")+";path=/"},setValueInCookieOnlyIfNotEmpty:function(n,t,i){n!=""&&i!=""&&this.setValueInCookie(n,t,i,!1)},getValueFromCookie:function(n,t,i){for(var f=typeof i!="undefined"?i:"",u=unescape(document.cookie).split(";"),o=typeof i!="undefined"?i:"",h=!1,s,c,e,r=0;r<u.length;r++)if(s=u[r].indexOf("=")==-1?u[r].length-1:u[r].indexOf("="),c=u[r].substr(0,s).replace(/^\s+|\s+$/g,""),c==n){h=!0;f=u[r].substr(s+1).replace(/^\s+|\s+$/g,"");break}if(f=String(f).replace(/&amp;/g,"$amp$").replace(/&quot;/g,"$quot$").replace(/&lt;/g,"$lt$").replace(/&gt;/g,"$gt$"),h)if(t.length>0){for(e=f.split("&"),r=0;r<e.length;r++)if(e[r].startsWith(t+"=")){o=e[r].substring(t.length+1);break}}else o=f;return String(o).replace(/\$amp\$/g,"&amp;").replace(/\$quot\$/g,"&quot;").replace(/\$lt\$/g,"&lt;").replace(/\$gt\$/g,"&gt;")},readCookie:function(n){for(var r=n+"=",u=document.cookie.split(";"),t,i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null},setCookieValue:function(n,t){document.cookie=n+"="+t.replace(/\$amp\$/g,"&amp;").replace(/\$quot\$/g,"&quot;").replace(/\$lt\$/g,"&lt;").replace(/\$gt\$/g,"&gt;")+";path=/"},disableElement:function(n){n.getAttribute("_disabled")===null&&n.setAttribute("_disabled",n.disabled?String(n.disabled):"false");var t=n.getAttribute("href");t&&(n.setAttribute("_href",t),n.removeAttribute("href"));n.disabled||n.getAttribute("_tab")!==null||(n.setAttribute("_tab",n.tabIndex),n.setAttribute("tabIndex","-1"));n.tagName=="A"||n.id.indexOf("UName")!=-1||n.id.indexOf("PWord")!=-1||$(n).hasClass("lotto")||(n.disabled=!0,n.setAttribute("disabled","disabled"))},enableElement:function(n){var t=n.getAttribute("_disabled");t&&t==="false"&&(n.disabled=!1,n.removeAttribute("disabled"),n.removeAttribute("_disabled"),n.getAttribute("_href")&&(n.setAttribute("href",n.getAttribute("_href")),n.removeAttribute("_href")),n.getAttribute("_tab")!==null&&(n.tabIndex=n.getAttribute("_tab"),n.removeAttribute("_tab")))},disableGroup:function(n){var i,t;if(this._eleList&&this._eleList.length>0){for(i=n.getElementsByTagName("*"),t=0;t<i.length;t++)typeof this._eleList[i[t].tagName]!="undefined"&&this.disableElement(i[t]);typeof this._eleList[n.tagName]!="undefined"&&this.disableElement(n)}},enableGroup:function(n){var i,t;if(this._eleList&&this._eleList.length>0){for(i=n.getElementsByTagName("*"),t=0;t<i.length;t++)typeof this._eleList[i[t].tagName]!="undefined"&&this.enableElement(i[t]);typeof this._eleList[n.tagName]!="undefined"&&this.enableElement(n)}},hasCls:function(n,t){return n&&n.className.length>0&&n.className.indexOf(t)>-1},deepCopy:function(n){var i,r;if(Object.prototype.toString.call(n)==="[object Array]"||Object.prototype.toString.call(n)==="[object Arguments]"){for(var u=[],t=0,f=n.length;t<f;t++)u[t]=this.deepCopy(n[t]);return u}if(typeof n=="object"){i={};for(r in n)i[r]=this.deepCopy(n[r]);return i}return n},getZIdx:function(n){return parseInt($(n).css("z-index"))||0}};var $bSys=new b365.Sys,$getNES=function(n,t){return $bSys.getEleSib(n,"n",t)},$getPES=function(n,t){return $bSys.getEleSib(n,"p",t)},$getPTag=function(n,t,i){return $bSys.getPTag(n,t,i)},$getCTag=function(n,t,i){return $bSys.getCTag(n,t,i)},$getParIDTag=function(n,t,i){return $bSys.getParIDTag(n,t,i)},$getParIDPTag=function(n,t,i){return $bSys.getParIDPTag(n,t,i)},$getMT=function(n){return $bSys.getMediaType(n)},$getItemIdSuffix=function(n,t,i){return $bSys.getItemIdSuffix(n,t,i)},$firstChild=function(n,t,i){return $bSys.firstChild(n,t,i)},$parentNode=function(n){return $bSys.parentNode(n)},$tglEle=function(n){return $bSys.toggleElement(n)},$showEle=function(n){return $bSys.showElement(n)},$addCls=function(n,t){return $bSys.addClass(n,t)},$remCls=function(n,t){return $bSys.removeClass(n,t)},$swpCls=function(n,t,i){return $bSys.swapClass(n,t,i)},$hideEle=function(n){return $bSys.hideElement(n)},$hasCls=function(n,t){return $bSys.hasCls(n,t)},$deepCopy=function(n){return $bSys.deepCopy(n)},$getZIndex=function(n){return $bSys.getZIdx(n)},$removeEvilTwin=function(n){var i,t,r,o;n=n.toLowerCase();var u="/liquid_style.css",f="/style.css",s="matchlive/liquid_basic.css",e="matchlive/basic.css";if(n.indexOf(s)!=-1||n.indexOf(e)!=-1||n.indexOf(u)!=-1||n.indexOf(f)!=-1){if(i=e,n.indexOf(e)!=-1&&(i=s),n.indexOf(u)!=-1&&(i=u),n.indexOf(f)!=-1&&(i=f),t=document.getElementsByTagName("link"),t&&t.length>0)for(r=0;r<t.length;r++)t[r].href.toString().indexOf(i)!=-1&&(o=t[r],o.parentNode.removeChild(o));return}},$loadCSS=function(n,t){var e,r,u,i,f,o;if($removeEvilTwin(n),e=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("link"),r&&r.length>0)for(u=0;u<r.length;u++)if(r[u].href.indexOf(n)>=0){t&&t();return}i=document.createElement("link");i.setAttribute("href",n);i.setAttribute("rel","stylesheet");i.setAttribute("type","text/css");"sheet"in i?(f="sheet",o="cssRules"):(f="styleSheet",o="rules");var c=navigator.userAgent.lastIndexOf("Safari/")>0,l=document.styleSheets.length,s=setInterval(function(){try{(i[f]&&i[f][o].length||c&&document.styleSheets.length>l)&&(clearInterval(s),clearTimeout(h),t&&t())}catch(n){}},200),h=setTimeout(function(){clearInterval(s);clearTimeout(h);e.removeChild(i);throw"Script load failed";},1e4);e.appendChild(i)},$loadScript=function(n,t,i){var f,r;t=t.trim();for(var o=t,e=function(n){var t=$getFN(o)+"_loaded";typeof window[t]=="function"&&window[t](n);i&&i()},s=document.getElementsByTagName("head")[0],u=0;u<2;u++)if(f=u==0?s.getElementsByTagName("script"):document.getElementsByTagName("script"),f&&f.length>0)for(u=0;u<f.length;u++)if(f[u].src.indexOf(t.startsWith(".")?t.substring(1):t)>=0){e(n);return}r=document.createElement("script");r.setAttribute("language","javascript");r.setAttribute("type","text/javascript");r.setAttribute("src",o);r.addEventListener?r.onload=function(){e(n)}:r.readyState&&(r.onreadystatechange=function(){(r.readyState=="loaded"||r.readyState=="complete")&&e(n)});s.appendChild(r)},$setGlobal=function(n,t,i){if(typeof window[n]!="function"&&typeof t=="string")try{window[n]=JSON.parse(t);i&&i()}catch(r){window[n]=null;i&&i()}},cacheTokens=[],$setCachePolicy=function(n,t){var u,i,e,f=n.split(","),r;if(f)for(r=0;r<f.length;r++)u=f[r].split("="),i=u[0].split("."),e=u[1],cacheTokens[i[0]]||(cacheTokens[i[0]]=[]),cacheTokens[i[0]][i[1]]=e;t&&t()},$getFN=function(n){var t=n.match(/(.*)[\/\\](\w+)/);return t&&t.length>=3?t[2]:""},$setTitleText=function(n,t){document.title=n;t&&t()},$formatDatePart=function(n){return n<10?"0"+n:n},$getTimeAsHHMMSS=function(n){var t=$formatDatePart(n.getHours()),i=$formatDatePart(n.getMinutes()),r=$formatDatePart(n.getSeconds());return t+":"+i+":"+r},$getComputedPadding=function(n){var t,i=$getAppliedStyle(n);return t=parseInt(i.paddingRight.replace("px",""))+parseInt(i.paddingLeft.replace("px","")),isNaN(t)?0:t},$getAppliedStyle=function(n){return typeof n.currentStyle!="undefined"?n.currentStyle:document.defaultView.getComputedStyle(n,null)},$getLen=function(n,t){var i=0;return t&&(i=n.style.width.replace("px",""),i=isNaN(parseInt(i))?0:i,i&&i!=0||(i=$getAppliedStyle(n),i=i.width.replace("px",""),i=isNaN(parseInt(i))?0:i)),i&&i!=0||(i=n.clientWidth),i&&i!=0||(i=n.innerWidth),i&&i!=0||(i=n.scrollWidth),i};Type.registerNamespace("b365.Ui"),function(n){n.fn.disableElement=function(){return this.each(function(){n(this).attr("_disabled")===undefined&&n(this).attr("_disabled",n(this).prop("disabled")?n(this).prop("disabled"):"false");n(this).prop("href")&&(n(this).attr("_href",n(this).prop("href")),n(this).removeProp("href"));n(this).prop("disabled")||n(this).attr("_tab")||(n(this).attr("_tab",n(this).prop("tabIndex")),n(this).prop("tabIndex","-1"));n(this).prop("disabled",!0).addClass("disabled")})};n.fn.enableElement=function(){return this.each(function(){if(n(this).removeProp("disabled").removeAttr("disabled").removeAttr("_disabled").removeClass("disabled"),n(this).attr("_href")){var t=n(this).html();n(this).prop("href",n(this).attr("_href"));n(this).removeAttr("_href");n(this).html(t)}n(this).attr("_tab")&&(n(this).prop("tabIndex",n(this).attr("_tab")),n(this).removeAttr("_tab"))})}}(jQuery),function(n,t){function i(n,t,i,r,u,f,e){this._dataUrl=n;this._dataEvent=t;this._errorEvent=i;this._arguments=arguments;this._timeOut=r;this._timeOutEvent=u;this._cacheRequest=!0;typeof f!="undefined"&&f!==null&&(this._cacheRequest=!f);this._reqInstanceId=e;this._ajaxObject=null}i.prototype.Load=function(n){var i=this;n||(n="GET");i._ajaxObject=t.ajax({type:n,url:i._dataUrl,cache:i._cacheRequest,timeout:this._timeOut,async:!0,beforeSend:function(n){n.overrideMimeType("text/plain")},error:function(n,t){t==="timeout"&&typeof i._timeOutEvent!="undefined"&&i._timeOutEvent!==null?i._timeOutEvent(i._reqInstanceId):n.status!=0&&typeof i._errorEvent!="undefined"&&i._errorEvent!==null&&i._errorEvent(n.status,n.statusText,i._reqInstanceId)},complete:function(n){n.status==200&&i.OnData(i,n.responseText)}})};i.prototype.Post=function(n){var i=this;i._ajaxObject=t.ajax({type:"POST",url:this._dataUrl,cache:i._cacheRequest,timeout:this._timeOut,data:n,beforeSend:function(t){t.setRequestHeader("Content-type","application/x-www-form-urlencoded");t.setRequestHeader("Content-length",n.length);t.setRequestHeader("Connection","close");t.overrideMimeType("text/plain")},error:function(n,t){t==="timeout"&&typeof i._timeOutEvent!="undefined"&&i._timeOutEvent!==null?i._timeOutEvent(i._reqInstanceId):n.status!=0&&typeof i._errorEvent!="undefined"&&i._errorEvent!==null&&i._errorEvent(n.status,n.statusText,i._reqInstanceId)},complete:function(n){n.status==200&&i.OnData(i,n.responseText)}})};i.prototype.LoadSynchronous=function(){var n=this;n._ajaxObject=t.ajax({type:"GET",url:this._dataUrl,async:!1,timeout:this._timeOut,cache:n._cacheRequest,beforeSend:function(n){n.overrideMimeType("text/plain")},error:function(t,i){i==="timeout"&&typeof n._timeOutEvent!="undefined"&&n._timeOutEvent!==null?n._timeOutEvent(n._reqInstanceId):t.status!=0&&typeof n._errorEvent!="undefined"&&n._errorEvent!==null&&n._errorEvent(t.status,t.statusText,n._reqInstanceId)},complete:function(t){t.status==200&&n.OnData(n,t.responseText)}});return};i.prototype.OnData=function(n,t){t.search(/SERVER_ERROR/)>-1&&(n._arguments[7][n._arguments[7].length]=n._arguments[7][0],n._arguments[7].length++,n._arguments[7][0]=99,t=t.replace(/SERVER_ERROR/,""));typeof n._dataEvent!="undefined"&&n._dataEvent!==null&&n._dataEvent(t,n._arguments)};i.prototype.Abort=function(){var n=this;typeof n._ajaxObject!="undefined"&&n._ajaxObject!=null&&(n._ajaxObject.abort(),n._ajaxObject=null)};n.b365BsAJAX=i}(window,jQuery);b365.Ui.BetSlipLib=function(){this._alwaysInclude="*~"};b365.Ui.BetSlipLib.prototype={calcTotalStake:function(n,t){var e=0,r=0,u,f;for(t=t?t:"st",i=0;i<n.length;i++)r=Number(n[i].getStItem(t)?n[i].getStItem(t):""),u=n[i].getStItem("ew")=="1",isNaN(r)===!1&&(r=r*100,f=Number(n[i].getCnItem("bc")?n[i].getCnItem("bc"):n[i].getStItem("bc")?n[i].getStItem("bc"):"1"),e+=f>1||u?Number(String(r*(u?2:1)*f)):r);return this.pad2DP(String(e/100))},isDuplicate:function(n,t){var r=!1,f=t.getCnItem("pt"),u=function(n,t){return n.getCnItem("spt")===t.getCnItem("spt")&&n.getCnItem("cm")===t.getCnItem("cm")&&n.getCnItem("ct")===t.getCnItem("ct")&&n.getCnItem("f")===t.getCnItem("f")&&n.getCnItem("fp")===t.getCnItem("fp")};for(i=0;!r&&i<n.length;i++)switch(f){case"S":r=n[i].getCnItem("pid")===t.getCnItem("pid")&&n[i].getCnItem("mid")===t.getCnItem("mid");break;case"CB":r=u(t,n[i]);break;case"TB":switch(t.type){case bs.betTypeToteCast:case bs.betTypeUsToteCast:case bs.betTypeEToteCast:case bs.betTypeToteNonCast:case bs.betTypeUsToteNonCast:case bs.betTypeEToteNonCast:r=u(t,n[i])}break;default:n[i].getCnItem("fp")===t.getCnItem("fp")&&n[i].getCnItem("f")==t.getCnItem("f")&&(r=n[i].getCnItem("Inc")==t.getCnItem("Inc")?!0:!1)}return r},getItemOdds:function(n,t){var r,i;switch(n){case bs.betTypeCast:case bs.itemTypeCast:case bs.betTypeBetBuilder:case bs.itemTypeBetBuilder:r=t.getStItem;break;default:r=t.getCnItem}return i=r("BOdds"),i||(i=r("o")),i||(i=""),i},to2DP:function(n,t){var r,i;return t=t||".",r=t==="."?",":".",n=n.replace(new RegExp("\\"+r,"g"),t),i=n.indexOf(t),i!=-1&&n.length-i>3&&(n=n.substr(0,i+3)),n},pad2DP:function(n,t){var u,i,r;return t=t||".",u=t==="."?",":".",n=n.replace(new RegExp("\\"+u,"g"),t),n=n.trim(),n===t||n===""?n="0"+t+"00":(n=this.to2DP(n,t),i=n.indexOf(t),i==-1?n+=t+"00":(r=n.length-(i+1),r==0?n+="00":r==1&&(n+="0"))),n},roundDecimal:function(n,t){var u,i,r;return t=t||".",u=t==="."?",":".",n=n.replace(new RegExp("\\"+u,"g"),t),n=n.trim(),n===t||n===""?n="0"+t+"00":(n=this.roundValue(n,t),i=n.indexOf(t),i==-1?n+=t+"00":(r=n.length-(i+1),r==0?n+="00":r==1&&(n+="0"))),n},roundValue:function(n,t){var s,f,e,i,r,u,o;if(t=t||".",s=t==="."?",":".",n=n.trim(),f="0",n!="NaN"&&n.indexOf(t)>=0){if(e=n.split(t),i=e[0],r=e[1],r.trim().length==0)return n;r=r.length>4?r.substring(0,3):r;u=r.substring(2,3);Number(u)>=5?(u=r.substring(1,2),Number(u)==9?(o=r.substring(0,1),Number(o)==9?(i=Number(i)+1,f=String(i)):(u=Number(o)+1,i=i+t+u,f=String(i))):(u=Number(u)+1,u=String(r.substring(0,1))+String(u),i=i+t+u,f=i)):r.length==1?(i=i+t+r,f=i):(i=i+t+r.substring(0,2),f=i)}else f=n===""||n=="NaN"?"":isNaN(n)?n:n;return f},riskToWin:function(n,t,i,r,u,f){var e=Function.createDelegate(this,f||f==undefined?this.pad2DP:this.roundDecimal),o=isNaN(n)?0:n*1,s=eval(t),h;return(u=u||isNaN(s),!u)?r?e(String(o*2)):(h=o*s/1,e(String(h))):""},winToRisk:function(n,t,i,r){var u=0;if(r)u=Math.round(n*50)/100;else{u=isNaN(n)?0:n/eval(t);u=Number(this.roundValue(String(u)));for(var f=u*1,e=1+eval(t),o=Math.round(f*(e-1)*100)/100;o<n;)u=u+.01,f=u*1,e=1+eval(t),o=Math.round(f*(e-1)*100)/100}return this.roundValue(String(u))},isDecimal:function(n){return(n.indexOf(",")!==-1&&(n=n.replace(/,/g,".")),String(n).trim()==="0."||String(n).trim()==="."||n==="")?!0:isNaN(Number(n))==!0?!1:!0},getMaxStake:function(){return 999999999},getMaxToWin:function(){var n=$get("bs",$get("bsDiv")),t=99999999;return n&&n.getAttribute("data-mtwin")&&Number(n.getAttribute("data-mtwin"))>0&&(t=Number(n.getAttribute("data-mtwin"))),t},doBetMax:function(n,t,i,r,u){return lgh.isAuthenticated()?(u.req(bs.reqTypeMaxBet,"key="+n+"-"+String(t)+"-"+i+"-"+r),!0):!1},alwaysShowToolTipItem:function(n){return n.startsWith(this._alwaysInclude)},formatAlwaysShowToolTip:function(n){return n.replace(this._alwaysInclude,"")},numDecPlcs:function(n){var t=String(n),i=".";return t.indexOf(i)>-1?t.length-t.indexOf(i)-1:0},getBetItemIndex:function(n,t){var f=-1,u=new b365.Ui.BetDTO,r,i,e;for(u.parse(n),r=t.getBetItems(),i=0,e=r.length;i<e;i++)if(u.getCnItem("mid")&&u.getCnItem("pid")){if(r[i].getCnItem("f")==u.getCnItem("f")&&r[i].getCnItem("mid")==u.getCnItem("mid")&&r[i].getCnItem("pid")==u.getCnItem("pid")){f=i;break}}else if(r[i].getCnItem("fp")===u.getCnItem("fp")&&r[i].getCnItem("f")==u.getCnItem("f")&&(u.getCnItem("Inc")?u.getCnItem("Inc")===r[i].getCnItem("Inc"):!0)){if(r[i].getCnItem("pt")==="S"&&u.getCnItem("pt")!==r[i].getCnItem("pt"))continue;f=i;break}else if(r[i].getCnItem("id")&&r[i].getCnItem("id")===u.getCnItem("id")){f=i;break}else if(r[i].getCnItem("spt")+r[i].getCnItem("cm")+r[i].getCnItem("ct")==u.getCnItem("pt")&&r[i].getCnItem("fp")===u.getCnItem("fp")&&r[i].getCnItem("f")==u.getCnItem("f")){f=i;break}else if(r[i].getCnItem("pp")&&r[i].getCnItem("pp")===u.getCnItem("fp")){f=i;break}return f}};$blib=new b365.Ui.BetSlipLib;b365.Ui.BetDTO=function(n){this.type=n;var i={},t={},r=[],u=function(n,t){for(var u,f,r=t.split("#"),i=0;i<r.length;i++)u=r[i],u.length>0&&(f=u.split("="),n[f[0]]=f[1])},f=function(n,t){var s,f="il",h,e,i,o;if(t&&t.indexOf(f+"=")>-1){s=t.split(f+"=");i=s[1];h=i.charAt(i.length-1)==="#";n[f]=h?i.substr(0,i.length-1):i;e=i.split("^");for(i in e)o=new b365.Ui.BBSubItemDTO,o.parse(e[i]),r.push(o)}else u(n,t)};this.parse=function(n){var s=this.type===bs.betTypeBetBuilder?f:u,e=n.split("|"),o,r;for(t={},i={},o=i,r=0;r<e.length;r++)e[r].length>0&&s(o,e[r]),o=t};this.toString=function(){var i="",f="",n,u,r;if(this.type===bs.betTypeBetBuilder)for(i="il=",u=this.getBBItems(),r=0;r<u.length;r++)i+=u[r].toString(),i+=r<u.length-1?"^":"";else i=this.getCn();for(n in t)(n=="st"||n=="ust")&&(t[n]=t[n]!==""?t[n].toString().replace(",","."):""),f+=n+"="+t[n]+"#";return i+(f===""?"":"|")+f};this.getCn=function(){var n="",t;for(t in i)n=n+t+"="+i[t]+"#";return n};this.getBBItems=function(){return r};this.getCnItem=function(n){return i[n]};this.setCnItem=function(n,t){i[n]=t};this.removeCnItem=function(n){delete i[n]};this.getStItem=function(n){return t[n]};this.setStItem=function(n,i){t[n]=i};this.removeStItem=function(n){delete t[n]};this.parseCookieString=function(n,t){var f=n.split("||"),e=[],u,i,r;if(n.length>0)for(r=0;r<f.length;r++)u=f[r],u.length>0&&(i=new b365.Ui.BetDTO(t),i.parse(u),(t!=bs.betTypeMultiple||t!=bs.betTypeBetBuilder)&&(i.setStItem("es",1),i.setStItem("FO","False")),Array.add(e,i));return e};this.serialize=function(n){for(var i="",t=0;t<n.length;t++)i+=n[t].toString()+"||";return i};this.getTopic=function(){return this.getTopicItem(0)};this.getOddsOverride=function(){return this.getTopicItem(1)};this.getDecimalPlaces=function(){return this.getTopicItem(2)};this.getTopicItem=function(n){var t=(this.getStItem("TP")||"").split("x");return t.length>n?t[n]:""}};$bto=new b365.Ui.BetDTO;b365.Ui.BBSubItemDTO=function(){var n={};this.parse=function(t){var i=t.split("#"),r;for(subItem in i)i[subItem].length>0&&(r=i[subItem].split("="),n[r[0]]=r[1])};this.getValue=function(t){return n[t]};this.setValue=function(t,i){n[t]=i};this.toString=function(){var i="",t;for(t in n)i+=t+"="+n[t]+"#";return i}};b365.Ui.BetSlipAPI=function(n){this._events=new Sys.EventHandlerList;this._b365BsAJAX=null;this._lock=!1;this._betSlipCookieKey=n;this._betSlipCookieBackup=null;this._pushBetSlipCookieBackup=null;this._betItems=[];this._betMltItems=[];this._betCastItems=[];this._betBuilderItems=[];this._clearOnAdd=!1;this._controller=null;this._clickToCallHandler=null;this._pollTime=null;this._pollInterval=null;this._pollForceStop=!1;this._pollReference=null;this._pollRequestParams=null;this._pollCount=0;this._pollReqType=0;this._betSlipModeBetSlip=1;this._betSlipModeConfirm=2;this._betSlipModeReceipt=3;this._dialogModeConfirmation=1;this._dialogModeDialog=2;this.betTypeAll=-1;this.betTypeNormal=0;this.betTypeMultiple=1;this.betTypeLotto=2;this.betTypeCast=3;this.betTypeToteCast=4;this.betTypeToteNonCast=5;this.betTypeToteAll=6;this.betTypeUsToteCast=7;this.betTypeUsToteNonCast=8;this.betTypeUsToteAll=9;this.betTypeAllAccept=11;this.betTypeEToteCast=12;this.betTypeEToteNonCast=13;this.betTypeTotePot=14;this.betTypeUsTotePot=15;this.betTypeETotePot=16;this.betTypeFrgnToteCast=17;this.betTypeFrgnToteNonCast=18;this.betTypeFrgnTotePot=19;this.betTypeTotePotAus=20;this.betTypeLottoFrame=21;this.betTypeBetBuilder=22;this.reqTypeRefreshSlip=0;this.reqTypeAddItems=1;this.reqTypePlaceBet=2;this.reqTypeDeleteItem=3;this.reqTypeRefreshLottoSlip=3;this.reqTypePlaceLottoBet=4;this.reqTypeMaxBet=5;this.reqTypeBetBrk=7;this.reqTypePitcher=8;this.reqTypeRefreshAccept=9;this.reqTypeReferBet=10;this.reqTypePollReferredBet=11;this.reqTypeConfirmBet=13;this.reqTypeConstructAndAddItems=15;this.reqTypePhoneBet=17;this.reqTypeLoadMobileLottoBetslip=18;this.reqTypePlaceMobileLottoBet=19;this.reqTypePollTempBetReceipt=20;this.reqTypeGetCTCBetDetails=21;this.reqTypeSetOddsType=22;this.reqTypeFetchMultiples=24;this.reqTypeSplitBet=25;this.postPayload="";this.slipStandard="1";this.slipBanker="2";this.slipIF="3";this.slipReverseIF="4";this.slipFixedTeaser="5";this.slipNumbers="7";this.slipUKTote="8";this.slipUSTote="9";this.slipETote="10";this.slipFinancials=100;this.slipFinancialsblank=9997;this.toteTypeNotTote="0";this.toteTypeUKTote="1";this.toteTypeETote="2";this.toteTypeUSTote="3";this.toteTypeForeignTote="4";this.toteTypeAustralianTote="5";this.itemTypeSingle="single";this.itemTypeToteSingle="tote-single";this.itemTypeCast="cast";this.itemTypeToteCast="tote-cast";this.itemTypeTotePot="tote-pot";this.itemTypeMultiple="multiple";this.itemTypeBetBuilder="betbuilder";this.itemTypeAll="all";this.deviceType="";this.betSource="";this.showStreaming=!1;this.showFullTextMode=!1;this.showFixtureDate=!1;this.headerLinks=null;this.keyboardType=null;this.refreshUserBalance=!0;this.isoCode="";this.useTruncated2dpPriceForReturnsCalc=!1;this.pushBetStatus=null;this.pendingPushBetElement=null;this.isSiteOverlaySpinnerShowing=!1;this.displayMaxExceededMessage=!1;this.toggledBankerSelectionState=!1};b365.Ui.BetSlipAPI.prototype={pageLoad:function(){var n=this.getHandler("onpageload");n&&n(this)},addBet:function(){try{var n=this.getHandler("onaddbet");if(n&&this._lock===!1){try{trk&&trk.send(null,EnumRegionID.Right,-1,EnumEventsOrPageTypes.Click,EnumPodID.Coupon,-1,arguments[0])}catch(i){}n(this,arguments)}}catch(t){this.displayError(t.message)}},refresh:function(n,t,i){try{if(this._lock===!1)switch(n){case this.betTypeLottoFrame:this.req(this.reqTypeRefreshLottoSlip,t);break;case this.betTypeLotto:this.req(this.reqTypeRefreshSlip,t);break;case this.betTypeAllAccept:this.req(this.reqTypeRefreshAccept,t);break;case this.reqTypePhoneBet:this.req(this.reqTypePhoneBet,t,"",i);break;default:this.req(this.reqTypeRefreshSlip,t)}}catch(r){this.displayError(r.message)}},updateState:function(){var n=this.getHandler("onupdatestate");n&&n(this)},onPBetError:function(){var n=this.getHandler("onpbeterror");n&&n(this)},clearBets:function(n){try{this.setValueInBSCookie("","");this._betItems=[];this._betMltItems=[];this._betCastItems=[];this._betBuilderItems=[];n&&this.req(this.reqTypeRefreshSlip)}catch(t){this.displayError(t.message)}},confirmBets:function(){try{var n=this.getHandler("onconfirmbet");n&&this._lock===!1&&n(this)}catch(t){this.displayError(t.message)}},placeBets:function(){try{var n=this.getHandler("onplacebet");n&&this._lock===!1&&(this.updateState(),n(this))}catch(t){this.displayError(t.message)}},referBets:function(){try{this.resetPoll();var n=this.getHandler("onreferbet");n&&this._lock===!1&&n(this)}catch(t){this.displayError(t.message)}},pollBet:function(n,t,i,r,u){this.setPollTimeSettings(i,r);this._pollCount<this._pollTime/this._pollInterval&&!this._pollForceStop?(this._pollReqType=n,this._pollReference=t,this._pollRequestParams=u,this._pollCount++,this._pollForceStop=!1,setTimeout(Function.createDelegate(this,this.execPoll),this._pollInterval*1e3)):this.execPollExpired()},execPoll:function(){var t,n;try{t=this.getHandler("onpoll");t&&this._lock===!1&&(n=[],Array.add(n,this._pollReqType),Array.add(n,this._pollReference),Array.add(n,this._pollRequestParams),t(this,n))}catch(i){this.resetPoll();this.displayError(i.message)}},execPollExpired:function(){var t,n;try{t=this.getHandler("onpollexpired");t&&this._lock===!1&&(n=[],Array.add(n,this._pollReqType),Array.add(n,this._pollForceStop),t(this,n))}catch(i){this.displayError(i.message)}},pollInProgress:function(){return this._pollReference!==null||this._pollRequestParams!==null},resetPoll:function(){this._pollReqType=0;this._pollReference=null;this._pollRequestParams=null;this._pollCount=0;this._pollForceStop=!1},setPollTimeSettings:function(n,t){n&&t&&(this._pollTime=n,this._pollInterval=t)},deleteItem:function(){try{var n=this.getHandler("ondeleteitem");n&&this._lock===!1&&n(this,arguments)}catch(t){this.displayError(t.message)}},getBetItems:function(n){switch(n){case this.betTypeCast:case this.betTypeToteCast:case this.betTypeUsToteCast:case this.betTypeTotePot:case this.betTypeUsTotePot:case this.betTypeEToteCast:case this.betTypeETotePot:case this.betTypeFrgnToteCast:case this.betTypeFrgnTotePot:case this.betTypeTotePotAus:case this.itemTypeCast:case this.itemTypeTotePot:case this.itemTypeToteCast:return this._betCastItems;case this.betTypeMultiple:case this.itemTypeMultiple:return this._betMltItems;case this.betTypeBetBuilder:case this.itemTypeBetBuilder:return this._betBuilderItems;case this.betTypeAll:case this.itemTypeAll:return this._betItems.concat(this._betCastItems).concat(this._betMltItems).concat(this._betBuilderItems);default:return this._betItems}},containsPhoneOnlyBet:function(){for(var t=this.getBetItems(),i=!1,n=0;n<t.length;n++)if(t[n].getStItem("pom")=="Y"){i=!0;break}return i},unsuspendedItemCount:function(){for(var t=this.getBetItems(),i=0,n=0;n<t.length;n++)t[n].getStItem("_s")!=="1"&&i++;return i},getBetItemById:function(n,t){var r;switch(n){case this.betTypeToteNonCast:case this.betTypeEToteNonCast:case this.betTypeUsToteNonCast:case this.betTypeFrgnToteNonCast:case this.betTypeNormal:case this.itemTypeSingle:case this.itemTypeToteSingle:r=this._betItems[t];break;case this.betTypeCast:case this.betTypeToteCast:case this.betTypeUsToteCast:case this.betTypeTotePot:case this.betTypeUsTotePot:case this.betTypeEToteCast:case this.betTypeETotePot:case this.betTypeFrgnToteCast:case this.betTypeFrgnTotePot:case this.betTypeTotePotAus:case this.itemTypeCast:case this.itemTypeTotePot:case this.itemTypeToteCast:r=this._betCastItems[t];break;case this.betTypeBetBuilder:case this.itemTypeBetBuilder:return this._betBuilderItems[t];default:for(i=0;i<this._betMltItems.length;i++)if(this._betMltItems[i].getCnItem("id")==String(t)){r=this._betMltItems[i];break}}return r},getBetItemByCn:function(n,t,i){for(var f,u=this.getBetItems(n),r=0;r<u.length;r++)if(u[r].getCnItem(t)==i||u[r].getStItem(t)==i){f=u[r];break}return f},setBetItems:function(n,t){switch(t){case this.betTypeCast:case this.betTypeToteCast:case this.betTypeUsToteCast:case this.betTypeTotePot:case this.betTypeUsTotePot:case this.betTypeEToteCast:case this.betTypeETotePot:case this.betTypeFrgnToteCast:case this.betTypeFrgnTotePot:case this.betTypeTotePotAus:this._betCastItems=n;break;case this.betTypeMultiple:this._betMltItems=n;break;case this.betTypeBetBuilder:case this.itemTypeBetBuilder:return this._betBuilderItems=n;default:this._betItems=n}},getSlipType:function(){return this.getValueFromBSCookie("bt").replace(/\|/g,"")},isFull:function(){return this._betItems.length+this._betCastItems.length>=14?!0:!1},okToAdd:function(n){return this._betItems.length+this._betCastItems.length+n<=14?!0:!1},numItems:function(n){return n===undefined&&(n=!0),this._betItems.length+this._betCastItems.length+(n===!1?0:this._betMltItems.length)+this._betBuilderItems.length},isEmpty:function(){return this._betItems.length+this._betCastItems.length+this._betMltItems.length+this._betBuilderItems.length===0},setClearOnAdd:function(n){this._clearOnAdd=n},getClearOnAdd:function(){return this._clearOnAdd},addOnAddBet:function(n){this._events.addHandler("onaddbet",n)},addOnReqComplete:function(n){this._events.addHandler("onreqcomplete",n)},addOnDeleteItem:function(n){this._events.addHandler("ondeleteitem",n)},addOnHandleInProg:function(n){this._events.addHandler("oninprogress",n)},addOnContentChangedOnClient:function(n){this._events.addHandler("oncontentchangedclient",n)},addOnContentLoaded:function(n){this._events.addHandler("oncontentloaded",n)},addOnLock:function(n){this._events.addHandler("onlockunlock",n)},addOnPageLoad:function(n){this._events.addHandler("onpageload",n)},addOnConfirmBet:function(n){this._events.addHandler("onconfirmbet",n)},addOnPlaceBet:function(n){this._events.addHandler("onplacebet",n)},addOnReferBet:function(n){this._events.addHandler("onreferbet",n)},addOnPoll:function(n){this._events.addHandler("onpoll",n)},addOnPollExpired:function(n){this._events.addHandler("onpollexpired",n)},addOnRestoreState:function(n){this._events.addHandler("onreststate",n)},addOnUpdateState:function(n){this._events.addHandler("onupdatestate",n)},addOnPBetError:function(n){this._events.addHandler("onpbeterror",n)},addScrollToTop:function(n){this._events.addHandler("onscrolltotop",n)},addOnBetAdded:function(n){this._events.addHandler("onbetadded",n)},addOnEditBet:function(n){this._events.addHandler("oneditbet",n)},addOnBetAddedReqComplete:function(n){this._events.addHandler("onbetaddedreqcomplete",n)},addOnRefreshReqComplete:function(n){this._events.addHandler("onrefreshreqcomplete",n)},addOnBetSlipItemsChanged:function(n){this._events.addHandler("onbetslipitemschanged",n)},addOnAcceptChanges:function(n){this._events.addHandler("onacceptchanges",n)},addOnBetSlipLoaded:function(n){this._events.addHandler("onbetsliploaded",n)},addOnMaxSelections:function(n){this._events.addHandler("onmaxselections",n)},addOnBetslipDisplayed:function(n){this._events.addHandler("onbetslipdisplayed",n)},addOnPlaceBetSuccess:function(n){this._events.addHandler("onplacebetsuccess",n)},addOnAddBetslipFooterLinks:function(n){this._events.addHandler("onaddbetslipfooterlinks",n)},addOnAddReceiptHeaderLinks:function(n){this._events.addHandler("onaddreceiptheaderlinks",n)},addOnAddReceiptLiveAlertSignUp:function(n){this._events.addHandler("onaddreceiptlivealertsignup",n)},addOnBetslipError:function(n){this._events.addHandler("onbetsliperror",n)},addOnShowBetSlip:function(n){this._events.addHandler("onshowbetslip",n)},addOnHideBetSlip:function(n){this._events.addHandler("onhidebetslip",n)},addOnChangeBetslipHeight:function(n){this._events.addHandler("onchangebetslipheight",n)},addOnPopupShow:function(n){this._events.addHandler("onpopupshow",n)},addOnPopupHide:function(n){this._events.addHandler("onpopuphide",n)},removeOnBetSlipLoaded:function(n){this._events.removeHandler("onbetsliploaded",n)},addOnDeleteBetReqComplete:function(n){this._events.addHandler("deletebetreqcomplete",n)},addOnAddBetFailed:function(n){this._events.addHandler("onaddbetfailed",n)},ScrollToTop:function(){var n=this.getHandler("onscrolltotop");n&&n(this)},betAdded:function(n){var t=this.getHandler("onbetadded");t&&t(this,n[0].getCnItem("fp"))},betAddedReqComplete:function(){var n=this.getHandler("onbetaddedreqcomplete");n&&n(this)},editBet:function(){var n=this.getHandler("oneditbet");n&&n(this)},refreshReqComplete:function(){var n=this.getHandler("onrefreshreqcomplete");n&&n(this)},betSlipItemsChanged:function(){var n=this.getHandler("onbetslipitemschanged");n&&n(this)},acceptChanges:function(){var n=this.getHandler("onacceptchanges");n&&n(this)},betSlipLoaded:function(){var n=this.getHandler("onbetsliploaded");n&&n(this)},maxSelections:function(){var n=this.getHandler("onmaxselections");n&&n(this)},betSlipDisplayed:function(){var n=this.getHandler("onbetslipdisplayed");n&&n(this)},placeBetSuccess:function(){var n=this.getHandler("onplacebetsuccess");n&&n(this)},addBetslipFooterLinks:function(){var n=this.getHandler("onaddbetslipfooterlinks");n&&n(this)},addReceiptHeaderLinks:function(){var n=this.getHandler("onaddreceiptheaderlinks");n&&n(this)},addReceiptLiveAlertSignUp:function(){var n=this.getHandler("onaddreceiptlivealertsignup");n&&n(this)},betslipError:function(){var n=this.getHandler("onbetsliperror");n&&n(this)},showBetSlip:function(){var n=this.getHandler("onshowbetslip");n&&n(this)},hideBetSlip:function(){var n=this.getHandler("onhidebetslip");n&&n(this)},changeBetslipHeight:function(){var n=this.getHandler("onchangebetslipheight");n&&n(this)},popupShow:function(n){var t=this.getHandler("onpopupshow");t&&t(this,n)},popupHide:function(){var n=this.getHandler("onpopuphide");n&&n(this)},restoreState:function(){var n=this.getHandler("onreststate");n&&n(this)},deleteBetReqComplete:function(){var n=this.getHandler("deletebetreqcomplete");n&&n(this)},addBetFailed:function(){var n=this.getHandler("onaddbetfailed");n&&n(this)},lock:function(){this._lock=!0;this.lockEvent()},unlock:function(){this._lock=!1;this.lockEvent()},locked:function(){return this._lock},lockEvent:function(){var n=this.getHandler("onlockunlock");n&&n(this,this._lock)},req:function(n,t,i,r,u){var o=!0,s,f,l,a,e;if(r&&(this._controller=r),this._lock===!1){this.lock();this._b365BsAJAX!==null&&(this._b365BsAJAX=null);var v=this.deviceType.length>0?"&devicetype="+this.deviceType:"",y=this.betSource.length>0?"&betsource="+this.betSource:"",p="&streaming="+Number(this.showStreaming),w="&fulltext="+Number(this.showFullTextMode),b="&refreshbal="+Number(this.refreshUserBalance),k="&isocode="+this.isoCode,h=this.containsPhoneOnlyBet(),g=this._controller&&this._controller.betCallTwilioEnabled(),d=h&&window.location.host.indexOf("com.au")>-1?"&bc=y":"",c="";(n==this.reqTypePlaceBet||n==this.reqTypePlaceMobileLottoBet)&&(l=this._controller&&this._controller.getBetguid?this._controller.getBetguid():u,c+="&betguid="+l);r&&r.clientEnhancedMode()&&(f=$("#bsDiv"),$("li",f).hasClass("disabledBetSlip")||(s=$('li[class$="multiple-section multipleBets"], li[data-item-type$="single"], li[data-item-type$="cast"], li[data-item-type$="tote-single"], li[data-item-type$="tote-cast"], li[data-item-type$="tote-pot"], li[data-item-type$="tote-pot-leg"]',"#bsDiv"),r._enhancedBetSlipAnimations.disableBetSlip(s,f)));a="../?op="+n+"&ck="+this._betSlipCookieKey+(t&&t.length>0?"&"+t:"")+y+p+w+c+b+k+d+v+"&qb=0";this._ajaxInstId=(new Date).getTime();r&&(r.clientActionInProgress(!0),n===r._bsInst.reqTypePlaceBet&&r.getMultipleItemsController().cacheState());this._b365BsAJAX=new b365BsAJAX(a,Function.createDelegate(this,this.reqComplete),Function.createDelegate(this,this.reqError),3e4,Function.createDelegate(this,this.reqTimeout),!0,this._ajaxInstId,arguments);h&&n==this.reqTypePlaceBet?(e=this.getClickToCallHandler(),e&&e.filterPhoneOnlyBetsFromCookie()):this.handleInProg("show");this.postPayload?this._b365BsAJAX.Post(this.postPayload):this._b365BsAJAX.Load("POST")}else o=!1;return o},reqComplete:function(){this.unlock();delete this._b365BsAJAX;this._b365BsAJAX=null;this.restoreState();var n=this.getHandler("onreqcomplete");n?n(this,arguments):this.handleInProg("hide","")},reqTimeout:function(n){this.isSiteOverlaySpinnerShowing&&(this.isSiteOverlaySpinnerShowing=!this._controller.hideSiteOverlaySpinner());this.displayError(betSlipML.timeout,n);this._controller&&this._controller.clientEnhancedMode()&&$("#bsDiv").find(".disableBetSlip, .disabledBetSlip").removeClass("disableBetSlip").removeClass("disabledBetSlip")},reqError:function(n,t,i){this.isSiteOverlaySpinnerShowing&&(this.isSiteOverlaySpinnerShowing=!this._controller.hideSiteOverlaySpinner());this.displayError(betSlipML.error,i,"error");this._controller&&this._controller.clientEnhancedMode()&&$("#bsDiv").find(".disableBetSlip, .disabledBetSlip").removeClass("disableBetSlip").removeClass("disabledBetSlip")},displayError:function(n,t,i){this._ajaxInstId==t&&(this.setClearOnAdd(!1),this.resetPoll(),this.unlock(),this.handleInProg("hide",n,typeof i!="undefined"?i:"alert"),this._b365BsAJAX=null)},handleInProg:function(n,t,i){var u=this.getHandler("oninprogress"),r=-1;this._b365BsAJAX&&this._b365BsAJAX._arguments.length>7&&(r=this._b365BsAJAX._arguments[7][0]);((r==this.reqTypePlaceBet||r==this.reqTypeConfirmBet)&&t||t==betSlipML.pleasecheckmembers)&&(t=betSlipML.pleasecheckmembers,this.onPBetError());u&&u(this,[n,t,r,typeof i!="undefined"?i:"alert"])},contentChangedOnClient:function(){var n=this.getHandler("oncontentchangedclient");n&&n(this)},contentLoaded:function(){var n=this.getHandler("oncontentloaded");n&&n(this)},getHandler:function(n){return this._events.getHandler(n)},setValueInBSCookie:function(n,t){$bSys.setValueInCookie(this._betSlipCookieKey,n,t,!0)},getValueFromBSCookie:function(n,t){return $bSys.getValueFromCookie(this._betSlipCookieKey,n,t)},readBSCookieValue:function(n){return $bSys.readCookie(n)},backupBSCookieValue:function(n){this._betSlipCookieBackup=this.readBSCookieValue(n)},restoreBSCookieValue:function(n,t){$bSys.setCookieValue(n,t)},backupPushBetPreSplitBSCookieValue:function(n){this._pushBetSlipCookieBackup=this.readBSCookieValue(n)},setPendingPushBet:function(n,t){this.pushBetStatus=n;this.pendingPushBetElement=t},getPendingPushBetStatus:function(){return this.pushBetStatus},getPendingPushBetElement:function(){return this.pendingPushBetElement},getController:function(){return this._controller},getClickToCallHandler:function(){return this._clickToCallHandler},setClickToCallHandler:function(n){this._clickToCallHandler=n}};bs=new b365.Ui.BetSlipAPI("bs");Sys.Application.add_load(Function.createDelegate(bs,bs.pageLoad));Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.QuickBet=function(n,t){this._bsController=t;this._bsInst=n;this._bsContext=t._bsContext;this._inplay=!1;this._quickBetVisible=!1;this._switchEnabled=!1;this._tooltipDismissed=!1;this._tooltipElement=null;this.initialised=!1;this.isQuickBetLoaded()&&this.initQuickBet()};b365.Ui.Betslip.QuickBet.prototype.hasBets=function(){return this._bsInst.getBetItems&&this._bsInst.getBetItems(this._bsInst.betTypeAll).length>0};b365.Ui.Betslip.QuickBet.prototype.toggleQuickBetVisibility=function(n,t){var e=this.getState(),r,i;if(n){if(r=document.querySelector(".bs-Header_Hide"),r&&(r.className=r.className.replace("bs-Header_Hide","")),e)if(t)this.setMessage(!1),this.setSwitch(!1),i=document.querySelector(".qb-Btn-hidden"),i&&(i.className="qb-Btn");else{this.setMessage(!0);var i=document.querySelector(".qb-Btn-hidden"),u=document.querySelector(".qb-Help_Wrapper-inactive"),f=document.querySelector(".bs-BetSlipType");i&&(i.className="qb-Btn");u&&(u.className="qb-Help_Wrapper-active");f&&(f.className="bs-BetSlipType-inactive")}else i=document.querySelector(".qb-Btn-hidden"),i&&(i.className="qb-Btn");this._quickBetVisible=!0}else{if(t||(r=document.querySelector(".bs-Header"),r&&r.className.indexOf("bs-Header_Hide")==-1&&(r.className=r.className+" bs-Header_Hide")),e)if(t)this.setMessage(!1),i=document.querySelector(".qb-Btn"),i&&(i.className="qb-Btn-hidden");else{this.setMessage(!1);var i=document.querySelector(".qb-Btn"),u=document.querySelector(".qb-Help_Wrapper-active"),f=document.querySelector(".bs-BetSlipType-inactive");i&&(i.className="qb-Btn-hidden");u&&(u.className="qb-Help_Wrapper-inactive");f&&(f.className="bs-BetSlipType qb-BetSlipType")}else i=document.querySelector(".qb-Btn"),i&&(i.className="qb-Btn-hidden");this._quickBetVisible=!1;this._bsContext.ToggleQuickBetHelpTooltip(!1);this.removeTooltip()}};b365.Ui.Betslip.QuickBet.prototype.removeQuickBet=function(){var r=document.querySelector(".bs-BetSlipType"),n=document.querySelector(".qb-Container"),t=document.querySelector(".qb-QuickBetMsg-inactive"),i=document.querySelector(".qb-Help_Wrapper-inactive");n&&n.parentNode.removeChild(n);r&&(r.className="bs-BetSlipType");t&&t.parentNode.removeChild(t);i&&i.parentNode.removeChild(i)};b365.Ui.Betslip.QuickBet.prototype.isQuickBetLoaded=function(){var n=document.querySelector(".qb-Container");return n!=null};b365.Ui.Betslip.QuickBet.prototype.getState=function(){return localStorage?this._bsController.getQuickBetEnabled():this._switchEnabled};b365.Ui.Betslip.QuickBet.prototype.setState=function(n){localStorage?this._bsController.setQuickBetEnabled(n):this._switchEnabled=n};b365.Ui.Betslip.QuickBet.prototype.setSwitch=function(n){var t=document.querySelector(".qb-Btn_Switch-true, .qb-Btn_Switch-false");t.className="qb-Btn_Switch-"+n};b365.Ui.Betslip.QuickBet.prototype.setSwitchAndState=function(n){if(n&&this.hasBets()){new b365.Ui.Betslip.ConfirmationDialog(this._bsInst,this._bsController).showQuickBetActivationDialog();return}if(n&&!this._bsContext.IsAuthenticated()){this._bsController.clientQuickBetLoginDelegate();return}this.setSwitch(n);this.setState(n);n||this._bsContext.clientAddQuickBetToBetslip()};b365.Ui.Betslip.QuickBet.prototype.getTooltipDismissed=function(){return localStorage?this._bsController.getQuickBetTooltipDismissed():this._tooltipDismissed};b365.Ui.Betslip.QuickBet.prototype.setTooltipDismissed=function(){localStorage?this._bsController.setQuickBetTooltipDismissed(!0):this._tooltipDismissed=!0};b365.Ui.Betslip.QuickBet.prototype.showTooltip=function(){var n=this,u=document.querySelector(".qb-Btn_Switch-false"),r,f,t,i;u&&!this._tooltipElement&&(r=document.querySelector(".bs-Header"),f=r.getAttribute("data-text"),n._tooltipElement=document.createElement("DIV"),n._tooltipElement.className="qb-Tooltip",t=document.createElement("DIV"),t.className="qb-Tooltip_Nib",u.appendChild(t),i=document.createElement("DIV"),i.className="qb-Tooltip_Text",i.appendChild(document.createTextNode(f)),n._tooltipElement.appendChild(i),r.appendChild(n._tooltipElement),setTimeout(function(){n._tooltipElement.className+=" qb-Tooltip-visible";t.className+=" qb-Tooltip_Nib-visible"},0),n.setTooltipDismissed(),setTimeout(function(){n._tooltipElement.className="qb-Tooltip";t.className="qb-Tooltip_Nib"},1e4))};b365.Ui.Betslip.QuickBet.prototype.hideTooltip=function(){var n=document.querySelector(".qb-Tooltip-visible"),t=document.querySelector(".qb-Tooltip_Nib-visible");n&&(n.className="qb-Tooltip");t&&(t.className="qb-Tooltip_Nib")};b365.Ui.Betslip.QuickBet.prototype.removeTooltip=function(){var n=document.querySelector(".qb-Tooltip"),t=document.querySelector(".qb-Tooltip_Nib-visible");n&&n.parentNode.removeChild(n);t&&t.parentNode.removeChild(t)};b365.Ui.Betslip.QuickBet.prototype.setMessage=function(n){var i,t,r,u,f;n?(i=document.querySelector(".bs-EmptyMsg"),t=document.querySelector(".qb-QuickBetMsg-inactive"),r=document.querySelector(".bs-BetSlipType"),u=document.querySelector(".qb-Help_Wrapper-inactive"),i&&t&&r&&u&&(f=i.offsetHeight,t.style.height=f+"px",i.className="qb-EmptyMsg",t.className="qb-QuickBetMsg-active",r.className="bs-BetSlipType-inactive",u.className="qb-Help_Wrapper-active")):(i=document.querySelector(".qb-EmptyMsg"),t=document.querySelector(".qb-QuickBetMsg-active"),r=document.querySelector(".bs-BetSlipType-inactive"),u=document.querySelector(".qb-Help_Wrapper-active"),i&&t&&r&&u&&(t.style.height="",i.className="bs-EmptyMsg",t.className="qb-QuickBetMsg-inactive",r.className="bs-BetSlipType qb-BetSlipType",u.className="qb-Help_Wrapper-inactive"))};b365.Ui.Betslip.QuickBet.prototype.isAustralianDomain=function(){return this._bsController.IsAustralianDomain()};b365.Ui.Betslip.QuickBet.prototype.isInplay=function(){return this._inplay};b365.Ui.Betslip.QuickBet.prototype.initQuickBet=function(){var n=this,t;n.isAustralianDomain()?(n.removeQuickBet(),n.setState(!1)):(n.initialised=!0,this._bsContext.ToggleQuickBet=function(){n.hasBets()?n.setSwitchAndState(!0):n.setSwitchAndState(!n.getState());n.setMessage(n.getState());n.hideTooltip();n.getState()||n._bsContext.ToggleQuickBetHelpTooltip(!1)},(!this._bsContext.IsAuthenticated()||n.hasBets())&&n.setState(!1),t=n.getState(),n.setSwitch(t),n.setMessage(t))};b365.Ui.Betslip.QuickBet.prototype.navigationChanged=function(n){var i=this,t;this._inplay=n;t=this.getState();n===t&&this.setSwitch(t);n&&!this.getTooltipDismissed()&&(this._bsContext.RemoveQuickBetTooltip=function(){i.removeTooltip()},this.showTooltip());this.toggleQuickBetVisibility(n,this.hasBets())};b365.Ui.Betslip.QuickBet.prototype.canHandleBets=function(){return this.getState()&&this._quickBetVisible&&!this.hasBets()};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.InputFocusClassHelper=function(){this._focusClassName="focus"};b365.Ui.Betslip.InputFocusClassHelper.prototype.addFocusClassToElement=function(n){n.hasClass(this._focusClassName)||n.addClass(this._focusClassName)};b365.Ui.Betslip.InputFocusClassHelper.prototype.removeFocusClassFromElement=function(n){n.hasClass(this._focusClassName)&&n.removeClass(this._focusClassName)};b365.Ui.Betslip.InputFocusClassHelper.prototype.addFocusClassToAllStakeFields=function(){};b365.Ui.Betslip.InputFocusClassHelper.prototype.removeFocusClassFromAllStakeFields=function(){var n=$('input[class*=" focus"]',"#bsDiv");n.length>0&&n.removeClass("focus")};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.StakeEntryKeyboard=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"};this._validTarget=function(n){return n.target.tagName=="INPUT"&&(n.target.type=="text"||n.target.type=="number"||n.target.type=="tel")};this._clearMultiSingle=function(n){var t=document.getElementById("mltsngstk");t&&n.value!==t.value&&(n.className.indexOf("bs-MultipleBets_Stake")>-1||(t.value="",$("html").is(".ie-8, .ie-9")&&(t.className.indexOf("bs-Stake_TextBox-placeholder")==-1&&(t.className+=" bs-Stake_TextBox-placeholder"),t.value=t.getAttribute("placeholder"))))};this._stakeEntryRule=this._bsController.stakeEntryRule()};b365.Ui.Betslip.StakeEntryKeyboard.prototype={init:function(){var n=this;if(n._isValid())if($("html").is(".ie-8, .ie-9"))$("#bsDiv").off("keyup").on("keyup",function(t){var i=t.keyCode?t.keyCode:t.charCode;t.target=t.target||t.srcElement;n._validTarget(t)&&(i==13&&(document.activeElement.blur(),t.preventDefault()),typeof n._stakeEntryRule=="function"&&(i==110||i==188||i==190)&&n._stakeEntryRule(t.target),new b365.Ui.Betslip.StakeChangedHandler(n._bsInst,n._bsController).handle(t.target),n._clearMultiSingle(t.target));t.stopPropagation()});else $("#bsDiv").off("input").on("input",function(t){t.target=t.target||t.srcElement;n._validTarget(t)&&new b365.Ui.Betslip.StakeChangedHandler(n._bsInst,n._bsController).handle(t.target);n._clearMultiSingle(t.target);t.stopPropagation()})},detach:function(){this._isValid()}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CurrencyDisplayHelper=function(n,t){this._betSlipController=n;this._decimalSeperator=t.decimalSeparator;this._thousandsSeperator=t.thousandsSeparator};b365.Ui.Betslip.CurrencyDisplayHelper.prototype.getDecimalSeperator=function(){return this._decimalSeperator};b365.Ui.Betslip.CurrencyDisplayHelper.prototype.formatCurrency=function(n){var t=n.toString().split(".");return isNaN(n)||t.length!=2?n:t[0].replace(/\B(?=(\d{3})+(?=$))/g,"")+(t[1]?this._decimalSeperator+t[1]:"")};b365.Ui.Betslip.CurrencyDisplayHelper.prototype.unformatCurrency=function(n){var t,i;return isNaN(n)?(i=new RegExp("["+this._thousandsSeperator+"]","g"),t=n.replace(i,""),t=t.replace(this._decimalSeperator,"."),t=parseFloat(t).toFixed(2),isNaN(t)&&(t="0"),t):n};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedBetSlipAnimations=function(n){this._betSlipController=n;this._animationEndEvents="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd";this._removeSingleBets={animationClass:"removeBetElementFade",secondAnimationClass:"removeBetElementShrink",animationEndName:"FadeOut",secondAnimationEndName:"Shrink"};this._hideStakePad={animationClass:"hideStakePad",animationClassFast:"hideStakePadQuickly",animationEndName:"HideStakePad"};this._showStakePad={animationClass:"showStakePad",animationClassFast:"showStakePadQuickly",animationEndName:"ShowStakePad"};this._disableBetSlip={animationClass:"disableBetSlip",animationEndName:"Disabled",disabledClass:"disabledBetSlip"};this._enableBetSlip={animationClass:"enableBetSlip",animationEndName:"Enabled"};this._shakeStakeFields={animationClass:"shakeStakeField",animationEndName:"Shake",focusClass:"focus"}};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.removeSingleBet=function(n,t,i,r,u,f){var e=this,s=r,h=u,c=f,o=n;if(this._betSlipController._stakeEntryHander.detach(),t){n.on(this._animationEndEvents,function(n){if(n.originalEvent.animationName)switch(n.originalEvent.animationName){case e._hideStakePad.animationEndName:o.addClass(e._removeSingleBets.animationClass);break;case e._removeSingleBets.animationEndName:o.addClass(e._removeSingleBets.secondAnimationClass);break;case e._removeSingleBets.secondAnimationEndName:o.off(e._animationEndEvents);s&&e.doCallBack(s,h,c)}});i.attr("class",this._hideStakePad.animationClass)}else{n.on(this._animationEndEvents,function(n){if(n.originalEvent.animationName)switch(n.originalEvent.animationName){case e._removeSingleBets.animationEndName:o.addClass(e._removeSingleBets.secondAnimationClass);break;case e._removeSingleBets.secondAnimationEndName:o.off(e._animationEndEvents);s&&e.doCallBack(s,h,c)}});n.addClass(e._removeSingleBets.animationClass)}};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.removeAllBets=function(n,t,i,r,u,f){var e=this,o=$("#bsDiv"),c=n.length,s=0,h=r,l=u,a=f,v=n;if(this._betSlipController._stakeEntryHander.detach(),t){o.on(this._animationEndEvents,function(n){if(n.originalEvent.animationName)switch(n.originalEvent.animationName){case e._hideStakePad.animationEndName:v.addClass(e._removeSingleBets.animationClass);break;case e._removeSingleBets.animationEndName:$(n.target).addClass(e._removeSingleBets.secondAnimationClass);break;case e._removeSingleBets.secondAnimationEndName:s+=1;s>=c&&(o.off(e._animationEndEvents),h&&e.doCallBack(h,l,a))}});i.attr("class",this._hideStakePad.animationClass)}else{o.on(this._animationEndEvents,function(n){if(n.originalEvent.animationName)switch(n.originalEvent.animationName){case e._removeSingleBets.animationEndName:$(n.target).addClass(e._removeSingleBets.secondAnimationClass);break;case e._removeSingleBets.secondAnimationEndName:s+=1;s>=c&&(o.off(e._animationEndEvents),h&&e.doCallBack(h,l,a))}});n.addClass(e._removeSingleBets.animationClass)}};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.hideBetMultiples=function(n,t,i,r,u,f,e){var o=this,c=n.length,s=0,h=u,l=f,a=e,v=t,y=n;if(this._betSlipController._stakeEntryHander.detach(),i){t.on(this._animationEndEvents,function(n){if(n.originalEvent.animationName)switch(n.originalEvent.animationName){case o._hideStakePad.animationEndName:y.addClass(o._removeSingleBets.animationClass);break;case o._removeSingleBets.animationEndName:$(n.target).addClass(o._removeSingleBets.secondAnimationClass);break;case o._removeSingleBets.secondAnimationEndName:s+=1;s>=c&&(v.off(o._animationEndEvents),h&&o.doCallBack(h,l,a))}});r.attr("class",this._hideStakePad.animationClass)}else{t.on(this._animationEndEvents,function(n){if(n.originalEvent.animationName)switch(n.originalEvent.animationName){case o._removeSingleBets.animationEndName:$(n.target).addClass(o._removeSingleBets.secondAnimationClass);break;case o._removeSingleBets.secondAnimationEndName:s+=1;s>=c&&(v.off(o._animationEndEvents),h&&o.doCallBack(h,l,a))}});n.addClass(o._removeSingleBets.animationClass)}};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.shakeStakeFields=function(n,t,i,r,u){var f=this,s=n.length,e=0,o=i,h=r,c=u,l=t,a=n;t.on(this._animationEndEvents,function(n){n.originalEvent.animationName&&n.originalEvent.animationName==f._shakeStakeFields.animationEndName&&(e+=1,e>=s&&(a.removeClass(f._shakeStakeFields.animationClass),l.off(f._animationEndEvents),o&&f.doCallBack(o,h,c)))});n.removeClass(f._shakeStakeFields.focusClass).removeClass(f._shakeStakeFields.animationClass).addClass(f._shakeStakeFields.focusClass).addClass(f._shakeStakeFields.animationClass)};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.hideStakePad=function(n,t,i,r,u){var f=this,o=n,e=i,s=r,h=u;n.on(this._animationEndEvents,function(n){n.originalEvent.animationName&&n.originalEvent.animationName==f._hideStakePad.animationEndName&&(o.off(this._animationEndEvents),e&&f.doCallBack(e,s,h))});n.attr("class",t?this._hideStakePad.animationClassFast:this._hideStakePad.animationClass)};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.showStakePad=function(n,t,i,r,u){var f=this,o=n,e=i,s=r,h=u;n.on(this._animationEndEvents,function(n){n.originalEvent.animationName&&n.originalEvent.animationName==f._showStakePad.animationEndName&&(o.off(this._animationEndEvents),e&&f.doCallBack(e,s,h))});n.attr("class",t?this._showStakePad.animationClassFast:this._showStakePad.animationClass)};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.disableBetSlip=function(n,t){var i=this,u=n.length,r=0,f=t,e=n;t.on(this._animationEndEvents,function(n){n.originalEvent.animationName&&n.originalEvent.animationName==i._disableBetSlip.animationEndName&&(r+=1,r>=u&&(f.off(i._animationEndEvents),e.removeClass(i._disableBetSlip.animationClass).addClass(i._disableBetSlip.disabledClass)))});n.addClass(i._disableBetSlip.animationClass)};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.enableBetSlip=function(n,t){var i=this,u=n.length,r=0,f=t,e=n;t.on(this._animationEndEvents,function(n){n.originalEvent.animationName&&n.originalEvent.animationName==i._enableBetSlip.animationEndName&&(r+=1,r>=u&&(f.off(i._animationEndEvents),e.removeClass(i._enableBetSlip.animationClass)))});n.removeClass(i._disableBetSlip.disabledClass).addClass(i._enableBetSlip.animationClass)};b365.Ui.Betslip.EnhancedBetSlipAnimations.prototype.doCallBack=function(n,t,i){t?i?n.apply(i,t):n.apply(null,t):n()};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedBetSlipTypeSelector=function(n){this._betSlipController=n;this._clickHandlers=[];this._siteClickHandlers=[];this._selectClickHandler=null;this._isShowing=!1;this._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipTypeSelector.prototype.showPopUpMenu=function(){var n=this,t,i;n._betSlipController.hidePopups(n);t=document.getElementById("betSlipTypeOptions");i=document.getElementById("betSlipTypeSelection");t.className.indexOf("showing")===-1?(t.className+=" showing",i.className+=" showing",n.addHandlers(this),n._isShowing=!0,n._betSlipController.webPopupManager.popupShow(t,function(){n.hidePopUpMenu()})):(n._isShowing=!0,n.hidePopUpMenu());t=null};b365.Ui.Betslip.EnhancedBetSlipTypeSelector.prototype.hidePopUpMenu=function(){var n,i,t=this;t._isShowing&&(n=document.getElementById("betSlipTypeOptions"),i=document.getElementById("betSlipTypeSelection"),n.className.indexOf("showing")>-1&&(n.className=n.className.replace(" showing",""),i.className=i.className.replace(" showing","")),t.removeHandlers(this),t._isShowing=!1,t._betSlipController.webPopupManager.popupHide(),n=null)};b365.Ui.Betslip.EnhancedBetSlipTypeSelector.prototype.addHandlers=function(n){var i=document.getElementById("BetSlipDialogueHeader"),u=document.getElementById("bsDiv"),e=document.getElementById("betSlipTypeOptions"),r=$("li",e),t,f;if(n.removeHandlers(n),r.length>0)for(t=0,f=r.length;t<f;t++)n._clickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(r[t],$.proxy(n.handleSelection,n),!1));i&&n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i,$.proxy(n.hidePopUpMenu,n),!1));n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(u,$.proxy(n.hidePopUpMenu,n),!1));i=null;u=null};b365.Ui.Betslip.EnhancedBetSlipTypeSelector.prototype.removeHandlers=function(n){var t,i;if(n._clickHandlers.length>0){for(t=0,i=n._clickHandlers.length;t<i;t++)n._clickHandlers[t]._element&&n._clickHandlers[t].destroy();n._clickHandlers=[]}if(n._siteClickHandlers.length>0){for(t=0,i=n._siteClickHandlers.length;t<i;t++)n._siteClickHandlers[t]._element&&n._siteClickHandlers[t].destroy();n._siteClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipTypeSelector.prototype.handleSelection=function(n){var i=document.getElementById("betSlipTypeOptions"),r=document.getElementById("betSlipTypeSelectionText"),u=n.target.getAttribute("data-item"),t=n.target.innerHTML;n.stopPropagation();t!==""&&t.indexOf("<span")==-1&&(r.innerHTML=t,$("#bsDiv .bs-BetSlipType select").val(u).change(),i.setAttribute("style","display:none;"));i=null;r=null};b365.Ui.Betslip.EnhancedBetSlipTypeSelector.prototype.disablePopUp=function(){var n=this;n.hidePopUpMenu();n._selectClickHandler!==null&&n._selectClickHandler._element&&n._selectClickHandler.destroy();n._selectClickHandler=null;n._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipTypeSelector.prototype.enablePopUp=function(){var n=this,t=document.getElementById("betSlipTypeSelection");if(n._selectClickHandler!==null&&n._selectClickHandler._element){n._enabled=!0;return}if(n.removeHandlers(n),!t){n._enabled=!1;n._isShowing=!1;return}n._selectClickHandler=new b365.Ui.Betslip.ResponsiveClickHandler(t,$.proxy(n.showPopUpMenu,n),!1);n._enabled=!0;t=null};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedBetSlipOddsSelector=function(n){this._betSlipController=n;this._clickHandlers=[];this._siteClickHandlers=[];this._selectClickHandlers=[];this._betSlipWrapper=$("#bsDiv");this._currentMenu=null;this._currentSelector=null;this._currentSelect=null;this._isShowing=!1;this._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.showPopUpMenu=function(n){var t=this,i,r,u;(n.stopPropagation(),i=$(n.target),i.hasClass("bs-OddsChoice_SelectionText")&&(i=i.parent()),$(i).hasClass("disabled"))||(r=i.parent().find(".bs-OddsChoice_Options"),u=i.parent().find("select.odds"),t._enabled&&!u.hasClass("disabled"))&&(t._betSlipController.hidePopups(t),r.length>0&&!r.hasClass("showing")?(t._isShowing&&t._currentMenu!=null&&t._currentMenu.removeClass("showing"),t._currentMenu=r,t._currentMenu.addClass("showing"),t.addHandlers(t),t._currentSelector=i,t._currentSelect=u,t._isShowing=!0,t._betSlipController.webPopupManager.popupShow(r[0],function(){t.hidePopUpMenu()})):t.hidePopUpMenu())};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.hidePopUpMenu=function(){var n=this;n._isShowing&&n._currentMenu!=null&&(n._currentMenu.removeClass("showing"),n.removeHandlers(n),n._currentMenu=null,n._currentSelector=null,n._currentSelect=null,n._isShowing=!1,n._betSlipController.webPopupManager.popupHide())};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.addSelectHandlers=function(n,t){var i,r;if(t.length==0&&(t=$(".bs-OddsChoice_Selection",n._betSlipWrapper)),t!=0)for(n._selectClickHandlers=[],i=0,r=t.length;i<r;i++)n._selectClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(t[i],$.proxy(n.showPopUpMenu,n),!1))};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.removeSelectHandlers=function(n){var t,i;if(n._selectClickHandlers.length>0){for(t=0,i=n._selectClickHandlers.length;t<i;t++)n._selectClickHandlers[t]._element&&n._selectClickHandlers[t].destroy();n._selectClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.addHandlers=function(n){var i=document.getElementById("BetSlipDialogueHeader"),r=n._currentMenu.find("li"),t,u;if(n.removeHandlers(n),r.length>0)for(t=0,u=r.length;t<u;t++)n._clickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(r[t],$.proxy(n.handleSelection,n),!1));i&&n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i,$.proxy(n.hidePopUpMenu,n),!1));n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(n._betSlipWrapper[0],$.proxy(n.hidePopUpMenu,n),!1));i=null};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.removeHandlers=function(n){var t,i;if(n._clickHandlers.length>0){for(t=0,i=n._clickHandlers.length;t<i;t++)n._clickHandlers[t]._element&&n._clickHandlers[t].destroy();n._clickHandlers=[]}if(n._siteClickHandlers.length>0){for(t=0,i=n._siteClickHandlers.length;t<i;t++)n._siteClickHandlers[t]._element&&n._siteClickHandlers[t].destroy();n._siteClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.handleSelection=function(n){var t=this,e=n.target.getAttribute("data-item"),r=n.target.innerHTML,u=t._currentMenu.find("li"),o=t._currentSelector.find(".bs-OddsChoice_SelectionText")[0],i,f;if(n.stopPropagation(),r!==""&&r.indexOf("<span")==-1){for(o.innerHTML=r,i=0,f=u.length;i<f;i++)u[i].className=u[i].className.replace("selected","");t._currentSelect.val(e).change();n.target.parentElement.className+=" selected"}t.hidePopUpMenu(t);new b365.Ui.Betslip.OddsLineChangedHandler(this._betSlipController._bsInst,this._betSlipController).handle(!1)};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.disablePopUps=function(){var n=this;n.hidePopUpMenu();n.removeSelectHandlers(n);n._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.enablePopUps=function(){var n=this,t=$(".bs-OddsChoice_Selection",n._betSlipWrapper);if(n.removeHandlers(n),n.removeSelectHandlers(n),t.length==0){n._enabled=!1;n._isShowing=!1;return}n.addSelectHandlers(n,t);n._enabled=!0};b365.Ui.Betslip.EnhancedBetSlipOddsSelector.prototype.updateOdds=function(n,t){var h=document.getElementsByClassName("bs-Item"),u,f,s,o,e,i,r;for(t=t||n.OD,o=0;o<h.length;o++)if(e=h[o],e.getAttribute("data-item-fpid")===n.ID){for(u=e.getElementsByClassName("odds")[0],f=e.getElementsByClassName("bs-Dropdown_ItemText"),s=e.getElementsByClassName("odds-selection")[0],s.getAttribute("data-text")!=="SP"&&s.setAttribute("data-text",t),i=0;i<u.children.length;i++)if(u.children[i].value!=="SP"){u.children[i].value=t;u.children[i].innerHTML=t;break}for(r=0;r<f.length;r++)if(f[r].getAttribute("data-item")!=="SP"){f[r].innerHTML=t;f[r].setAttribute("data-item",t);break}break}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedBetSlipPitcherSelector=function(n){this._betSlipController=n;this._clickHandlers=[];this._siteClickHandlers=[];this._selectClickHandlers=[];this._betSlipWrapper=$("#bsDiv");this._currentMenu=null;this._currentSelector=null;this._currentSelect=null;this._isShowing=!1;this._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.showPopUpMenu=function(n){var t=this,i,r,u;(i=$(n.target),i.hasClass("bs-Pitcher_SelectionText")&&(i=i.parent()),r=i.parent().find(".bs-Pitcher_Options"),u=i.parent().find("select.pitcher-sel"),n.stopPropagation(),t._enabled&&!u.hasClass("disabled"))&&(t._betSlipController.hidePopups(t),r.length>0&&!r.hasClass("showing")?(t._isShowing&&t._currentMenu!=null&&t._currentMenu.removeClass("showing"),t._currentMenu=r,t._currentMenu.addClass("showing"),t.addHandlers(t),t._currentSelector=i,t._currentSelector.addClass("showing"),t._currentSelect=u,t._isShowing=!0,t._betSlipController.webPopupManager.popupShow(r[0],function(){t.hidePopUpMenu()})):t.hidePopUpMenu())};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.hidePopUpMenu=function(){var n=this;n._isShowing&&n._currentMenu!=null&&(n._currentMenu.removeClass("showing"),n._currentSelector.removeClass("showing"),n.removeHandlers(n),n._currentMenu=null,n._currentSelector=null,n._currentSelect=null,n._isShowing=!1,n._betSlipController.webPopupManager.popupHide())};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.addSelectHandlers=function(n,t){var i,r;if(t.length==0&&(t=$(".bs-Pitcher_Selection",n._betSlipWrapper)),t!=0)for(n._selectClickHandlers=[],i=0,r=t.length;i<r;i++)n._selectClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(t[i],$.proxy(n.showPopUpMenu,n),!1))};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.removeSelectHandlers=function(n){var t,i;if(n._selectClickHandlers.length>0){for(t=0,i=n._selectClickHandlers.length;t<i;t++)n._selectClickHandlers[t]._element&&n._selectClickHandlers[t].destroy();n._selectClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.addHandlers=function(n){var i=document.getElementById("BetSlipDialogueHeader"),r=n._currentMenu.find("li"),t,u;if(n.removeHandlers(n),r.length>0)for(t=0,u=r.length;t<u;t++)n._clickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(r[t],$.proxy(n.handleSelection,n),!1));i&&n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i,$.proxy(n.hidePopUpMenu,n),!1));n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(n._betSlipWrapper[0],$.proxy(n.hidePopUpMenu,n),!1));i=null};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.removeHandlers=function(n){var t,i;if(n._clickHandlers.length>0){for(t=0,i=n._clickHandlers.length;t<i;t++)n._clickHandlers[t]._element&&n._clickHandlers[t].destroy();n._clickHandlers=[]}if(n._siteClickHandlers.length>0){for(t=0,i=n._siteClickHandlers.length;t<i;t++)n._siteClickHandlers[t]._element&&n._siteClickHandlers[t].destroy();n._siteClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.handleSelection=function(n){var t=this,i=n.target.getAttribute("data-item");n.stopPropagation();n.target.parentElement.className.indexOf("selected")===-1&&t._currentSelect.val(i).change();t._betSlipController.refreshBetslip();t.hidePopUpMenu(t)};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.disablePopUps=function(){var n=this;n.hidePopUpMenu();n.removeSelectHandlers(n);n._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipPitcherSelector.prototype.enablePopUps=function(){var n=this,t=$(".bs-Pitcher_Selection",n._betSlipWrapper);if(n.removeHandlers(n),n.removeSelectHandlers(n),t.length==0){n._enabled=!1;n._isShowing=!1;return}n.addSelectHandlers(n,t);n._enabled=!0};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedBetSlipIfBetSelector=function(n){this._betSlipController=n;this._clickHandlers=[];this._siteClickHandlers=[];this._selectClickHandlers=[];this._betSlipWrapper=$("#bsDiv");this._currentMenu=null;this._currentSelector=null;this._currentSelect=null;this._isShowing=!1;this._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.showPopUpMenu=function(n){var t=this,i=$(n.target),r,u;(n.stopPropagation(),i.hasClass("bs-IfBetType_SelectionText")&&(i=i.parent()),r=i.parent().find(".bs-IfBetType_Options"),u=i.parent().find("select.ifbetaction"),t._enabled&&!u.hasClass("disabled"))&&(t._betSlipController.hidePopups(t),r.length>0&&!r.hasClass("showing")?(t._isShowing&&t._currentMenu!=null&&t._currentMenu.removeClass("showing"),t._currentMenu=r,t._currentMenu.addClass("showing"),t.addHandlers(t),t._currentSelector=i,t._currentSelector.addClass("showing"),t._currentSelect=u,t._isShowing=!0,t._betSlipController.webPopupManager.popupShow(r[0],function(){t.hidePopUpMenu()})):t.hidePopUpMenu())};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.hidePopUpMenu=function(){var n=this;n._isShowing&&n._currentMenu!=null&&(n._currentMenu.removeClass("showing"),n._currentSelector.removeClass("showing"),n.removeHandlers(n),n._currentMenu=null,n._currentSelector=null,n._currentSelect=null,n._isShowing=!1,n._betSlipController.webPopupManager.popupHide())};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.addSelectHandlers=function(n,t){var i,r;if(t.length==0&&(t=$(".bs-IfBetType_Selection",n._betSlipWrapper)),t!=0)for(n._selectClickHandlers=[],i=0,r=t.length;i<r;i++)n._selectClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(t[i],$.proxy(n.showPopUpMenu,n),!1))};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.removeSelectHandlers=function(n){var t,i;if(n._selectClickHandlers.length>0){for(t=0,i=n._selectClickHandlers.length;t<i;t++)n._selectClickHandlers[t]._element&&n._selectClickHandlers[t].destroy();n._selectClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.addHandlers=function(n){var i=document.getElementById("BetSlipDialogueHeader"),r=n._currentMenu.find("li"),t,u;if(n.removeHandlers(n),r.length>0)for(t=0,u=r.length;t<u;t++)n._clickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(r[t],$.proxy(n.handleSelection,n),!1));i&&n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i,$.proxy(n.hidePopUpMenu,n),!1));n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(n._betSlipWrapper[0],$.proxy(n.hidePopUpMenu,n),!1));i=null};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.removeHandlers=function(n){var t,i;if(n._clickHandlers.length>0){for(t=0,i=n._clickHandlers.length;t<i;t++)n._clickHandlers[t]._element&&n._clickHandlers[t].destroy();n._clickHandlers=[]}if(n._siteClickHandlers.length>0){for(t=0,i=n._siteClickHandlers.length;t<i;t++)n._siteClickHandlers[t]._element&&n._siteClickHandlers[t].destroy();n._siteClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.handleSelection=function(n){var h=this,c=n.target.getAttribute("data-item"),l=n.target.innerHTML,v=new b365.Ui.Betslip.ItemInformation(n.target),a=v.itemIndexAndType(),u,i,f,e,s,o,t,r;if(n.stopPropagation(),n.target.parentElement.className.indexOf("selected")===-1)if(u=document.getElementsByClassName("bs-IfBetType"),a[0]!=="0"){for(e=parseInt(a[0]),u[e].getElementsByClassName("bs-IfBetType_SelectionText")[0].innerHTML=l,i=u[e].getElementsByTagName("li"),t=0;t<i.length;t++)o=i[t].className,o.indexOf("selected")===-1?i[t].className+=" selected":i[t].className=i[t].className.replace(" selected","");f=u[e].getElementsByTagName("select")[0];f.value=c;$(f).change()}else for(t=0;t<u.length;t++){for(u[t].getElementsByClassName("bs-IfBetType_SelectionText")[0].innerHTML=l,i=u[t].getElementsByTagName("li"),r=0;r<i.length;r++)o=i[r].className,o.indexOf("selected")===-1?(t==0&&(s=r),r==s&&(i[r].className+=" selected")):r!=s&&(i[r].className=i[r].className.replace(" selected",""));f=u[t].getElementsByTagName("select")[0];f.value=c;$(f).change()}h.hidePopUpMenu(h)};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.disablePopUps=function(){var n=this;n.hidePopUpMenu();n.removeSelectHandlers(n);n._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipIfBetSelector.prototype.enablePopUps=function(){var n=this,t=$(".bs-IfBetType_Selection",n._betSlipWrapper);if(n.removeHandlers(n),n.removeSelectHandlers(n),t.length==0){n._enabled=!1;n._isShowing=!1;return}n.addSelectHandlers(n,t);n._enabled=!0};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector=function(n){this._betSlipController=n;this._clickHandlers=[];this._siteClickHandlers=[];this._selectClickHandlers=[];this._betSlipWrapper=$("#bsDiv");this._currentMenu=null;this._currentSelector=null;this._currentSelect=null;this._isShowing=!1;this._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.showPopUpMenu=function(n){var t=this,i,r,u;(menuLeftPadding=10,i=$(n.target),i.hasClass("bs-TeaserType_SelectionText")&&(i=i.parent()),r=i.parent().find(".bs-TeaserType_Options"),u=i.parent().find("select.teaserSel"),n.stopPropagation(),t._enabled&&!u.hasClass("disabled"))&&(t._betSlipController.hidePopups(t),r.length>0&&!r.hasClass("showing")?(t._isShowing&&t._currentMenu!=null&&(t._currentMenu.removeClass("showing"),t._currentSelector.removeClass("showing")),t._currentMenu=r,t._currentMenu.addClass("showing"),i.position().left<20?(t._currentMenu.addClass("iswrapped"),t._currentMenu.css({left:"",minWidth:""})):document.body.className.indexOf("expanded")>-1?t._currentMenu.css({minWidth:"",left:i.position().left-menuLeftPadding+"px"}):t._currentMenu.css({left:"",minWidth:document.getElementById("betslipContainer").clientWidth-i.position().left+menuLeftPadding+"px"}),t.addHandlers(t),t._currentSelector=i,t._currentSelector.addClass("showing"),t._currentSelect=u,t._isShowing=!0,t._betSlipController.webPopupManager.popupShow(r[0],function(){t.hidePopUpMenu()})):t.hidePopUpMenu())};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.hidePopUpMenu=function(){var n=this;n._isShowing&&n._currentMenu!=null&&(n._currentMenu.removeClass("showing"),n._currentMenu.removeClass("iswrapped"),n._currentSelector.removeClass("showing"),n.removeHandlers(n),n._currentMenu=null,n._currentSelector=null,n._currentSelect=null,n._isShowing=!1,n._betSlipController.webPopupManager.popupHide())};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.addSelectHandlers=function(n,t){var i,r;if(t.length==0&&(t=$(".bs-TeaserType_Selection",n._betSlipWrapper)),t!=0)for(n._selectClickHandlers=[],i=0,r=t.length;i<r;i++)n._selectClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(t[i],$.proxy(n.showPopUpMenu,n),!1))};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.removeSelectHandlers=function(n){var t,i;if(n._selectClickHandlers.length>0){for(t=0,i=n._selectClickHandlers.length;t<i;t++)n._selectClickHandlers[t]._element&&n._selectClickHandlers[t].destroy();n._selectClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.addHandlers=function(n){var i=document.getElementById("BetSlipDialogueHeader"),r=n._currentMenu.find("li"),t,u;if(n.removeHandlers(n),r.length>0)for(t=0,u=r.length;t<u;t++)n._clickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(r[t],$.proxy(n.handleSelection,n),!1));i&&n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i,$.proxy(n.hidePopUpMenu,n),!1));n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(n._betSlipWrapper[0],$.proxy(n.hidePopUpMenu,n),!1));i=null};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.removeHandlers=function(n){var t,i;if(n._clickHandlers.length>0){for(t=0,i=n._clickHandlers.length;t<i;t++)n._clickHandlers[t]._element&&n._clickHandlers[t].destroy();n._clickHandlers=[]}if(n._siteClickHandlers.length>0){for(t=0,i=n._siteClickHandlers.length;t<i;t++)n._siteClickHandlers[t]._element&&n._siteClickHandlers[t].destroy();n._siteClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.handleSelection=function(n){var t=this,i=n.target.getAttribute("data-item");n.stopPropagation();n.target.parentElement.className.indexOf("selected")===-1&&t._currentSelect.val(i).change();t.hidePopUpMenu(t)};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.disablePopUps=function(){var n=this;n.hidePopUpMenu();n.removeSelectHandlers(n);n._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector.prototype.enablePopUps=function(){var n=this,t=$(".bs-TeaserType_Selection",n._betSlipWrapper);if(n.removeHandlers(n),n.removeSelectHandlers(n),t.length==0){n._enabled=!1;n._isShowing=!1;return}n.addSelectHandlers(n,t);n._enabled=!0};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector=function(n){this._betSlipController=n;this._bsApp=window.bsApp;this._clickHandlers=[];this._siteClickHandlers=[];this._selectClickHandlers=[];this._betSlipWrapper=$("#bsDiv");this._currentMenu=null;this._currentSelector=null;this._isShowing=!1;this._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.showPopUpMenu=function(n){var t=this,r,i,u,f,o,s,e;if(r=$(n.target),i=r.parent().parent().find(".bs-EachWayExtraBetType_Wrapper"),t._enabled&&!i.parent().hasClass("disabled"))if(n.stopPropagation(),t._betSlipController.hidePopups(t),i.length>0&&!i.hasClass("showing")){if(t._isShowing&&t._currentMenu!=null&&t._currentMenu.removeClass("showing"),t._currentMenu=i,t._currentMenu.addClass("showing"),t.addHandlers(t),r[0].className.indexOf("bs-EachWayExtraBetType_SelectionWrapper")>-1&&(r=r[0].getElementsByClassName("bs-EachWayExtraBetType_Selection")),t._currentSelector=r,u=i[0].getElementsByClassName("bs-EachWayExtraBetType_Menu")[0],u)for(s=u.children.length,e=0;e<s;e++)(f=u.children[e],f.className.indexOf("selected")>-1)||(o=t._betSlipController._bsInst.getBetItemByCn(t._betSlipController._bsInst.betTybetTypeNormal,"fp",f.getAttribute("data-participantid")),o&&$(f).addClass("disabled"));t._isShowing=!0;t._betSlipController.webPopupManager.popupShow(i[0],function(){t.hidePopUpMenu()})}else t.hidePopUpMenu()};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.hidePopUpMenu=function(){var n=this;n._isShowing&&n._currentMenu!=null&&(n._currentMenu.removeClass("showing"),n.removeHandlers(n),n._currentMenu=null,n._currentSelector=null,n._isShowing=!1,n._betSlipController._bsInst.changeBetslipHeight(),n._betSlipController.webPopupManager.popupHide())};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.addSelectHandlers=function(n,t){var i,r;for(n._selectClickHandlers=[],i=0,r=t.length;i<r;i++)n._selectClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(t[i],$.proxy(n.showPopUpMenu,n),!1))};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.removeSelectHandlers=function(n){var t,i;if(n._selectClickHandlers.length>0){for(t=0,i=n._selectClickHandlers.length;t<i;t++)n._selectClickHandlers[t]._element&&n._selectClickHandlers[t].destroy();n._selectClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.addHandlers=function(n){var i=document.getElementById("BetSlipDialogueHeader"),r=n._currentMenu.find(".bs-EachWayExtraBetType_MenuItemWrapper"),t,u;if(n.removeHandlers(n),r.length>0)for(t=0,u=r.length;t<u;t++)n._clickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(r[t],$.proxy(n.handleSelection,n),!1));i&&n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i,$.proxy(n.hidePopUpMenu,n),!1));n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(n._betSlipWrapper[0],$.proxy(n.hidePopUpMenu,n),!1));i=null};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.removeHandlers=function(n){var t,i;if(n._clickHandlers.length>0){for(t=0,i=n._clickHandlers.length;t<i;t++)n._clickHandlers[t]._element&&n._clickHandlers[t].destroy();n._clickHandlers=[]}if(n._siteClickHandlers.length>0){for(t=0,i=n._siteClickHandlers.length;t<i;t++)n._siteClickHandlers[t]._element&&n._siteClickHandlers[t].destroy();n._siteClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.handleSelection=function(n){var i=n.target,s,c;if(i.className.indexOf("bs-EachWayExtraBetType_MenuItemWrapper")==-1&&(i=n.target.parentElement),!$(i).hasClass("selected")&&!$(i).hasClass("suspend")&&!$(i).hasClass("disabled")){var r=this,l=new b365.Ui.Betslip.ItemInformation(i),h=l.itemIndexAndType(),u=i.getAttribute("data-participantid"),t=r._betSlipController.eachWayExtraInfo[h[0]],a=i.getElementsByClassName("bs-EachWayExtraBetType_MenuItemName")[0].innerHTML,f,e,o;n.stopPropagation();t.menuButtonEle.innerHTML=a;$(t.selectedMenuItemEle).removeClass("selected");t.selectedMenuItemEle=i;$(i).addClass("selected");i.className.indexOf("js-EachWayExtraMainMarket")>-1?$(t.eachWayExtraCheckboxEle).removeClass("disabled"):$(t.eachWayExtraCheckboxEle).addClass("disabled");o=i.getAttribute("data-odds");o=r._betSlipController.getFormatedOdds(o);t.oddsChoiceEle&&(t.selectedMenuItemEle.className.indexOf("js-EachWayExtraShowOddsDropDown")>-1?(t.oddsChoiceDropdownEles.length>1&&($(t.oddsChoiceDropdownEles[0]).addClass("selected"),$(t.oddsChoiceDropdownEles[1]).removeClass("selected"),f=t.oddsChoiceDropdownEles[0].getElementsByClassName("bs-Dropdown_ItemText")[0],f&&(f.innerHTML=o,f.setAttribute("data-item",f.innerHTML))),$(t.oddsChoiceEle).removeClass("disabled")):$(t.oddsChoiceEle).addClass("disabled"));t.oddsEle.innerHTML=o;t.marketDescEle&&(t.marketDescEle.innerHTML=i.getAttribute("data-plbtdescription"));t.oddsHighlightEle.innerHTML=t.oddsEle.innerHTML;$(t.oddsHighlightEle).addClass("oddsChangeHighlightAnim");setTimeout(function(){$(t.oddsHighlightEle).removeClass("oddsChangeHighlightAnim")},1500);betItem=r._betSlipController._bsInst.getBetItemById(h[1],h[0]);e=betItem.getCnItem("fp");t.betItemEle.setAttribute("data-item-fpid",u);r._betSlipController.itemsRemoved(e);bsApp.itemsRemoved(betItem.getCnItem("fp"));betItem.getStItem("TP")&&betItem.setStItem("TP",betItem.getStItem("TP").replace(e,u));betItem.getStItem("id")&&betItem.setStItem("id",betItem.getStItem("id").replace(e,u));betItem.getCnItem("id")&&betItem.setCnItem("id",betItem.getCnItem("id").replace(e,u));betItem.setCnItem("fp",u);betItem.setCnItem("o",i.getAttribute("data-odds"));betItem.setStItem("sp","0");s=!1;for(c in r._betSlipController.eachWayExtraInfo)if(!s&&r._betSlipController.eachWayExtraInfo[c].selectedMenuItemEle&&r._betSlipController.eachWayExtraInfo[c].selectedMenuItemEle.getAttribute("data-isewex")=="1"){s=!0;break}this.showHideMultiples(s);bsApp.addOnRefreshReqComplete();r._betSlipController._bsInst.updateState();r._betSlipController._freeBetClickHandler.update($(t.betItemEle).context);n.stopPropagation();r.hidePopUpMenu();r._bsApp.bsContext&&r._bsApp.bsContext.resizeBetslip&&r._bsApp.bsContext.resizeBetslip()}};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.disablePopUps=function(){var n=this;n.hidePopUpMenu();n.removeSelectHandlers(n);n._enabled=!1};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.enablePopUps=function(){var n=this,t=$(".bs-EachWayExtraBetType_SelectionWrapper",n._betSlipWrapper);if(n.removeHandlers(n),n.removeSelectHandlers(n),t.length==0){n._enabled=!1;n._isShowing=!1;return}n.addSelectHandlers(n,t);n._enabled=!0;n.createEachWayExtraInfo()};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.createEachWayExtraInfo=function(){for(var u=this,s=this._betSlipWrapper[0].getElementsByClassName("bs-EachWayExtraBetType_Menu"),l=s.length,t,i,f,h,e,o=!1,c={},n,r=0;r<l;r++)t=s[r],i=new b365.Ui.Betslip.ItemInformation(t),betItemEle=i.itemElement()[0],e=betItemEle.getElementsByClassName("bs-OddsChoice_Selection")[0],n={betItemEle:i.itemElement()[0],oddsEle:e?betItemEle.getElementsByClassName("bs-OddsChoice_SelectionText")[0]:betItemEle.getElementsByClassName("bs-Odds")[0],oddsChoiceEle:e,oddsChoiceDropdownEles:betItemEle.getElementsByClassName("bs-Dropdown_Item"),marketDescEle:betItemEle.getElementsByClassName("bs-Selection_Details")[0],oddsHighlightEle:betItemEle.getElementsByClassName("oddsChangeHighlight")[0],menuButtonEle:betItemEle.getElementsByClassName("bs-EachWayExtraBetType_Selection")[0],eachWayExtraEle:betItemEle.getElementsByClassName("bs-EachWayExtraBetType")[0],dropdownEle:betItemEle.getElementsByClassName("bs-EachWayExtraBetType_Dropdown")[0],eachWayExtraWrapperEle:betItemEle.getElementsByClassName("bs-EachWayExtraBetType_Wrapper")[0],eachWayExtraCheckboxEle:betItemEle.getElementsByClassName("bs-EachWayCheckbox")[0],selectedMenuItemEle:t.getElementsByClassName("selected")[0],menuItems:t.getElementsByClassName("bs-EachWayExtraBetType_MenuItemWrapper")},!o&&n.selectedMenuItemEle&&n.selectedMenuItemEle.getAttribute("data-isewex")=="1"&&(o=!0),$(n.selectedMenuItemEle).hasClass("js-EachWayExtraMainMarket")||(f=i.itemIndexAndType(),h=u._betSlipController._bsInst.getBetItemById(f[1],f[0]),h.setStItem("ew","1"),u._betSlipController._bsInst.updateState()),n.oddsChoiceEle&&!$(n.selectedMenuItemEle).hasClass("js-EachWayExtraShowOddsDropDown")&&$(n.oddsChoiceEle).addClass("disabled"),c[betItemEle.getAttribute("data-item-id")]=n;this.showHideMultiples(o);u._betSlipController.eachWayExtraInfo=c};b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector.prototype.showHideMultiples=function(n){var i,t,u,r;if(n){for($(".bs-MultipleBets").hide(),i=this._betSlipController._bsInst.getBetItems(this._betSlipController._bsInst.betTypeMultiple),t=0;t<i.length;t++)i[t].setStItem("st",""),i[t].setStItem("ust","");for(u=$("input[data-inp-type='mltstk']"),r=0;r<u.length;r++)u[r].value=""}else $(".bs-MultipleBets").show()};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay=function(n,t){this._betSlipInstance=n;this._betSlipController=t;this._bsApp=window.bsApp;this._clickHandlers=[];this._siteClickHandlers=[];this._selectClickHandlers=[];this._betSlipWrapper=$("#bsDiv");this._currentMenu=null;this._currentSelector=null;this._currentSelect=null;this._isShowing=!1;this._enabled=!0;this._enabled=!0;this._FIXED_EACH_WAY_PLBT_ID="99991";this._TOTE_EACH_WAY_PLBT_ID="99992";b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype.showPopUpMenu=function(n){var t=this,i,r,u;(i=n.target,i.className.indexOf("bs-WinPlaceEachWay_SelectionText")>-1&&(i=i.parentNode),t.itemInfo=new b365.Ui.Betslip.ItemInformation(n.target),r=i.parentNode.querySelectorAll(".bs-WinPlaceEachWay_Dropdown")[0],u=i.parentNode.querySelectorAll("select")[0],n.stopPropagation(),t._enabled)&&(t._betSlipController.hidePopups(t),r&&!r.className.indexOf(" showing")>-1?(t._isShowing&&t._currentMenu!=null&&(t._currentMenu.className=t._currentMenu.className.replace(" showing","")),t._currentMenu=r,t._hideDropDownItemsAlreadyOnSlip(t),t._hideSuspendedItems(t,r),t._currentMenu.className=t._currentMenu.className+" showing",t.addHandlers(t),t._currentSelector=i,t._currentSelector.className=t._currentSelector.className+" showing",t._currentSelect=u,t._isShowing=!0,t._betSlipController.webPopupManager.popupShow(r,function(){t.hidePopUpMenu()})):t.hidePopUpMenu())};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype.hidePopUpMenu=function(){var n=this;n._isShowing&&n._currentMenu!=null&&(n._currentMenu.className=n._currentMenu.className.replace(" showing",""),n._currentSelector.className=n._currentSelector.className.replace(" showing",""),n.removeHandlers(n),n._currentMenu=null,n._currentSelector=null,n._currentSelect=null,n._isShowing=!1,n._betSlipController.webPopupManager.popupHide())};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype.addHandlers=function(n){var r=document.getElementById("BetSlipDialogueHeader"),i=n._currentMenu.querySelectorAll("li"),t,u;if(n.removeHandlers(n),i.length>0)for(t=0,u=i.length;t<u;t++)n._clickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i[t],$.proxy(n.handleSelection,n),!1));r&&n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(r,$.proxy(n.hidePopUpMenu,n),!1));n._siteClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(n._betSlipWrapper[0],$.proxy(n.hidePopUpMenu,n),!1))};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype.removeHandlers=function(n){var t,i;if(n._clickHandlers.length>0){for(t=0,i=n._clickHandlers.length;t<i;t++)n._clickHandlers[t]._element&&n._clickHandlers[t].destroy();n._clickHandlers=[]}if(n._siteClickHandlers.length>0){for(t=0,i=n._siteClickHandlers.length;t<i;t++)n._siteClickHandlers[t]._element&&n._siteClickHandlers[t].destroy();n._siteClickHandlers=[]}};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype.handleSelection=function(n){var t=this,i=n.target,f,u,r,l,b="",a,s,h,k="",c,v="",y,d,e,p="",w="",o;(n.target.className.indexOf("bs-WinPlaceEachWay_DropdownItem")>-1&&(i=n.target.parentElement),e=i.parentNode.parentNode.parentNode.parentNode,i.className.indexOf(" disabled")>-1)||(f=i.children[0],u=t._currentMenu.querySelectorAll("li.selected")[0],u.className=u.className.replace(" selected",""),i.className=i.className+" selected",r=f.getAttribute("data-item"),r===t._FIXED_EACH_WAY_PLBT_ID||r===t._TOTE_EACH_WAY_PLBT_ID?(s=i.previousSibling.previousSibling.children[0],h=i.previousSibling.children[0],l=s.getAttribute("data-participantid"),a=s.getAttribute("data-odds"),c=s.getAttribute("data-displayodds"),b=h.getAttribute("data-participantid"),k=h.getAttribute("data-odds"),v=h.getAttribute("data-displayodds"),r===t._FIXED_EACH_WAY_PLBT_ID&&v.length>0&&(c+=", "+v)):(l=f.getAttribute("data-participantid"),a=f.getAttribute("data-odds"),c=f.getAttribute("data-displayodds")),e.getElementsByClassName("bs-Odds")[0].innerText=c,e.getElementsByClassName("bs-WinPlaceEachWay_SelectionText")[0].innerText=i.innerText,t._updateToteMessage(t,f,e),y=r===t._FIXED_EACH_WAY_PLBT_ID||r===t._TOTE_EACH_WAY_PLBT_ID,d=t._isToteWin(r)||t._isTotePlace(r),t._updateCookie(n,y,d||r===t._TOTE_EACH_WAY_PLBT_ID,u.children[0].getAttribute("data-participantid"),l,b,a,k),bsApp.itemsRemoved(u.children[0].getAttribute("data-participantid")),u.children[0].getAttribute("data-placeparticipantid")&&bsApp.itemsRemoved(u.children[0].getAttribute("data-placeparticipantid")),bsApp.addOnRefreshReqComplete(),t._betSlipController.updateMultiplesEachWayFlag(),t._betSlipInstance.updateState(),t._betSlipController.getMultipleInfo(),t._betSlipController._freeBetClickHandler.update(e),o=$('input[data-inp-type="sngstk"]',e),o&&o.length>0&&(p=y?betSlipML.unitstake:betSlipML.stake,o.attr("placeholder",p),w=o.val(),(w==betSlipML.unitstake||w==betSlipML.stake)&&o.val(p)),n.stopPropagation(),t.hidePopUpMenu(t),t._bsApp.bsContext&&t._bsApp.bsContext.resizeBetslip&&t._bsApp.bsContext.resizeBetslip())};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype._updateToteMessage=function(n,t,i){var u="ausRacingToteTooltip",f="",e=t.getAttribute("data-item"),s=t.getAttribute("data-toteid"),r=i.getElementsByClassName("bs-WinPlaceEachWay_Tote")[0],o;if(n._isFixed(e)||e===n._FIXED_EACH_WAY_PLBT_ID){r.className.indexOf(" bs-WinPlaceEachWay_Tote-hidden")===-1&&(r.className=r.className+" bs-WinPlaceEachWay_Tote-hidden");return}switch(s){case"1":f=betSlipML.ausRacingBest;break;case"2":case"4":f=betSlipML.ausRacingTote;break;case"8":f=betSlipML.ausRacingMidPlus;break;case"16":f=betSlipML.ausRacingInternational}e===n._TOTE_EACH_WAY_PLBT_ID?u+="ToteEachWay":n._isToteWin(e)?u+="ToteWin":n._isTotePlace(e)&&(u+="TotePlace");u+=s;o=r.querySelectorAll(".bs-Tote_Popup");o.length>0&&(o[0].innerHTML=betSlipML[u]);r.querySelectorAll(".bs-WinPlaceEachWay_ToteText")[0].innerHTML=f;r.className=r.className.replace(" bs-WinPlaceEachWay_Tote-hidden","")};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype._updateCookie=function(n,t,i,r,u,f,e,o){var a=this,v=new b365.Ui.Betslip.ItemInformation(n.target),c=v.itemIndexAndType(),s=a._betSlipInstance.getBetItemById(c[1],c[0]),l,h;t?(s.setStItem("ew","1"),s.setCnItem("pp",f),s.setCnItem("po",o)):(s.getStItem("ew")&&s.removeStItem("ew"),s.getCnItem("pp")&&(s.removeCnItem("pp"),s.removeCnItem("po")));s.getStItem("TP")&&s.setStItem("TP",s.getStItem("TP").replace(r,u));s.getStItem("id")&&s.setStItem("id",s.getStItem("id").replace(r,u));s.getCnItem("id")&&s.setCnItem("id",s.getCnItem("id").replace(r,u));l=$("#bsDiv");h=$('li[data-item-fpid="'+s.getCnItem("fp")+'"]',l);h&&h.length>0&&h[0].setAttribute("data-item-fpid",u);s.setCnItem("fp",u);s.setCnItem("o",e);s.setCnItem("pt",i?"A":"N")};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype._hideDropDownItemsAlreadyOnSlip=function(n){var l=document.getElementsByClassName("bs-StandardBet")[0].querySelectorAll(".bs-WinPlaceEachWay_DropdownItem.selected"),f=n._currentMenu.querySelectorAll(".bs-WinPlaceEachWay_DropdownItem.disabled"),t,e,s,a,r,u,i,c;if(f.length>0)for(t=0,e=f.length;t<e;t++)f[t].className=f[t].className.replace(" disabled","");if(l.length>1)for(s=n._currentMenu.querySelectorAll(".bs-WinPlaceEachWay_DropdownItem.selected")[0],a=s.children[0].getAttribute("data-item"),u=n._betSlipInstance.getBetItems(n._betSlipInstance.betTypeNormal),r=n._currentMenu.querySelectorAll(".bs-WinPlaceEachWay_DropdownItem"),t=0,e=r.length;t<e;t++)if(r[t].className.indexOf(" disabled")===-1){var o=r[t].getElementsByClassName("bs-WinPlaceEachWay_DropdownItemText")[0],h=o?o.getAttribute("data-participantid"):0,v=o?o.getAttribute("data-placeparticipantid"):0;for(i=0,c=u.length;i<c;i++)i.toString()!==n.itemInfo.itemIndex()&&(h===u[i].getCnItem("fp")||h===u[i].getCnItem("pp")||v===u[i].getCnItem("fp"))&&(r[t].className=r[t].className+" disabled")}};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype._hideSuspendedItems=function(n,t){var r=t.children[0].children,i,e=r.length,f,u,o=!1,s=!1;for(i=0,e;i<e;i++)f=r[i].children[0],u=f.getAttribute("data-item"),(u!==n._FIXED_EACH_WAY_PLBT_ID||u!==n._TOTE_EACH_WAY_PLBT_ID)&&f.getAttribute("data-suspended")==="1"&&(r[i].className=r[i].className+" disabled",n._isFixed(u)?o=!0:(n._isToteWin(u)||n._isTotePlace(u))&&(s=!0));if(o||s)for(i=0,e;i<e;i++)f=r[i].children[0],u=f.getAttribute("data-item"),u===n._FIXED_EACH_WAY_PLBT_ID&&o&&(r[i].className=r[i].className+" disabled"),u===n._TOTE_EACH_WAY_PLBT_ID&&s&&(r[i].className=r[i].className+" disabled")};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype._isFixed=function(n){return n==="20203"||n==="20210"||n==="40232"||n==="40210"||n==="880203"||n==="880207"||n==="20204"||n==="20211"||n==="40233"||n==="40211"||n==="880204"||n==="880208"?!0:!1};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype._isToteWin=function(n){return n==="20205"||n==="20212"||n==="40234"||n==="40212"||n==="880205"||n==="880209"?!0:!1};b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay.prototype._isTotePlace=function(n){return n==="20206"||n==="20213"||n==="40235"||n==="40213"||n==="880206"||n==="880210"?!0:!1}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ReceiptLoadAnimation=function(){};b365.Ui.Betslip.ReceiptLoadAnimation.prototype.CSS_CONTAINER="br-Anim_Container";b365.Ui.Betslip.ReceiptLoadAnimation.prototype.CSS_HEADER="br-Anim_Header";b365.Ui.Betslip.ReceiptLoadAnimation.prototype.CSS_FOOTER="br-Anim_Footer";b365.Ui.Betslip.ReceiptLoadAnimation.prototype.CSS_FADEIN="br-Anim_FadeIn";b365.Ui.Betslip.ReceiptLoadAnimation.prototype.CSS_FADEOUT="br-Anim_FadeOut";b365.Ui.Betslip.ReceiptLoadAnimation.prototype.CSS_ANIMATE="br-Anim-animate";b365.Ui.Betslip.ReceiptLoadAnimation.animationRunning=!1;b365.Ui.Betslip.ReceiptLoadAnimation.height=0;b365.Ui.Betslip.ReceiptLoadAnimation.controller=null;b365.Ui.Betslip.ReceiptLoadAnimation.prototype.setup=function(n,t){var f=this,u,c,l,a=document.getElementsByClassName(f.CSS_CONTAINER)[0],s,e,h,r,o,i;if(this.controller=n,n.IsGreekDomain)for(s=document.getElementsByClassName("br-StakeToReturnContainer"),i=0;i<s.length;i++){for(r=s[i],h=r.offsetHeight;(r=r.parentElement)&&r.className.indexOf("br-Item")==-1;);r&&r.offsetHeight<h&&(r.style.minHeight=h+"px")}if(this.animationRunning||!a)return!1;for(this.animationRunning=!0,u=document.getElementsByClassName(f.CSS_FOOTER),e=0,i=u.length-1;i>=0;i--)e&&(u[i].style.marginBottom=e+"px"),e+=u[i].clientHeight;if(a.style.paddingBottom=e+"px",f.height=document.getElementById("betslipContainer").clientHeight,f.height>t)for(l=-(f.height-t-35),i=0,c=u.length;i<c;i++)u[i].style.transform="translateY("+l+"px)";for(o=document.getElementsByClassName("br-FreeBetIcon"),i=0;i<o.length;i++)o[i].childNodes[3].style.transform="translateX(-"+o[i].childNodes[3].offsetWidth+"px)";return!0};b365.Ui.Betslip.ReceiptLoadAnimation.prototype.animate=function(){var n=this,t=document.getElementsByClassName(n.CSS_CONTAINER)[0];if(!this.animationRunning||!t)return!1;t.className+=" "+n.CSS_ANIMATE;requestAnimationFrame(function(){for(var t=document.getElementsByClassName("br-FreeBetIcon"),n=0;n<t.length;n++)t[n].childNodes[3].style.transform="translateX(0px)",t[n].className=t[n].className+" br-FreeBetIcon_Animate"});setTimeout(function(){n._animationComplete()},300)};b365.Ui.Betslip.ReceiptLoadAnimation.prototype._animationComplete=function(){var t=this,i,n;if(t.animationRunning&&(t.animationRunning=!1,i=document.getElementsByClassName(t.CSS_CONTAINER)[0],i)){for(i.className=i.className.replace(t.CSS_CONTAINER,"").replace(t.CSS_ANIMATE,""),i.style.paddingBottom="",n=document.getElementsByClassName(t.CSS_HEADER);n.length;)n[0].className=n[0].className.replace(t.CSS_HEADER,"");for(n=document.getElementsByClassName(t.CSS_FOOTER);n.length;)n[0].style.transform="",n[0].style.marginBottom="",n[0].className=n[0].className.replace(t.CSS_FOOTER,"");for(n=document.getElementsByClassName(t.CSS_FADEIN);n.length;)n[0].className=n[0].className.replace(t.CSS_FADEIN,"");for(n=document.getElementsByClassName(t.CSS_FADEOUT);n.length;)n[0].className=n[0].className.replace(t.CSS_FADEOUT,"");t.controller._bsContext.resizeBetslip()}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ItemToReturnDisplayHelper=function(n){this._bsWrapper=$("#bsDiv");this._betSlipController=n};b365.Ui.Betslip.ItemToReturnDisplayHelper.prototype.setReturnValue=function(n,t,i){var r=$('li[data-item-id="'+n+'"][data-item-type="'+t+'"]',this._bsWrapper).find(".bs-StakeToReturn_Value");r.length>0&&(r[0].innerHTML=this._betSlipController&&this._betSlipController._currencyDisplayHelper?this._betSlipController._currencyDisplayHelper.formatCurrency(i):i)};b365.Ui.Betslip.ItemToReturnDisplayHelper.prototype.setMultipleReturnValue=function(n,t,i){var u=$('li[data-item-id="'+n+'"][data-item-type="'+t+'"]',this._bsWrapper).find(".bs-MultipleBets_ToReturn > .bs-MultipleBets_ToReturnValue"),r;u.length>0&&(this._betSlipController&&this._betSlipController._currencyDisplayHelper?(r=this._betSlipController._currencyDisplayHelper.formatCurrency(i),r=r.length>=7?" "+r:"&nbsp;"+r,u[0].innerHTML=r):(i.length>=6&&(i="<br />"+i),u[0].innerHTML=i),$(u[0].parentElement).removeClass("hidden"))};b365.Ui.Betslip.ItemToReturnDisplayHelper.prototype.setVisibility=function(n,t,i,r,u){var o=$('li[data-item-id="'+n+'"][data-item-type="'+t+'"]',this._bsWrapper),f=o.find(".bs-StakeToReturn"),e=o.find(".bs-StakeToReturnBreakDownLink"),s=$("#bsDiv>ul").attr("data-equally-divided");f.length>0&&(i?f[0].hasAttribute("style")&&f[0].removeAttribute("style"):f[0].setAttribute("style","display:none;"));e.length>0&&(e.addClass("bs-StakeToReturnBreakDownLink_Hidden"),r&&(u=u&&f.length>0,s!="True"?u&&(e[0].text=f[0].textContent,e.removeClass("bs-StakeToReturnBreakDownLink_Hidden")):u&&f[0].hasAttribute("style")&&f[0].removeAttribute("style")))};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ModeResolver=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.ModeResolver.prototype={resolve:function(){if(this._isValid()){var n=this,t=n._bsInst._betSlipModeBetSlip;return $("#bsDiv>ul:first").hasClass("betReceipt")&&(t=n._bsInst._betSlipModeReceipt),t}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ItemDeleteExecutor=function(n,t,i,r){this._bsInst=n;this._bsController=t;this._itemIndex=i;this._itemType=r;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._itemIndex!="undefined"&&typeof this._itemType!="undefined"};this._deleteItem=function(){var t=this._bsInst.getBetItems(this._itemType),n=t[parseInt(this._itemIndex)];return t.splice(parseInt(this._itemIndex),1),this._bsInst.updateState(),this._bsInst.betSlipItemsChanged(),$("#bsDiv").trigger("b365.Ui.Betslip.deleting",n),new b365.Ui.Betslip.ItemSubscriptionManager(this._bsInst,this._bsController).unsubscribeItem(n,this._itemType),n}};b365.Ui.Betslip.ItemDeleteExecutor.prototype={execute:function(){if(this._isValid()&&(!this._bsController.isReqOnBetDeletedEnabled()||!this._bsInst.locked())){var n=this._deleteItem();(!this._bsController.isReqOnBetDeletedEnabled()||this._bsInst.req(this._bsInst.reqTypeDeleteItem))&&(n.getCnItem("id")?this._bsController.itemsRemoved(n.getCnItem("id").replace("Y","").replace("N","")):n.getCnItem("mid")&&n.getCnItem("pid")?this._bsController.itemsRemoved(n.getCnItem("pid")+":"+n.getCnItem("mid")):n.getCnItem("Inc")?this._bsController.itemsRemoved(n.getCnItem("fp")+"~inc"+n.getCnItem("Inc")):this._bsController.itemsRemoved(n.getCnItem("fp")),n.getCnItem("pp")&&this._bsController.itemsRemoved(n.getCnItem("pp")))}},executeWithoutRequest:function(){if(this._isValid()&&(!this._bsController.isReqOnBetDeletedEnabled()||!this._bsInst.locked()))return this._deleteItem()}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ItemInformation=function(n,t){this._ele=n;this._useElement=t;this._isValid=function(){return typeof this._ele!="undefined"};this._isValid()&&(this._useElement&&this._useElement===!0?(this._ele=$(this._ele),this._itemType=[this._ele.attr("data-item-id"),this._ele.attr("data-item-type")]):(this._parent=$(this._ele).parent().closest("[data-item-id]"),this._itemType=[this._parent.attr("data-item-id"),this._parent.attr("data-item-type")]))};b365.Ui.Betslip.ItemInformation.prototype={itemIndexAndType:function(){return this._isValid()?this._itemType:null},itemIndex:function(){return this._isValid()?this._itemType[0]:null},itemType:function(){return this._isValid()?this._itemType[1]:null},itemElement:function(){return $(this._ele).parent().closest("[data-item-id]")},parent:function(){return this._parent}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToggleMultiples=function(n,t){var r,e,u,f,i;if(this._bsInst=n,this._bsController=t,this._showingVal="1",this._showingCSS="open",this._hidingVal="0",this._hidingCSS="closed",this._multiplesStateCookieKey="mo",this._cookieValSeparator="||",this._multiplesHdr=$("#bsMultipleContainer"),this._isValid=function(){return typeof this._bsInst!="undefined"},this._isValid()&&(this._isCurrentlyShowing=this._bsInst.getValueFromBSCookie(this._multiplesStateCookieKey).replace(this._cookieValSeparator,"")==this._showingVal),this._setTrigger className=function(n){var i="bs-MultipleToggle-show",r="bs-MultipleToggle-hide",t=$("#bsDiv>ul:first-child"),u="bs-NoMultiples";$("#bsDiv .betReceipt").length==0&&n?t.addClass(i).removeClass(r):t.removeClass(i).addClass(r);$("#bsDiv .betReceipt").length==0&&this._multiplesHdr[0]?t.removeClass(u):t.addClass(u)},r=$('.bs-MultipleBets span[data-inp-type="ewcb"]',"#bsDiv"),i=$(".bs-MultipleBets_EwHeader"),r&&r.length>0){for(e=r.length,u=0;u<e;u++)f=r[u],this._bsController.ausMultiplesEnabled()?f.setAttribute("style","display:none;"):f.setAttribute("style","display:block;");i&&i.length>0&&(i=i[0],i.style.visibility=this._bsController.ausMultiplesEnabled()?"hidden":"visible")}};b365.Ui.Betslip.ToggleMultiples.prototype={toggle:function(){this._isValid()&&$("#bsDiv .betReceipt").length==0&&(this._isCurrentlyShowing?this._multiplesHdr.removeClass(this._showingCSS).addClass(this._hidingCSS):this._multiplesHdr.removeClass(this._hidingCSS).addClass(this._showingCSS),this._bsInst.setValueInBSCookie(this._multiplesStateCookieKey,this._isCurrentlyShowing?this._hidingVal:this._showingVal),this._setTriggerClass(!this._isCurrentlyShowing),this._bsInst.changeBetslipHeight(),this._bsController.ausMultiplesEnabled()&&!this._isCurrentlyShowing&&this._bsController.complexMultiplesNeedsRefresh&&(this._bsController.complexMultiplesNeedsRefresh=!1,this._bsController.getMultipleInfo(!0)),$(document).trigger("mbsmultopenclose"))},reset:function(){this._isCurrentlyShowing?this._multiplesHdr.removeClass(this._hidingCSS).addClass(this._showingCSS):this._multiplesHdr.removeClass(this._showingCSS).addClass(this._hidingCSS);this._setTriggerClass(this._isCurrentlyShowing)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.WebPopupManager=function(n,t){this._bsInst=n;this._bsController=t};b365.Ui.Betslip.WebPopupManager.prototype._bsInst=null;b365.Ui.Betslip.WebPopupManager.prototype._bsController=null;b365.Ui.Betslip.WebPopupManager.prototype._popupActive=!1;b365.Ui.Betslip.WebPopupManager.prototype._popup=null;b365.Ui.Betslip.WebPopupManager.prototype._popupHalo=null;b365.Ui.Betslip.WebPopupManager.prototype._popupOverlay=null;b365.Ui.Betslip.WebPopupManager.prototype._dismissDelegate=null;b365.Ui.Betslip.WebPopupManager.prototype._closeCallback=null;b365.Ui.Betslip.WebPopupManager.prototype.popupShow=function(n,t,i){var r=this,o,u,s=10,h=36,f,e,c,l;r._popupActive&&r.popupHide();r._popupActive=!0;r._popup=n;r._closeCallback=t;e=n.getBoundingClientRect();c=document.documentElement.getBoundingClientRect();i=i||{};f={height:(i.height||n.clientHeight)+(h+s),width:(i.width||n.clientWidth)+2*s,top:(i.top||n.offsetTop)-h,left:(i.left||n.offsetLeft)-s,clientTop:(i.clientTop||e.top)-h};e.left+(e.width||n.clientWidth)+5>(c.width||document.documentElement.clientWidth)&&(n.style.left=(c.width||document.documentElement.clientWidth)-(e.left+(e.width||n.clientWidth)+5)+"px");n.className+=" wpm-Popup";r._dismissDelegate=function(n){r._dismissHandler(n)};r._popupHalo=u=document.createElement("div");u.className="wpm-Halo";n.parentElement.appendChild(u);u.style.height=f.height+"px";u.style.width=f.width+"px";u.style.top=f.top+"px";u.style.left=f.left+"px";u.addEventListener("click",r._dismissDelegate);r._popupOverlay=o=document.createElement("div");o.className="wpm-Overlay";n.parentElement.appendChild(o);o.addEventListener("mouseover",r._dismissDelegate);l=f.clientTop+f.height+h+s;r._bsInst.popupShow(l)};b365.Ui.Betslip.WebPopupManager.prototype.popupHide=function(){var n=this;n._popupActive&&(n._popupActive=!1,n._closeCallback&&(n._closeCallback(),n._closeCallback=null),n._popup)&&(n._popupHalo&&(n._popup.parentElement.removeChild(n._popupHalo),n._dismissDelegate&&n._popupHalo.removeEventListener("click",n._dismissDelegate),n._popupHalo=null),n._popupOverlay&&(n._dismissDelegate&&n._popupOverlay.removeEventListener("mouseover",n._dismissDelegate),n._popup.parentElement.removeChild(n._popupOverlay),n._popupOverlay=null),n._popup.className=n._popup.className.replace(" wpm-Popup",""),n._dismissDelegate=null,n._popup=null,n._bsInst.popupHide())};b365.Ui.Betslip.WebPopupManager.prototype._dismissHandler=function(n){var t=this;n&&(n.preventDefault(),n.stopPropagation(),n.target===n.currentTarget)&&typeof n!="undefined"&&n&&t.popupHide()};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EachWayClickProcessor=function(n,t,i,r,u){this._bsInst=n;this._bsController=t;this._itemIndex=i;this._itemType=r;this._itemElement=u;this._eachWayCookieKey="ew";this._showLinesLabel=$("#bsDiv>ul").attr("data-tcm")=="2";this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._itemIndex!="undefined"&&typeof this._itemType!="undefined"&&typeof this._itemElement!="undefined"};this._updateStakeLabel=function(n){var t,i,r,u;this._showLinesLabel||(u=$(this._itemElement)[0].className.indexOf("bs-MultipleBets_HighestAccumulator")>1,t=$(this._itemElement).find('input[class~="stk"]'),i=u?betSlipML.unitstake:n?betSlipML.unitstake:betSlipML.stake,t.attr("placeholder",i),r=t.val(),(r==betSlipML.unitstake||r==betSlipML.stake)&&t.val(i))}};b365.Ui.Betslip.EachWayClickProcessor.prototype={handle:function(n){var i=this._bsInst.getBetItemById(this._itemType,this._itemIndex),t;i&&(i.setStItem(this._eachWayCookieKey,n?"1":"0"),this._bsController.updateMultiplesEachWayFlag(),this._bsInst.updateState(),this._updateStakeLabel(n),new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this._bsController).calculate(),this._bsController.ausMultiplesEnabled()&&this._bsController.getMultipleInfo());this._itemElement&&this._itemElement.length>0&&(t=$('input[data-inp-type="sngstk"]',this._itemElement[0]),t&&t.length>0&&this._bsController.OnItemStakeChanged(t[0]))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EachWayExtraClickProcessor=function(n,t,i,r,u){this._bsInst=n;this._bsController=t;this._itemIndex=i;this._itemType=r;this._itemElement=u;this._eachWayCookieKey="ew";this._showLinesLabel=$("#bsDiv>ul").attr("data-tcm")=="2";this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._itemIndex!="undefined"&&typeof this._itemType!="undefined"&&typeof this._itemElement!="undefined"};this._updateStakeLabel=function(n){var t,i,r,u;this._showLinesLabel||(u=$(this._itemElement)[0].className.indexOf("bs-MultipleBets_HighestAccumulator")>1,t=$(this._itemElement).find('input[class~="stk"]'),i=u?betSlipML.unitstake:n?betSlipML.unitstake:betSlipML.stake,t.attr("placeholder",i),r=t.val(),(r==betSlipML.unitstake||r==betSlipML.stake)&&t.val(i))}};b365.Ui.Betslip.EachWayExtraClickProcessor.prototype={handle:function(n){var r=this._bsInst.getBetItemById(this._itemType,this._itemIndex),u,t,i;r&&(t=this._bsController.eachWayExtraInfo[this._itemIndex],u=r.getCnItem("fp"),t&&(bsApp.itemsRemoved(u),r.setStItem(this._eachWayCookieKey,n?"1":"0"),bsApp.addOnRefreshReqComplete(),this._bsController.updateMultiplesEachWayFlag(),this._bsInst.updateState(),this._updateStakeLabel(n),new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this._bsController).calculate(),this._bsController.ausMultiplesEnabled()&&this._bsController.getMultipleInfo(),i=$('input[data-inp-type="sngstk"]',this._itemElement[0]),i&&i.length>0&&this._bsController.OnItemStakeChanged(i[0]),t.dropdownEle&&(t.dropdownEle.className.indexOf("disabled")>-1?$(t.dropdownEle).removeClass("disabled"):($(t.dropdownEle).addClass("disabled"),t.eachWayExtraWrapperEle&&$(t.eachWayExtraWrapperEle).removeClass("showing")))))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.FreeBetClickProcessor=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._itemIndex!="undefined"&&typeof this._itemType!="undefined"&&typeof this._itemElement!="undefined"};this._handleUpdates=function(n){(this._stakeTextBoxes=this._itemElement.querySelectorAll('input[class~="stk"]'),this._stakeTextBox=this._getStakeInputForBetType(),this._stakeTextBox)&&(this._betCount=+this._bsInst.getBetItemById(this._itemType,this._itemIndex).getStItem("bc")||1,this._betMax=this._itemElement.querySelector(".bs-BetMax"),n?(this._itemElement.className.indexOf("bs-FreeBet-selected")===-1&&(this._itemElement.className=this._itemElement.className+" bs-FreeBet-selected"),this._insertFreeBetStakeForBetItem(),this._disableStakeInputs()):(this._itemElement.className=this._itemElement.className.replace(" bs-FreeBet-selected",""),this._enableStakeInputs(),this._clearFreeBetStakeFromBetItem(),this._resetStakeValue()),this._toReturnText&&(this._toReturnText.innerText=n?betSlipML.netreturn:betSlipML.toreturn),this._singlesMultiplier&&this._itemType==="single"&&(this._singlesMultiplier.innerText=(n?this._bsInst._betItems.length-1:this._bsInst._betItems.length)+"x"),new b365.Ui.Betslip.StakeChangedHandler(this._bsInst,this._bsController).handle(this._stakeTextBox),new b365.Ui.Betslip.BetCreditCalculator(this._bsInst,this._bsController,n).calculate(),this._bsController.resizeHandler())}};b365.Ui.Betslip.FreeBetClickProcessor.prototype={init:function(n){var t=new b365.Ui.Betslip.ItemInformation(n),i=t.itemIndexAndType(),r=t.itemElement();return this._itemIndex=i[0],this._itemType=i[1],this._itemElement=r[0],this._element=n,this._freeBetCookieKey="ft",this._freeBetValueCookieKey="fbv",this._eachWayCookieKey="ew",this._multiplesStakeBox=document.querySelector('li[data-item-id="-1"] .bs-MultipleBets_Stake'),this._singlesMultiplier=document.querySelector('li[data-item-id="-1"] .bs-MultipleBets_BetCount'),this._freeBetContainer=this._itemElement.getElementsByClassName("bs-UseFreeBetContainer")[0],this._toReturnText=this._itemElement.getElementsByClassName("bs-StakeToReturn_Text")[0],this._freeBetStake=this._itemElement.getElementsByClassName("bs-FreeBetStake")[0],this},handle:function(n){var t=this._bsInst.getBetItemById(this._itemType,this._itemIndex);this._isValid&&t&&(t.setStItem(this._freeBetCookieKey,n?this._freeBetContainer.getAttribute("data-item-fbt"):""),t.setStItem(this._freeBetValueCookieKey,n?this._freeBetContainer.getAttribute("data-item-fbv"):""),this._bsInst.updateState(),this._isEachWay=t.getStItem(this._eachWayCookieKey)==1,this._handleUpdates(n))},_getStakeInputForBetType:function(){var n="bs-Stake_TextBox";switch(this._itemType){case"single":case"betbuilder":n=".bs-Stake_TextBox";break;case"cast":n=this._stakeTextBoxes[0].className.indexOf("Flexi")>=0?".bs-FlexiUnitStake_TextBox":".bs-Stake_TextBox"}return this._itemElement.querySelector(n)},_insertFreeBetStakeForBetItem:function(){var n=this._freeBetContainer.getAttribute("data-item-fbv"),t=getBetslipWebModule(),i;this._isEachWay?(n=t.roundUpStake(n/2),i=this._bsController._currencyDisplayHelper.getDecimalSeperator(),this._freeBetStake.childNodes[0].data=$blib.pad2DP(String(n*2),i)+" "):this._itemType!=="single"?(n=t.calculateUnitStake(n,this._betCount),this._resetStakeValue()):this._resetStakeValue();this._stakeTextBox.click();this._stakeTextBox.value=n;this._betMax&&(this._betMax.style.display="none")},_clearFreeBetStakeFromBetItem:function(){this._stakeTextBox.value=this._itemType==="single"&&this._multiplesStakeBox?this._multiplesStakeBox.value:"";this._stakeTextBox.focus();this._stakeTextBox.blur();this._betMax&&(this._betMax.style.display="")},_toggleDisclaimerSection:function(n){var t=document.getElementsByClassName("bs-freebetdisclaimer")[0];n&&t.className.indexOf(" hidden")>-1?t.className=t.className.replace(" hidden",""):t.className.indexOf(" hidden")===-1&&(t.className+=" hidden")},_enableStakeInputs:function(){for(var t,n=0;n<this._stakeTextBoxes.length;n++)this._stakeTextBoxes[n].removeAttribute("disabled"),this._stakeTextBoxes[n].className=this._stakeTextBoxes[n].className.replace("bs-FreeBet-disabled","");for(t=document.getElementsByClassName("bs-UseFreeBet-disabled"),n=t.length-1;n>=0;n--)t[n].className=t[n].className.replace(" bs-UseFreeBet-disabled","")},_disableStakeInputs:function(){for(var t,n=0;n<this._stakeTextBoxes.length;n++)this._stakeTextBoxes[n].setAttribute("disabled","disabled"),this._stakeTextBoxes[n].className=this._stakeTextBoxes[n].className+" bs-FreeBet-disabled";for(t=document.getElementsByClassName("bs-UseFreeBet"),n=0;n<t.length;n++)if(t[n]===this._element.parentNode||t[n]===this._element.parentNode.parentNode)continue;else t[n].className.indexOf("bs-UseFreeBet-disabled")==-1&&(t[n].className=t[n].className+" bs-UseFreeBet-disabled")},_resetStakeValue:function(){this._freeBetStake.childNodes[0].data=this._freeBetContainer.getAttribute("data-item-fbv")+" "}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.RemoveClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._enabled=!1;this._removeClickHandlers=[];this._isValid=function(){return typeof this._bsInst!="undefined"};this._reorderChildElements=function(n){var t,r,i=0;if(n.children.length!=0)for(t=0,r=n.children.length;t<r;t++)n.children[t].hasAttribute("data-item-id")&&(n.children[t].setAttribute("data-item-id",i),i=i+1)}};b365.Ui.Betslip.RemoveClickHandler.prototype={handle:function(n){var t=this,u,y=!1,s,c,e,l,a,f,o,v,p,w,h,r,i;typeof n!="undefined"&&n&&(t.removeHandlers(),u=n.target,s=$(u),s.prop("disabled")||s.parents().prop("disabled")||!s.hasClass("remove")&&!s.hasClass("bs-RestrictedBet")?y=!0:(s.hasClass("bs-RestrictedBet")&&(s=$(u).parent().find(".remove"),u=s[0]),t._bsInst._pollReqType===t._bsInst.reqTypePollTempBetReceipt&&t._bsInst.resetPoll(),h=new b365.Ui.Betslip.ItemInformation(u),r=h.itemIndexAndType(),i=h.itemElement(),f=$(u.parentNode).next()[0],r[1]=="tote-pot-leg"?(u=h.parent()[0],new b365.Ui.Betslip.TotePotLegDeleteExecutor(t._bsInst,u,r[0],r[1]).execute(),t.attachHandlers()):r[1]=="cast"&&f&&f.hasAttribute("data-item-type")&&f.getAttribute("data-item-type")?(u=f,h=new b365.Ui.Betslip.ItemInformation(u,!0),r=h.itemIndexAndType(),i=h.itemElement(),new b365.Ui.Betslip.TotePotLegDeleteExecutor(t._bsInst,u,r[0],r[1]).execute(),t.attachHandlers()):t._bsController.clientEnhancedMode()?(c=t._bsInst,e=t._bsController,l=r[0],a=r[1],f=i[0].parentElement,t._bsController._stakeEntryType==t._bsController._stakeEntryTypes.stakePad?(o=$("#stakePad",i),o.length>0&&!o.hasClass("hideStakePad")?e._enhancedBetSlipAnimations.removeSingleBet(i,!0,o,t.removeBetItemCallBack,[f,i[0],c,e,l,a],t):(o=$("#stakePad"),o.length>0?(v=o[0].getAttribute("data-item"),p=o[0].getAttribute("data-type"),w=i[0].getAttribute("data-item-id"),p!="multiple"&&w<v&&(v=v-1,o[0].setAttribute("data-item",v)),e._enhancedBetSlipAnimations.removeSingleBet(i,!1,null,t.removeBetItemCallBack,[f,i[0],c,e,l,a],t)):e._enhancedBetSlipAnimations.removeSingleBet(i,!1,null,t.removeBetItemCallBack,[f,i[0],c,e,l,a],t))):e._enhancedBetSlipAnimations.removeSingleBet(i,!1,null,t.removeBetItemCallBack,[f,i[0],c,e,l,a],t)):new b365.Ui.Betslip.ItemDeleteExecutor(t._bsInst,t._bsController,r[0],r[1]).execute(),y=!0),y?(n.stopPropagation(),n.preventDefault()):t._bsController._stakeEntryType!=t._bsController._stakeEntryTypes.deviceKeyBoard&&t._bsController._stakeEntryHander._isShowing&&(t._bsController._stakeEntryHander.hide(),n.stopPropagation(),n.preventDefault()),t.attachHandlers())},removeBetItemCallBack:function(){var n=arguments[0],t=arguments[1],i=arguments[2],r=arguments[3],u=arguments[4],f=arguments[5];n.removeChild(t);new b365.Ui.Betslip.ItemDeleteExecutor(i,r,u,f).execute();this._reorderChildElements(n);this.attachHandlers()},attachHandlers:function(){var n=this,i=$(".remove, .bs-RestrictedBet",n._betSlipWrapper),t,r;if(n.removeHandlers(n),i.length==0){n._enabled=!1;return}for(t=0,r=i.length;t<r;t++)n._removeClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i[t],$.proxy(n.handle,n),!1));n._enabled=!0},removeHandlers:function(){var n=this,t,i;if(n._removeClickHandlers.length>0){for(t=0,i=n._removeClickHandlers.length;t<i;t++)n._removeClickHandlers[t]._element&&n._removeClickHandlers[t].destroy();n._removeClickHandlers=[]}n._enabled=!1}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EachWayClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._enabled=!1;this._eachWayClickHandlers=[];this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.EachWayClickHandler.prototype={handle:function(n){var r=this,t,i,o,e,u,f,s;if(typeof n!="undefined"&&n){if(r.removeHandlers(),t=n.target,i=$(t),!i.prop("disabled")&&!i.parents().prop("disabled")){switch(t.nodeName.toLowerCase()){case"div":i=$(t).find('span.bs-CheckBox[data-inp-type="ewcb"]');t=i[0];break;default:i=$(t).parent().find('span.bs-CheckBox[data-inp-type="ewcb"]');t=i[0]}if(r._bsInst._pollReqType===r._bsInst.reqTypePollTempBetReceipt&&r._bsInst.resetPoll(),o=new b365.Ui.Betslip.ItemInformation(t),e=o.itemIndexAndType(),u=o.itemElement(),!$(u).hasClass("suspended")){if(s=t.className.indexOf("js-EachWayExtra")>-1,s&&$(t).hasClass("disabled")){r.attachHandlers();n.stopPropagation();n.preventDefault();return}f=$(t).hasClass("checked");!1||(f?($(t).removeClass("checked"),f=!1):($(t).addClass("checked"),f=!0));s?new b365.Ui.Betslip.EachWayExtraClickProcessor(this._bsInst,this._bsController,e[0],e[1],u).handle(f):new b365.Ui.Betslip.EachWayClickProcessor(this._bsInst,this._bsController,e[0],e[1],u).handle(f);$(u).hasClass("bs-FreeBet-selected")&&this._freeBetTokenAdjustment(u)}r.attachHandlers()}n.stopPropagation();n.preventDefault()}},attachHandlers:function(){var n=this,i=$('div[data-inp-type="ewcb"], span[data-inp-type="ewcb"]',"#bsDiv"),t,r;if(n.removeHandlers(n),i.length==0){n._enabled=!1;return}for(t=0,r=i.length;t<r;t++)n._eachWayClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i[t],$.proxy(n.handle,n),!1));n._enabled=!0},removeHandlers:function(){var n=this,t,i;if(n._eachWayClickHandlers.length>0){for(t=0,i=n._eachWayClickHandlers.length;t<i;t++)n._eachWayClickHandlers[t]._element&&n._eachWayClickHandlers[t].destroy();n._eachWayClickHandlers=[]}n._enabled=!1},_freeBetTokenAdjustment:function(n){var t=n[0].querySelector('div[data-inp-type="fbcb"]'),i=!1;t&&t.parentNode.className.indexOf("bs-UseFreeBet-disabled")==-1&&t.parentNode.className.indexOf("bs-UseFreeBet-error")==-1&&(i=t.className.indexOf("bs-FreeBetCheckBox-selected")>-1);i&&new b365.Ui.Betslip.FreeBetClickProcessor(this._bsInst,this._bsController).init(t).handle(i)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.FreeBetClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._enabled=!1;this._freeBetClickHandlers=[];this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.FreeBetClickHandler.prototype={handle:function(n){var i=this,t,f,u,r,e;i.removeHandlers();t=n.target;i._bsInst._pollReqType===i._bsInst.reqTypePollTempBetReceipt&&i._bsInst.resetPoll();f=new b365.Ui.Betslip.ItemInformation(t);u=f.itemElement()[0];t=u.querySelector('div[data-inp-type="fbcb"]');u.className.indexOf("suspended")==-1&&t&&t.parentNode.className.indexOf("bs-UseFreeBet-disabled")==-1&&t.parentNode.className.indexOf("bs-UseFreeBet-error")==-1&&(r=t.className.indexOf("bs-FreeBetCheckBox-selected")>-1,!1||(r?(t.className=t.className.replace("bs-FreeBetCheckBox-selected",""),r=!1):(this._bsInst.getValueFromBSCookie("fs")&&this._bsInst.getValueFromBSCookie("fs").replace("||","")==="1"&&(e=this._bsInst.getBetItems(this._bsInst.itemTypeSingle).concat(this._bsInst.getBetItems(this._bsInst.itemTypeBetBuilder)),e.length===1&&new b365.Ui.Betslip.ToggleBetCredit(this._bsInst,this._bsController).toggle()),t.className=t.className+" bs-FreeBetCheckBox-selected",r=!0),new b365.Ui.Betslip.FreeBetClickProcessor(this._bsInst,this._bsController).init(t).handle(r)));i.attachHandlers();n.stopPropagation();n.preventDefault()},toggle:function(n){var t,u,r,i;u=new b365.Ui.Betslip.ItemInformation(n);r=u.itemElement()[0];t=r.querySelector('div[data-inp-type="fbcb"]');r.className.indexOf("suspended")==-1&&t&&t.parentNode.className.indexOf("bs-UseFreeBet-disabled")==-1&&t.parentNode.className.indexOf("bs-UseFreeBet-error")==-1&&(i=t.className.indexOf("bs-FreeBetCheckBox-selected")>-1,!1||(i?(t.className=t.className.replace("bs-FreeBetCheckBox-selected",""),i=!1):(t.className=t.className+" bs-FreeBetCheckBox-selected",i=!0),new b365.Ui.Betslip.FreeBetClickProcessor(this._bsInst,this._bsController).init(t).handle(i)));this.attachHandlers()},update:function(n){var i,t;n&&(checkBox=n.querySelector('div[data-inp-type="fbcb"]'),i=checkBox&&checkBox.className.indexOf("bs-FreeBetCheckBox-selected")>-1,n.className.indexOf("suspended")==-1&&i&&checkBox.parentNode.className.indexOf("bs-UseFreeBet-disabled")==-1&&checkBox.parentNode.className.indexOf("bs-UseFreeBet-error")==-1?new b365.Ui.Betslip.FreeBetClickProcessor(this._bsInst,this._bsController).init(checkBox).handle(i):(t=$('input[data-inp-type="sngstk"]',n),t&&t.length>0&&this._bsController.OnItemStakeChanged(t[0])))},attachHandlers:function(){for(var t=this,i=[],u,r=document.getElementsByClassName("bs-UseFreeBet"),n=0;n<r.length;n++)r[n].className.indexOf("bs-UseFreeBet-error")==-1&&r[n].className.indexOf("bs-UseFreeBet-disabled")==-1&&i.push(r[n]);if(t.removeHandlers(t),i.length==0){t._enabled=!1;return}for(n=0,u=i.length;n<u;n++)t._freeBetClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i[n],$.proxy(t.handle,t),!1));t._enabled=!0},removeHandlers:function(){var n=this,t,i;if(n._freeBetClickHandlers.length>0){for(t=0,i=n._freeBetClickHandlers.length;t<i;t++)n._freeBetClickHandlers[t]._element&&n._freeBetClickHandlers[t].destroy();n._freeBetClickHandlers=[]}n._enabled=!1}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.StreamingClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._enabled=!1;this._streamingClickHandlers=[];this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.StreamingClickHandler.prototype._streamingElement=null;b365.Ui.Betslip.StreamingClickHandler.prototype.handle=function(n){var t=this,i,u,r;typeof n!="undefined"&&n&&(t.removeHandlers(),i=n.target,r=$(i),r.prop("disabled")||r.parents().prop("disabled")||(t._streamingElement=i.parentElement,u=t._streamingElement.getElementsByClassName("br-Streaming_Popup")[0],t._streamingElement.className+=" br-Streaming_active",t._bsController.webPopupManager.popupShow(u,function(){t.removePopup()}),t.attachHandlers()),n.stopPropagation(),n.preventDefault())};b365.Ui.Betslip.StreamingClickHandler.prototype.attachHandlers=function(){var n=this,i=$(".br-Streaming_Text","#bsDiv"),t,r;if(n.removeHandlers(n),i.length===0){n._enabled=!1;return}for(t=0,r=i.length;t<r;t++)n._streamingClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i[t],$.proxy(n.handle,n),!1));n._enabled=!0};b365.Ui.Betslip.StreamingClickHandler.prototype.removeHandlers=function(){var n=this,t,i;if(n._streamingClickHandlers.length>0){for(t=0,i=n._streamingClickHandlers.length;t<i;t++)n._streamingClickHandlers[t]._element&&n._streamingClickHandlers[t].destroy();n._streamingClickHandlers=[]}n._enabled=!1};b365.Ui.Betslip.StreamingClickHandler.prototype.removePopup=function(){var n=this;n._streamingElement&&(this._streamingElement.className=this._streamingElement.className.replace(" br-Streaming_active",""),this._streamingElement=null,n._bsController.webPopupManager.popupHide())};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToteHoverHandler=function(n,t){this._bsInst=n;this._bsController=t;this._enabled=!1;this._toteHoverHandler=[];this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.ToteHoverHandler.prototype._toteElement=null;b365.Ui.Betslip.ToteHoverHandler.prototype.handle=function(n){var t=this,e,i,u,r,f;typeof n!="undefined"&&n&&(i=$(e),i.prop("disabled")||i.parents().prop("disabled")||(t._parentElement=n.target.parentElement,r=t._parentElement.getElementsByClassName("bs-Tote_Popup")[0]||t._parentElement.getElementsByClassName("br-Tote_Popup")[0],t._parentElement&&(t._popupActive className=" Popup-show",t._parentElement.className+=t._popupActiveClass),f=r.getBoundingClientRect(),u=f.top+r.clientHeight,t._bsInst.popupShow(u)),n.stopPropagation(),n.preventDefault())};b365.Ui.Betslip.ToteHoverHandler.prototype.attachHandlers=function(){var n=this,i=$(".AusHelp"),t,r;if(n.removeHandlers(n),i.length==0){n._enabled=!1;return}for(t=0,r=i.length;t<r;t++)n._toteHoverHandler.push(new b365.Ui.Betslip.HoverHandler(i[t],$.proxy(n.handle,n),$.proxy(n.removePopup,n),!1));n._enabled=!0};b365.Ui.Betslip.ToteHoverHandler.prototype.removeHandlers=function(){var n=this,t,i;if(n._toteHoverHandler.length>0){for(t=0,i=n._toteHoverHandler.length;t<i;t++)n._toteHoverHandler[t]._element&&n._toteHoverHandler[t].destroy();n._toteHoverHandler=[]}n._enabled=!1};b365.Ui.Betslip.ToteHoverHandler.prototype.removePopup=function(n){var t=this;t._popupActiveClass&&n&&(t._parentElement.className=t._parentElement.className.replace(t._popupActiveClass,""),t._parentElement=null,t._popupActive className=null,t._bsInst.popupHide())};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToteStakeClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._enabled=!1;this._toteStakeClickHandler=[];this._element;this._isValid=function(){return typeof this._bsInst!="undefined"};this._blurHandler=function(n){var t=n&&n.target||n.srcElement,i=t.getAttribute("placeholdertext"),r;i!==""&&(t.setAttribute("placeholder",i),t.setAttribute("placeholdertext",""),r=$("html").is(".ie-8, .ie-9"),r&&t.value.length<1&&(t.value=t.getAttribute("placeholder")))}};b365.Ui.Betslip.ToteStakeClickHandler.prototype={handle:function(n){var r=this,t=n&&n.target||n.srcElement,i=t.getAttribute("placeholder");i!==""&&(t.setAttribute("placeholdertext",i),t.setAttribute("placeholder",""));r.attachBlurHandler(t)},attachBlurHandler:function(n){n.addEventListener("blur",this._blurHandler,!1)},attachHandlers:function(){var n=this,i=document.getElementsByClassName("totestkbc"),t,r;if(n.removeHandlers(n),i.length==0){n._enabled=!1;return}for(t=0,r=i.length;t<r;t++)n._toteStakeClickHandler.push(new b365.Ui.Betslip.ResponsiveClickHandler(i[t],$.proxy(n.handle,n),!1));n._enabled=!0},removeHandlers:function(){var n=this,t,i;if(n._toteStakeClickHandler.length>0){for(t=0,i=n._toteStakeClickHandler.length;t<i;t++)n._toteStakeClickHandler[t]._element&&n._toteStakeClickHandler[t].destroy();n._toteStakeClickHandler=[]}n._enabled=!1}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.UnitStakeClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._enabled=!1;this._unitStakeClickHandler=[];this._element;this._isValid=function(){return typeof this._bsInst!="undefined"};this._blurHandler=function(n){var i,r,u,t=n.target||n.srcElement,f;t.value.length<1&&(t&&(i=t.parentElement.getAttribute("class"),r=i.indexOf("showUnitStake"),r>-1&&(u=i.substring(0,r),t.parentElement.setAttribute("class",u),t.setAttribute("placeholder",t.getAttribute("placeholdertext")),t.setAttribute("placeholdertext",""),f=$("html").is(".ie-8, .ie-9"),f&&(t.value=t.getAttribute("placeholder"),t.className.indexOf("bs-Stake_TextBox-placeholder")==-1&&(t.className+=" bs-Stake_TextBox-placeholder")))),t.removeEventListener("blur",this._blurHandler),n.stopPropagation(),n.preventDefault())}};b365.Ui.Betslip.UnitStakeClickHandler.prototype={handle:function(n){var f=this,e,u,t,i,r;typeof n!="undefined"&&n&&(i=n.target||n.srcElement,t=i.parentElement,i.value!==""&&$(i).prev().focus(),i.className.indexOf("bs-ToteStake_Input")!=-1&&i.value.length<1?(u=t.getAttribute("class"),e=u.indexOf(" showUnitStake"),e==-1&&(t&&(t.setAttribute("class",u+" showUnitStake"),r=t.children[0],r&&(r.setAttribute("placeholdertext",r.getAttribute("placeholder")),r.setAttribute("placeholder",""))),f.attachBlurHandler(t))):f.attachBlurHandler(t),n.stopPropagation(),n.preventDefault())},attachBlurHandler:function(n){n.children[0].addEventListener("blur",this._blurHandler,!1)},attachHandlers:function(){var n=this,i=document.getElementsByClassName("unitStake"),t,r;if(n.removeHandlers(n),i.length==0){n._enabled=!1;return}for(t=0,r=i.length;t<r;t++)n._unitStakeClickHandler.push(new b365.Ui.Betslip.ResponsiveClickHandler(i[t],$.proxy(n.handle,n),!1));n._enabled=!0},removeHandlers:function(){var n=this,t,i;if(n._unitStakeClickHandler.length>0){for(t=0,i=n._unitStakeClickHandler.length;t<i;t++)n._unitStakeClickHandler[t]._element&&n._unitStakeClickHandler[t].destroy();n._unitStakeClickHandler=[]}n._enabled=!1}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetslipClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"};this._reorderChildElements=function(n){var t,r,i=0;if(n.children.length!=0)for(t=0,r=n.children.length;t<r;t++)n.children[t].hasAttribute("data-item-id")&&(n.children[t].setAttribute("data-item-id",i),i=i+1)}};b365.Ui.Betslip.BetslipClickHandler.prototype={handle:function(n){var i=this,u,r=!1,t,o,s,h,e,c,l,f,a,v;if(typeof n!="undefined"&&n){if(u=n.target,t=$(u),!i._bsController.clientUsesSelect()){if(u.id==="betSlipTypeSelection"||u.id=="betSlipTypeSelectionText"){this._bsController._stakeEntryType!=this._bsController._stakeEntryTypes.deviceKeyBoard&&this._bsController._stakeEntryHander._isShowing&&this._bsController._stakeEntryHander.hide();i._bsController._enhancedBetSlipTypeSelector?i._bsController._enhancedBetSlipTypeSelector._enabled&&(i._bsController._enhancedBetSlipTypeSelector._isShowing?i._bsController._enhancedBetSlipTypeSelector.hidePopUpMenu():i._bsController._enhancedBetSlipTypeSelector.showPopUpMenu()):(i._bsController._enhancedBetSlipTypeSelector=new b365.Ui.Betslip.EnhancedBetSlipTypeSelector(i._bsController),i._bsController._enhancedBetSlipTypeSelector.enablePopUp(),i._bsController._enhancedBetSlipTypeSelector.showPopUpMenu());n.stopPropagation();n.preventDefault();return}if(t.hasClass("bs-OddsChoice_SelectionText")){this._bsController._stakeEntryType!=this._bsController._stakeEntryTypes.deviceKeyBoard&&this._bsController._stakeEntryHander._isShowing&&this._bsController._stakeEntryHander.hide();i._bsController._enhancedBetSlipOddsSelector?i._bsController._enhancedBetSlipOddsSelector._enabled&&i._bsController._enhancedBetSlipOddsSelector.showPopUpMenu(n):(i._bsController._enhancedBetSlipOddsSelector=new b365.Ui.Betslip.EnhancedBetSlipOddsSelector(i._bsController),i._bsController._enhancedBetSlipOddsSelector.enablePopUps(),i._bsController._enhancedBetSlipOddsSelector.showPopUpMenu(n));n.stopPropagation();n.preventDefault();return}if(t.hasClass("bs-Pitcher_Options")){this._bsController._stakeEntryType!=this._bsController._stakeEntryTypes.deviceKeyBoard&&this._bsController._stakeEntryHander._isShowing&&this._bsController._stakeEntryHander.hide();i._bsController._enhancedBetSlipPitcherSelector?i._bsController._enhancedBetSlipPitcherSelector._enabled&&i._bsController._enhancedBetSlipPitcherSelector.showPopUpMenu(n):(i._bsController._enhancedBetSlipPitcherSelector=new b365.Ui.Betslip.EnhancedBetSlipPitcherSelector(i._bsController),i._bsController._enhancedBetSlipPitcherSelector.enablePopUps(),i._bsController._enhancedBetSlipPitcherSelector.showPopUpMenu(n));n.stopPropagation();n.preventDefault();return}if(t.hasClass("bs-IfBetType_SelectionText")){this._bsController._stakeEntryType!=this._bsController._stakeEntryTypes.deviceKeyBoard&&this._bsController._stakeEntryHander._isShowing&&this._bsController._stakeEntryHander.hide();i._bsController._enhancedIfBetSelector?i._bsController._enhancedIfBetSelector._enabled&&i._bsController._enhancedIfBetSelector.showPopUpMenu(n):(i._bsController._enhancedIfBetSelector=new b365.Ui.Betslip.EnhancedBetSlipIfBetSelector(i._bsController),i._bsController._enhancedIfBetSelector.enablePopUps(),i._bsController._enhancedIfBetSelector.showPopUpMenu(n));n.stopPropagation();n.preventDefault();return}if(t.hasClass("bs-TeaserType_SelectionText")){this._bsController._stakeEntryType!=this._bsController._stakeEntryTypes.deviceKeyBoard&&this._bsController._stakeEntryHander._isShowing&&this._bsController._stakeEntryHander.hide();i._bsController._enhancedTeaserSelector?i._bsController._enhancedTeaserSelector._enabled&&i._bsController._enhancedTeaserSelector.showPopUpMenu(n):(i._bsController._enhancedTeaserSelector=new b365.Ui.Betslip.EnhancedBetSlipTeaserSelector(i._bsController),i._bsController._enhancedTeaserSelector.enablePopUps(),i._bsController._enhancedTeaserSelector.showPopUpMenu(n));n.stopPropagation();n.preventDefault();return}if(t.hasClass(".bs-EachWayExtraBetType_Selection")){this._bsController._stakeEntryType!=this._bsController._stakeEntryTypes.deviceKeyBoard&&this._bsController._stakeEntryHander._is&&this._bsController._stakeEntryHander.hide();i._bsController._enhancedBetSlipEachWayExtraSelector?i._bsController._enhancedBetSlipEachWayExtraSelector._enabled&&i._bsController._enhancedBetSlipEachWayExtraSelector.showPopUpMenu(n):(i._bsController._enhancedBetSlipEachWayExtraSelector=new b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector(i._bsController),i._bsController._enhancedBetSlipEachWayExtraSelector.enablePopUps(),i._bsController._enhancedBetSlipEachWayExtraSelector.showPopUpMenu(n));n.stopPropagation();n.preventDefault();return}if(t.hasClass("bs-BetMax_Text")||t.hasClass("bs-FlexiBetMax_Text")||t.hasClass("bs-BetMaxMultiple_Text")){i._bsController.OnItemBetMax&&i._bsController.OnItemBetMax(u);n.stopPropagation();n.preventDefault();return}if(t.hasClass("qb-Btn_Text-quick")||t.hasClass("qb-Btn")||t.hasClass("qb-Btn_Switch-true")||t.hasClass("qb-Btn_Switch-false")){this._bsController._delegates.toggleQuickBet();n.stopPropagation();n.preventDefault();return}if(t.hasClass("qb-Help")||t.hasClass("qb-Help_Text")){this._bsController._delegates.toggleQuickBetHelpTooltip(!0);n.stopPropagation();n.preventDefault();return}if(t.hasClass("qb-Tooltip_Text")||t.hasClass("qb-Tooltip_Nib")){this._bsController._delegates.removeQuickBetTooltip();n.stopPropagation();n.preventDefault();return}if(t.hasClass("bs-Stake_TextBox")||t.hasClass("bs-MultipleBets_Stake")){bsApp.isIe&&(l=document.getElementsByClassName("bs-BetSlipType")[0],l&&t&&(l.focus(),t.focus()));return}if(t.hasClass("bs-WinPlaceEachWay_SelectionText")){i._bsController._enhancedBetSlipWinPlaceEachWay||(i._bsController._enhancedBetSlipWinPlaceEachWay=new b365.Ui.Betslip.EnhancedBetSlipWinPlaceEachWay(i._bsInst,i._bsController));i._bsController._enhancedBetSlipWinPlaceEachWay.showPopUpMenu(n);n.stopPropagation();n.preventDefault();return}}t.prop("disabled")||t.parents().prop("disabled")?r=!0:(h=new b365.Ui.Betslip.ItemInformation(u),e=h.itemIndexAndType(),c=h.itemElement(),$(c).hasClass("suspended")&&!t.hasClass("remove")?r=!0:t.hasClass("bs-Header_RemoveAllLink")||t.parents().hasClass("bs-Header_RemoveAllLink")||t.hasClass("bs-Alert_ErrOkButton")?(t.parents().hasClass("bs-Header_RemoveAllLink")&&(u=t[0].parentNode),this._bsController.clientEnhancedMode()?(s=$("#stakePad"),o=$('li[class*="multiple-section"], li[class*="single-section"], li[class*="cast-section"]',"#bsDiv"),o.length>0?s.length>0?(this._bsController._enhancedBetSlipAnimations.removeAllBets(o,!0,s,this.removeAllBetsCallBack,[u],this),r=!0):(this._bsController._enhancedBetSlipAnimations.removeAllBets(o,!1,null,this.removeAllBetsCallBack,[u],this),r=!0):(new b365.Ui.Betslip.RemoveAllItemsRequestDespatcher(i._bsInst,i._bsController).despatch(u),r=!0)):(new b365.Ui.Betslip.RemoveAllItemsRequestDespatcher(i._bsInst,i._bsController).despatch(u),r=!0),i._bsController.getMessageDisplayHandler().clear()):(t.hasClass("br-Header_Done")||t.parent().hasClass("br-Header_Done"))&&t[0].className.indexOf("br-Italy_Header_Disabled")==-1&&t[0].parentNode.className.indexOf("br-Italy_Header_Disabled")==-1?(this._bsInst.clearBets(!1),r=this._bsController.clientContinueDelegate()):t.hasClass("br-Header_RetainLink")&&t[0].className.indexOf("br-Italy_Reuse_Disabled")==-1?(i._bsInst.signupModel&&i._bsInst.signupModel.subscribe(),new b365.Ui.Betslip.RetainSelectionsRequestDespatcher(this._bsInst,i._bsController).despatch(u),r=!0):t.hasClass("ebet")?(new b365.Ui.Betslip.EditSelectionsRequestDespatcher(this._bsInst).despatch(u),r=!0):t.hasClass("acceptChanges")||t.parent().hasClass("acceptChanges")?(f=t.hasClass("acceptChanges")?t:t.parent(),f.hasClass("bbPricefetch")?($(".bs-BtnWrapper.updatingOdds","#bsDiv").removeClass("hidden"),f.addClass("hidden"),r=!0):(new b365.Ui.Betslip.AcceptChangesRequestDespatcher(this._bsInst,this._bsController).despatch(u),r=!0)):t.hasClass("mlthd")?(new b365.Ui.Betslip.ToggleMultiples(this._bsInst,this._bsController).toggle(),r=!0):t.hasClass("ctcMessageContainer")||t.hasClass("ctcMessage")||t.hasClass("ctcQuestionmark")?($(".ctcMessageDetails").toggle(),r=!0):t.hasClass("placeBet")||t.parent().hasClass("placeBet")||t.parent().parent().hasClass("placeBet")?(i._bsController._stakeEntryType==i._bsController._stakeEntryTypes.deviceKeyBoard&&document.activeElement.blur(),u=t.hasClass("placeBet")?u:t.parent().parent().hasClass("placeBet")?t.parent().parent()[0]:t.parent()[0],f=$(u),f.hasClass("bbPricefetch")?($(".bs-BtnWrapper.updatingOdds","#bsDiv").removeClass("hidden"),f.addClass("hidden"),r=!0):(new b365.Ui.Betslip.PlaceBetClickHandler(this._bsInst,this._bsController).handle(u),r=!0)):t.hasClass("bs-RepeatStake_Text")?(new b365.Ui.Betslip.RepeatStakeClickHandler(this._bsInst,this._bsController,e[0],e[1],c).handle(n),r=!0):t.hasClass("sngbrk")||t.parents().hasClass("sngbrk")?(new b365.Ui.Betslip.SingleBreakdownRequestDespatcher(this._bsInst,this._bsController).despatch(e[0]),r=!0):t.hasClass("mltbrk")||t.parents().hasClass("mltbrk")?(new b365.Ui.Betslip.MultiBreakdownRequestDespatcher(this._bsInst,this._bsController).despatch(e[0]),r=!0):t.hasClass("cstBrkDwn")||t.parents().hasClass("cstBrkDwn")?(new b365.Ui.Betslip.CastBreakdownRequestDespatcher(this._bsInst,this._bsController).despatch(e[0]),r=!0):t.hasClass("bs-BankerIndicator_Btn")||t.hasClass("bs-BankerIndicator_BtnText")?$("#bsDiv").hasClass("receipt")||(new b365.Ui.Betslip.BankerToggleRequestDespatcher(this._bsInst,this._bsController).despatch(n),r=!0):t.hasClass("sngPD")?(new b365.Ui.Betslip.PitcherDetailsRequestDespatcher(this._bsInst,this._bsController).despatch(n),r=!0):t.attr("id")=="bsjn"?(this._bsController.joinNow(),r=!0):t.attr("id")=="bshst"?(this._bsController.membersHistory(),r=!0):t.hasClass("minusIcon")||t.hasClass("plusIcon")?(new b365.Ui.Betslip.StakeChangedHandler(this._bsInst).handle(t.siblings(".stk").get(0)),r=!0):t.hasClass("ausHelp")?(a={Target:u,Content:t.parent().attr("data-tooltip")},this._bsController._delegates.showTooltip(a)):t.hasClass("betCall")?(v=t.parent()&&t.parent().attr("data-atype")||t.parent()&&t.parent().parent()&&t.parent().parent().attr("data-atype"),u=document.getElementById("bc-CallBtn"),this._bsController.betCallHandler&&this._bsController.betCallHandler.handle(v,u)):(t.hasClass("bs-CheckBoxBetCredit")||t.hasClass("bs-useBetCreditAmount"))&&(new b365.Ui.Betslip.ToggleBetCredit(this._bsInst,this._bsController).toggle(),r=!0));r?(n.preventDefault(),n.stopPropagation()):this._bsController._stakeEntryType==this._bsController._stakeEntryTypes.stakePad&&this._bsController._stakeEntryHander._isShowing&&(n.target.parentNode.id.toLowerCase().indexOf("stakepad")==-1&&this._bsController._stakeEntryHander.hide(),n.stopPropagation(),n.preventDefault())}},removeAllBetsCallBack:function(){var t=arguments[0],n=this;new b365.Ui.Betslip.RemoveAllItemsRequestDespatcher(n._bsInst,n._bsController).despatch(t)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetslipChangeHandler=function(n,t){this._bsInst=n;this._controller=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._controller!="undefined"}};b365.Ui.Betslip.BetslipChangeHandler.prototype={handle:function(n){var i,t,u,r;typeof n!="undefined"&&n&&(i=!1,t=$(n.target),t.prop("disabled")||t.parents().prop("disabled")||t.parents().attr("suspended")?i=!0:(u=new b365.Ui.Betslip.ItemInformation(n.target),r=u.itemIndexAndType(),t.hasClass("bet-slip-type")?(new b365.Ui.Betslip.BetslipTypeChangeHandler(this._bsInst,this._controller).handle(n.target),i=!0):t.hasClass("mlthd")?(new b365.Ui.Betslip.ToggleMultiples(this._bsInst,this._controller).toggle(),i=!0):t.hasClass("teaserSel")?(new b365.Ui.Betslip.TeaserChangeHandler(this._bsInst).handle(n),i=!0):t.hasClass("pitcher-sel")?(new b365.Ui.Betslip.PitcherChangeHandler(this._bsInst).handle(n),i=!0):t.hasClass("ifbetaction")?(new b365.Ui.Betslip.IfBetActionChangeHandler(this._bsInst).handle(r[0],n.target),i=!0):t.hasClass("odds")?(new b365.Ui.Betslip.OddsChangeHandler(this._bsInst,this._controller).handle(n,r[0]),i=!0):t.hasClass("aus-tote")&&(new b365.Ui.Betslip.AusToteChangeHandler(this._bsInst).handle(n,r[0],r[1]),i=!0)),i&&n.preventDefault())}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ResponsiveClickHandler=function(n,t,i){this._events=[];this._touchEvents=[];this._element=n;this._handler=t;this._useCapture=i;this._startX=null;this._startY=null;this._events.push(this.addListener(n,"click",this,this._useCapture))};b365.Ui.Betslip.ResponsiveClickHandler.prototype.destroy=function(){for(var n=this._events.length-1;n>=0;n-=1)this._events[n].destroy();this._events=this._touchEvents=this._element=this._handler=this.ResponsiveClickHandler=null};b365.Ui.Betslip.ResponsiveClickHandler.prototype.reset=function(){if(this._touchEvents)for(var n=this._touchEvents.length-1;n>=0;n-=1)this._touchEvents[n].destroy();this._touchEvents=[]};b365.Ui.Betslip.ResponsiveClickHandler.prototype.addListener=function(n,t,i,r){if(n.addEventListener)return n.addEventListener(t,i,r),{destroy:function(){n.removeEventListener(t,i,r)}};var u=function(){i.handleEvent(window.event,i)};return n.attachEvent("on"+t,u),{destroy:function(){n.detachEvent("on"+t,u)}}};b365.Ui.Betslip.ResponsiveClickHandler.prototype.handleEvent=function(n){this.onClick(n)};b365.Ui.Betslip.ResponsiveClickHandler.prototype.onClick=function(n){var t;return!this._handler&&n.type==this._touchEndEvent?(n.target.removeEventListener(this._touchEndEvent,this.handleEvent,this._useCapture),!1):(t=this._handler.call(this._element,n),n.target.tagName==="A"&&n.target.target&&n.target.target==="_blank"||(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,this.reset(),window.touchBuster&&n.type==this._touchEndEvent&&window.touchBuster.preventGhostTouch(this._startX,this._startY)),t)};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.HoverHandler=function(n,t,i){this._events=[];this._element=n;this._overHandler=t;this._outHandler=i;this._events.push(this.addListener(n,"mouseover",this,this._useCapture));this._events.push(this.addListener(n,"mouseout",this,this._useCapture))};b365.Ui.Betslip.HoverHandler.prototype.destroy=function(){for(var n=this._events.length-1;n>=0;n-=1)this._events[n].destroy();this._events=this._element=this._overHandler=this._outHandler=this.HoverHandler=null};b365.Ui.Betslip.HoverHandler.prototype.addListener=function(n,t,i,r){if(n.addEventListener)return n.addEventListener(t,i,r),{destroy:function(){n.removeEventListener(t,i,r)}};var u=function(){i.handleEvent(window.event,i)};return n.attachEvent("on"+t,u),{destroy:function(){n.detachEvent("on"+t,u)}}};b365.Ui.Betslip.HoverHandler.prototype.handleEvent=function(n){var t;return n.type==="mouseover"&&n.target===n.currentTarget?this._overHandler.call(this._element,n):(mouseOutTarget=n.relatedTarget||n.fromElement,n.type==="mouseout"&&mouseOutTarget.parentElement!==n.currentTarget)?this._outHandler.call(this._element,n):void 0};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetslipTypeChangeHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"};this._clearCasts=function(n){(n==this._bsInst.slipIF||n==this._bsInst.slipReverseIF||n==this._bsInst.slipFixedTeaser||n==this._bsInst.slipBanker)&&this._bsInst.setBetItems([],this._bsInst.betTypeCast)};this._resetStakesAndEW=function(n){var i,t;if(n==this._bsInst.slipIF||n==this._bsInst.slipReverseIF||n==this._bsInst.slipBanker||n==this._bsInst.slipFixedTeaser||n==this._bsInst.slipStandard){for(i=this._bsInst.getBetItems(this._bsInst.betTypeNormal),t=0;t<i.length;t++)i[t].setStItem("ust","0"),i[t].setStItem("st","0"),i[t].setStItem("tr","0"),i[t].setStItem("ust","0"),i[t].setStItem("ac",""),n==this._bsInst.slipBanker||i[t].getCnItem("po")||i[t].setStItem("ew","0");if(n!=this._bsInst.slipBanker)for(i=this._bsInst.getBetItems(this._bsInst.betTypeMultiple),t=0;t<i.length;t++)i[t].setStItem("ew","0")}};this._setSlipType=function(n){this._bsInst.setValueInBSCookie("bt",n);this._clearCasts(n);this._resetStakesAndEW(n);this._bsInst.updateState();(n===this._bsInst.slipStandard||n===this._bsInst.slipBanker)&&(this._bsController.complexMultiplesCombinationsInit=!0);this._bsInst.refresh(this.betTypeAll)}};b365.Ui.Betslip.BetslipTypeChangeHandler.prototype={handle:function(n){typeof n!="undefined"&&n&&this._setSlipType(n.value)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PitcherChangeHandler=function(n){this._bsInst=n;this._baseBallFixtureParticipantCookieKey="bbfp";this._isValid=function(){return typeof this._bsInst!="undefined"};this._updateCustomDropdownAttribute=function(n){$(n).parent(".betslip-select").attr("data-text",$(n).find("option:selected").text())}};b365.Ui.Betslip.PitcherChangeHandler.prototype={handle:function(n){var t=n.target,u=new b365.Ui.Betslip.ItemInformation(t),i=u.itemIndexAndType(),r=this._bsInst.getBetItemById(i[1],i[0]);r&&(r.setStItem(this._baseBallFixtureParticipantCookieKey,t.value),this._updateCustomDropdownAttribute(t),this._bsInst.updateState());t.options[0].selected?$(t).parent().parent().find("span.pitch-warn").addClass("hidden"):$(t).parent().parent().find("span.pitch-warn").removeClass("hidden")}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.TotalsCalculator=function(n,t){this._bsInst=n;this._betSlipController=t;this._itemToReturnDisplayHelper=new b365.Ui.Betslip.ItemToReturnDisplayHelper(t);this._freeBetHelper=new b365.Ui.Betslip.BetCreditCalculator(n,t);this._ttStkEle=$("#bsDiv .totals .totalStake .total, #bsDiv .placeBet .totalStake");this._totalStakeElement=$("#totalStake","#bsDiv");this._isoCurrencyElement=$(".isoCurrency");this._totalReturnEle=$(".totalReturn");this._taxWarnEle=$("#bsDiv .totals .tax-warning");this._ttCurrencyEle=$("#bsDiv .totals .isoCurrency .total, #bsDiv .placeBet .isoCurrency");this._isoCodeData=$("#bsDiv>ul").attr("data-isocode");this._taxHeader=$("#taxWarningHeader");this._formatter=new b365.Ui.Formatter;this._isValid=function(){return typeof this._bsInst!="undefined"};this._calcTotalStake=function(n,t,i){var s=this._bsInst.getSlipType()==this._bsInst.slipBanker,h=this._betSlipController.ausMultiplesEnabled()&&!s,e=0,u,r,f,o;for(t=t?t:"st",r=0;r<n.length;r++)u=n[r].getStItem(t),u=u&&Number(u)||"",f=n[r].getStItem("ew")=="1",isNaN(u)===!1&&(u=Math.round(u*100),o=Number(n[r].getCnItem("bc")?n[r].getCnItem("bc"):n[r].getStItem("bc")?n[r].getStItem("bc"):"1"),o>1||f?(h&&this._bsInst.getSlipType()==this._bsInst.slipStandard&&n[r].getCnItem("pt")==undefined&&(f=!1),e+=Number(String(u*(f?2:1)*o))):e+=u);return $blib.pad2DP(String(e/100),i)};this._updateIfReverseIfTotals=function(n){var i=bs.getBetItems(bs.betTypeNormal),r,u=0,t=0;i&&i.length&&(r=i[0].getStItem("st"),typeof r!="undefined"&&(u=$blib.roundDecimal(String(Number(r)*(bs.getSlipType()==bs.slipReverseIF?2:1)))),(bs.getSlipType()==bs.slipIF||bs.getSlipType()==bs.slipReverseIF)&&this._setTotalToWin(),t=$blib.pad2DP(String(u),n),this._ttStkEle.text(t),document.getElementsByClassName("bs-TotalStake").length>0&&(document.getElementsByClassName("bs-TotalStake")[0].innerHTML=t),document.getElementById("totalStake")&&(document.getElementById("totalStake").innerHTML=t))};this._setTotalToWin=function(){var r=this._bsInst.getSlipType()==this._bsInst.slipReverseIF,n={},t,i,u;this._initParams(n);this._totalSingleItems(n);this._totalBetBuilderItems(n);n.someSp||this._totalCastItems(n);t=document.getElementsByClassName("totalReturn")[0];!(n.numStakes>0)||n.someSp||n.someEW||n.someRelated&&n.numStakes>1?n.someRelated?r?(u=document.getElementsByClassName("stake")[0],u.className+=" hidden"):(t=document.getElementsByClassName("totalReturnWrapper")[0],t.className+=" hidden"):n.someSp?t.innerHTML=betSlipML.sp:t&&(t.innerHTML=this._betSlipController._currencyDisplayHelper.formatCurrency("0.00")):(i=r?n.totTw*2:n.totTw,i=parseFloat(Math.floor(i*100+1e-6)/100),t.innerHTML=this._betSlipController&&this._betSlipController._currencyDisplayHelper?this._betSlipController._currencyDisplayHelper.formatCurrency(this._formatter.roundDecimal(String(i))):this._formatter.roundDecimal(String(i)))};this._setTotalToReturn=function(){var n,u,h,i,e,r,c,o;if(!this._betSlipController.complexMultiplesProcessing){var t=$("#bsDiv .bs-TotalToReturn_TextValue")[0],s=this._bsInst.getSlipType()==this._bsInst.slipReverseIF,f=this._bsInst.getSlipType()==this._bsInst.slipBanker;if(t&&(n={},this._initParams(n),n.ausMultiplesEnabled=this._betSlipController.ausMultiplesEnabled()&&!f,f&&$(t.parentElement).addClass("hidden"),this._totalSingleItems(n),this._totalBetBuilderItems(n),n.someSp||this._totalCastItems(n),n.ausMultiplesEnabled&&!n.hasSp&&this._totalMultipleItems(n),!(n.numStakes>0)||n.someSp||n.someEW||n.someRelated&&n.numStakes>1?n.ausMultiplesEnabled||(n.someRelated?s?(h=document.getElementsByClassName("stake")[0],h.className+=" hidden"):t.className+=" hidden":t&&(t.innerHTML=this._betSlipController._currencyDisplayHelper.formatCurrency("0.00"))):(u=s?n.totTw*2:n.totTw,u=parseFloat(Math.floor(u*100+1e-6)/100),t.innerHTML=this._betSlipController&&this._betSlipController._currencyDisplayHelper?this._betSlipController._currencyDisplayHelper.formatCurrency(this._formatter.roundDecimal(String(u))):this._formatter.roundDecimal(String(u))),(!n.ausMultiplesEnabled||n.ausMultiplesInvalid||n.someRelated)&&(i=$('#bsDiv .bs-MultipleBets [data-item-type="multiple"], .bs-MultipleBetsBanker [data-item-type="multiple"]'),e=0,i&&i.length>0)))for(e=i.length,r=f?0:1,r;r<e;r++)c=$(i[r]).find(".stk")[0],o=$(i[r]).find(".bs-MultipleBets_ToReturn")[0],o&&o.setAttribute("style","display:none;")}};this._initParams=function(n){n.numStakes=0;n.totTw=0;n.totalToReturn=0;n.someSp=!1;n.someEW=!1;n.someRelated=!1;n.totStk=isNaN(this._ttStkEle.text())?0:Number(this._ttStkEle.text());n.eachWayArray=[];n.ausMultiplesEnabled=!1;n.ausMultiplesInvalid=!1;n.singlesCount=0};this._totalMultipleItems=function(n){var l,t,s=$('#bsDiv .bs-MultipleBets [data-item-id="-1"]'),h,e,o,i,a,v,u,c;s&&s.length>0&&(h=$(s[0]).find(".bs-MultipleBets_BetCount")[0],h&&(h.innerHTML=n.singlesCount+"x"));l=this._betSlipController.complexMultiplesInfo.length;var f=$('#bsDiv .bs-MultipleBets .bs-MultipleBets_BetRow, .bs-MultipleBetsBanker [data-item-type="multiple"]'),p=this._bsInst.getBetItems(this._bsInst.betTypeMultiple),w=this._betSlipController._currencyDisplayHelper.getDecimalSeperator();for(t=0;t<l;t++){if(e=this._betSlipController.complexMultiplesInfo[t],o=p[t],!o){n.ausMultiplesInvalid=!0;return}if(i=e.LC,a=o.getStItem("st"),f.length>0){v=getBetslipWebModule();e.combinations?i=v.getBetCount(e.combinations,n.eachWayArray):n.ausMultiplesInvalid=!0;o.setCnItem("bc",i);this._bsInst.updateState();var b=$(f[t]).find(".bs-MultipleBets_ToReturnValue")[0],k=Number(a)*i,y=$(f[t]).find(".bs-MultipleBets_BetCount")[0],r=$(f[t]).find(".bs-MultipleBets_Stake");y&&(y.innerHTML=i+"x");r&&r.length>0&&(u=betSlipML.stake,i>1&&(u=betSlipML.unitstake),r[0].getAttribute("placeholder")!=u&&r.attr("placeholder",u),c=r.val(),(c==betSlipML.unitstake||c==betSlipML.stake)&&r.val(u))}}stakeDisplay=this._calcTotalStake(this._bsInst.getBetItems(this._bsInst.betTypeAll),undefined,w);this._ttStkEle.text(stakeDisplay);document.getElementsByClassName("bs-TotalStake").length>0&&(document.getElementsByClassName("bs-TotalStake")[0].innerHTML=stakeDisplay);document.getElementById("totalStake")&&(document.getElementById("totalStake").innerHTML=stakeDisplay)};this._totalSingleItems=function(n){var s=this._bsInst.getSlipType()==this._bsInst.slipBanker,l;n.ausMultiplesEnabled=this._betSlipController.ausMultiplesEnabled()&&!s;for(var h=new b365.Ui.Betslip.TaxCalculator(this._bsInst),v=0,i=this._bsInst.getBetItems(this._bsInst.betTypeNormal),w=window.location.host.split(".").pop()=="au",r,u,f,e,c,y,t=0,o=i.length;t<o;t++)r=$blib.getItemOdds(this._bsInst.itemTypeSingle,i[t]),u=i[t].getStItem("st"),u=u-parseFloat(u)>=0?Number(u):0,f=e=!1,c=r==""||r=="0"||r=="0/0"||i[t].getStItem("sp")=="1",c&&(n.hasSp=!0,n.ausMultiplesInvalid=!0),f=i[t].getStItem("ew")=="1",y=i[t].getCnItem("po")!=undefined,n.singlesCount++,(f||y)&&(n.singlesCount++,n.eachWayArray.push([(t+1).toString()])),u>0&&(e=c,n.someSp=n.someSp||e,n.someEW=n.someEW||f,n.numStakes++,(this._bsInst.getSlipType()==this._bsInst.slipIF||this._bsInst.getSlipType()==this._bsInst.slipReverseIF)&&n.numStakes==1&&(n.totStk=Number(u))),n.someRelated||(n.someRelated=$('#bsDiv li[data-item-id="'+t+'"][data-item-type="single"]').hasClass("bs-RestrictedCong")),e||f&&!n.ausMultiplesEnabled||(h._isFreeBet=i[t].getStItem("ft"),v=this._totalSlipItem(h,t,u,r),l=$blib.pad2DP(String(v)),n.ausMultiplesEnabled||(this._itemToReturnDisplayHelper.setReturnValue(t,"single",l),this._itemToReturnDisplayHelper.setVisibility(t,"single",!0)),n.totTw+=this._bsInst.getSlipType()==this._bsInst.slipIF?Number(this._totalSlip(h,t,u,r)):Number(l)),n.totalToReturn=n.totTw;for(t=0,o=i.length;t<o;t++){r=$blib.getItemOdds(this._bsInst.itemTypeSingle,i[t]);e=r==""||r=="0"||r=="0/0"||i[t].getStItem("sp")=="1";f=i[t].getStItem("ew")=="1";var s=this._bsInst.getSlipType()==this._bsInst.slipBanker,a=this._betSlipController.ausMultiplesEnabled()&&!s,p=bs.getSlipType()==this._bsInst.slipReverseIF;(e||f&&!a)&&!p?this._itemToReturnDisplayHelper.setVisibility(t,"single",!1,a?!1:f):f&&a&&!p?this._itemToReturnDisplayHelper.setVisibility(t,"single",!1,!0,!0):this._itemToReturnDisplayHelper.setVisibility(t,"single",!0,!1)}};this._totalBetBuilderItems=function(n){var r=this._bsInst.getBetItems(this._bsInst.betTypeBetBuilder),t,o,s,i,f,h,u,c,e;if(r&&r.length)for(f=new b365.Ui.Betslip.TaxCalculator(this._bsInst),t=0,o=r.length;t<o;t++)u=r[t],s=$blib.getItemOdds(this._bsInst.itemTypeBetBuilder,u),i=u.getStItem("st"),i=i&&parseFloat(i)||null,h=u.getStItem("ft"),f._isFreeBet=h,c=this._totalSlipItem(f,t,i,s),e=$blib.pad2DP(String(c)),this._itemToReturnDisplayHelper.setReturnValue(t,"betbuilder",e),n.totTw+=Number(e)};this._totalSlipItem=function(n,t,i,r){var u=n.calcReturnsByLine(i,r);switch(this._bsInst.getSlipType()){case this._bsInst.slipReverseIF:t!==0&&(u=this._formatter.roundFixed(u,2)-this._formatter.roundFixed(i,2))}return u};this._totalSlip=function(n,t,i,r){var u=n.calcReturnsByLine(i,r);return t!==0&&(u=this._formatter.roundFixed(u,2)-this._formatter.roundFixed(i,2)),u};this._totalCastItems=function(n){for(var o=new b365.Ui.Betslip.TaxCalculator(this._bsInst),r=this._bsInst.getBetItems(this._bsInst.betTypeCast),i,u,e,t=0,f=r.length;t<f&&!n.someSp;t++)i=$blib.getItemOdds(this._bsInst.betTypeCast,r[t]),o._isFreeBet=r[t].getStItem("ft"),u=r[t].getStItem("st"),u&&parseFloat(u)!=NaN&&parseFloat(u)>0&&(n.numStakes++,n.someSp=n.someSp||i==""||i=="0"||i=="0/0"||r[t].getStItem("sp")=="1",n.someRelated||(n.someRelated=$('#bsDiv li[data-item-id="'+t+'"][data-item-type="cast"]').hasClass("bs-RestrictedCong"))),n.someSp||(e=o.calcReturnsByLine(u,i),this._itemToReturnDisplayHelper.setReturnValue(t,"cast",$blib.pad2DP(String(e))),n.totTw+=e,n.totalToReturn+=Number(e));for(t=0,f=r.length;t<f;t++)i=$blib.getItemOdds(this._bsInst.betTypeCast,r[t]),n.someSp=i==""||i=="0"||i=="0/0"||r[t].getStItem("sp")=="1",n.someSp?this._itemToReturnDisplayHelper.setVisibility(t,"cast",!1):this._itemToReturnDisplayHelper.setVisibility(t,"cast",!0)};this._hasMultiplesWithStake=function(){for(var r=this._bsInst.getBetItems(this._bsInst.itemTypeMultiple),i=!1,t,n=0;n<r.length&&!i;n++)t=r[n].getStItem("st"),t&&parseFloat(t)!=NaN&&parseFloat(t)>0&&(i=!0);return i}};b365.Ui.Betslip.TotalsCalculator.prototype={calculate:function(){var i,n,s,o,t;if(this._isValid()){i=this._betSlipController.getCurrencyObject().decimalSeparator;n=0;switch(this._bsInst.getSlipType()){case this._bsInst.slipReverseIF:case this._bsInst.slipIF:this._updateIfReverseIfTotals(i);break;case this._bsInst.slipBanker:this._betSlipController&&this._betSlipController._currencyDisplayHelper&&(n=this._betSlipController._currencyDisplayHelper.formatCurrency(this._calcTotalStake(this._bsInst.getBetItems(this._bsInst.betTypeMultiple),undefined,i)));document.getElementsByClassName("bs-TotalStake").length>0&&(document.getElementsByClassName("bs-TotalStake")[0].innerHTML=n);document.getElementById("totalStake")&&(document.getElementById("totalStake").innerHTML=n);this._ttStkEle.text(n);this._setTotalToReturn();break;default:n=this._betSlipController&&this._betSlipController._currencyDisplayHelper?this._betSlipController._currencyDisplayHelper.formatCurrency(this._calcTotalStake(this._bsInst.getBetItems(this._bsInst.betTypeAll),undefined,i)):this._calcTotalStake(this._bsInst.getBetItems(this._bsInst.betTypeAll),undefined,i);this._ttStkEle.text(n);document.getElementsByClassName("bs-TotalStake").length>0&&(document.getElementsByClassName("bs-TotalStake")[0].innerHTML=n);document.getElementById("totalStake")&&(document.getElementById("totalStake").innerHTML=n);var r=this.getFreeBetItem(),f=r&&(r.getStItem("fbv")||r.getStItem("st")),u=f&&this._betSlipController._currencyDisplayHelper.formatCurrency(f),e=$("#bsDiv").children("ul:first-child").data("isocode");u?(s=new b365.Ui.Betslip.ItemInformation(r[0]),o=document.getElementsByClassName("betReceipt").length,o?(n=n===u?u+" ("+betSlipML.free+")":n+" ("+u+" "+betSlipML.free+")",this._ttStkEle.text(n),document.getElementsByClassName("bs-TotalStake").length>0&&(document.getElementsByClassName("bs-TotalStake")[0].innerHTML=n),document.getElementById("totalStake")&&(document.getElementById("totalStake").innerHTML=n)):this._isoCurrencyElement.text(e)):this._isoCurrencyElement.text(e);t={};this._initParams(t);this._totalSingleItems(t);this._totalBetBuilderItems(t);t.someSp||this._totalCastItems(t);this._bsInst.getValueFromBSCookie("fs").replace("||","")==1||document.getElementsByClassName("bs-FreeBetCheckBox-selected").length>0||document.getElementsByClassName("br-UsingFreeBet").length>0||document.getElementsByClassName("br-FreeBetIcon_Redeemed").length>0||document.getElementsByClassName("bs-MultipleBets_HighestAccumulator").length>0||document.getElementsByClassName("bs-CheckBox").length>0||this._betSlipController.ausMultiplesEnabled()?(this._freeBetHelper.calculate(),n=this._calcTotalStake(this._bsInst.getBetItems(this._bsInst.betTypeAll),undefined,this._betSlipController.getCurrencyObject().decimalSeparator),this._ttStkEle.text(n),document.getElementsByClassName("bs-TotalStake").length>0&&(document.getElementsByClassName("bs-TotalStake")[0].innerHTML=n),document.getElementById("totalStake")&&(document.getElementById("totalStake").innerHTML=n)):this._setTotalToReturn()}this._bsInst.contentChangedOnClient()}},getFreeBetItem:function(){for(var t=this._bsInst.getBetItems(this._bsInst.betTypeAll)||[],n=0,i=t.length;n<i;n++)if(t[n].getStItem("ft"))return t[n];return null}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.MultipleStakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.MultipleStakeChangedHandler.prototype={handle:function(n,t){if(n>=0){var i=this._bsInst.getBetItemById(this._bsInst.itemTypeMultiple,n),r=$blib.to2DP(t.value);Number(r)>$blib.getMaxStake()&&(t.value=String($blib.getMaxStake()));i.setStItem("st",t.value);i.setStItem("ust",t.value);this._bsController.updateMultiplesEachWayFlag();this._bsInst.updateState()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.SingleStakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.SingleStakeChangedHandler.prototype={updateAllStakes:function(n,t){var f=n,r=$('#bsDiv li[data-item-type="single"]:not(.suspended) .stake .stk'),u="",s=new b365.Ui.Betslip.ToReturnCalculator(this._bsInst),i,e,o,h;for(this._bsController&&this._bsController._currencyDisplayHelper&&(f=this._bsController._currencyDisplayHelper.unformatCurrency(n)),n!=""&&(u=$blib.pad2DP(String(f)),this._bsController._currencyDisplayHelper&&(u=this._bsController._currencyDisplayHelper.formatCurrency(u))),o=$("html").is(".ie-8, .ie-9"),i=t,e=r.length;i<e;i++)r[i].className.indexOf("bs-FreeBet-disabled")>-1||(h=$(".bs-CheckBoxBetCredit").hasClass("checked"),o&&u==""?(r[i].value=r[i].getAttribute("placeholder"),r[i].className.indexOf("bs-Stake_TextBox-placeholder")==-1&&(r[i].className+=" bs-Stake_TextBox-placeholder")):(r[i].value=u,r[i].className=r[i].className.replace("bs-Stake_TextBox-placeholder","")),this._bsInst.getBetItems(this._bsInst.itemTypeSingle)[i].setStItem("st",f),s.calculate(i,this._bsInst.itemTypeSingle,r[i]),this._bsController.getPushMarketsEnabled()&&new b365.Ui.Betslip.StakeEntryRules(this._bsController).PushBetDisplayUpdate(i,this._bsInst.itemTypeSingle,r[i]))},handle:function(n,t,i){var a=document.getElementById("bsDiv"),e,o,r,u,h,c,s,f,l;if(this._isValid()){switch(this._bsInst.getSlipType()){case this._bsInst.slipIF:new b365.Ui.Betslip.IFBetStakeChangedHandler(this._bsInst,this._bsController).handle(n,i);break;case this._bsInst.slipReverseIF:new b365.Ui.Betslip.ReverseIfBetStakeChangedHandler(this._bsInst,this._bsController).handle(n,i);break;default:new b365.Ui.Betslip.ToReturnCalculator(this._bsInst).calculate(n,t,i);this._bsController.getPushMarketsEnabled()&&new b365.Ui.Betslip.StakeEntryRules(this._bsController).PushBetDisplayUpdate(n,t,i)}if(this._bsController.getPushMarketsEnabled()&&(e=a.getElementsByClassName("single-section"),e.length>0))for(o=e[0].getElementsByTagName("li"),f=0,l=o.length;f<l;f++)r=o[f],h=r.getAttribute("data-item-push"),h>0&&(c=r.getAttribute("data-item-id"),u=r.getElementsByClassName("stk")[0],u.length>0&&(s=u.value),!isNaN(s)&&s>0&&new b365.Ui.Betslip.StakeEntryRules(scope._bsController).PushBetDisplayUpdate(c,scope._bsInst.itemTypeSingle,u));new b365.Ui.Betslip.RepeatStakeVisibilitySetter(this._bsInst).set(i)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CastStakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.CastStakeChangedHandler.prototype={handle:function(n,t,i){var c,s,h,f,l,e,a,r,u,o;this._isValid()&&(c=new b365.Ui.Formatter,s=this._bsInst.getBetItemById(t,n),i.value=$blib.isDecimal(i.value)?c.roundValue(i.value):"",e=i,s.setStItem("st",i.value),h=parseInt(s.getStItem("bc"),10),!isNaN(h)&&h>1&&(f=i.value,this._bsController._currencyDisplayHelper&&f&&f!=""&&(f=this._bsController._currencyDisplayHelper.unformatCurrency(i.value)),i.className.indexOf("totestkbc")>-1?(a=f/h*100,r=c.roundDecimal((Math.floor(a)*.01).toFixed(2)),r=r==="0.00"?"":r,r!==""&&this._bsController._currencyDisplayHelper&&(r=this._bsController._currencyDisplayHelper.formatCurrency(r)),e=document.getElementsByClassName("bs-Item")[n].getElementsByClassName("stk")[0],e&&(e.value=r,this.updateUnitStake(e)),l=r):(u=c.roundDecimal(Number(f)*h),u=u==="0.00"?"":u,u!==""&&this._bsController._currencyDisplayHelper&&(u=this._bsController._currencyDisplayHelper.formatCurrency(u)),o=document.getElementsByClassName("bs-Item")[n].getElementsByClassName("totestkbc")[0],o&&(o.className.indexOf("bs-AusCastStake_Value")==-1?(o.value=u,this.updateStake(o)):o.innerHTML=u),l=f),s.setStItem("gst",l),s.setStItem("gust",l)),this._bsInst.updateState());new b365.Ui.Betslip.ToReturnCalculator(this._bsInst).calculate(n,t,e);new b365.Ui.Betslip.RepeatStakeVisibilitySetter(this._bsInst).set(e)},updateUnitStake:function(n){var t=n.parentElement,i=t.getAttribute("class"),r=i.indexOf("showUnitStake"),u=document.getElementsByTagName("html")[0].className,f=u.indexOf("ie-8")>-1||u.indexOf("ie-9")>-1;n.value.length>0?(r==-1&&(t.setAttribute("class",i+" showUnitStake"),n.setAttribute("placeholdertext",n.getAttribute("placeholder")),n.setAttribute("placeholder","")),f&&n.className.indexOf("bs-Stake_TextBox-placeholder")>-1&&(n.className=n.className.replace(" bs-Stake_TextBox-placeholder",""))):n.value.length===0&&(r>-1&&(t.setAttribute("class",i.substring(0,r)),n.setAttribute("placeholder",n.getAttribute("placeholdertext")),n.setAttribute("placeholdertext","")),f&&(n.value=n.getAttribute("placeholder"),n.className.indexOf("bs-Stake_TextBox-placeholder")==-1&&(n.className+=" bs-Stake_TextBox-placeholder")))},updateStake:function(n){var r=document.getElementsByTagName("html")[0].className,u=r.indexOf("ie-8")>-1||r.indexOf("ie-9")>-1,t,i;n.value.length>0?(t=n.getAttribute("placeholder"),t!==""&&(n.setAttribute("placeholdertext",t),n.setAttribute("placeholder","")),u&&n.className.indexOf("bs-Stake_TextBox-placeholder")>-1&&(n.className=n.className.replace(" bs-Stake_TextBox-placeholder",""))):n.value.length===0&&(i=n.getAttribute("placeholdertext"),i!==""&&(n.setAttribute("placeholder",i),n.setAttribute("placeholdertext","")),u&&(n.value=n.getAttribute("placeholder"),n.className.indexOf("bs-Stake_TextBox-placeholder")==-1&&(n.className+=" bs-Stake_TextBox-placeholder")))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CastFlexiChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.CastFlexiChangedHandler.prototype={handle:function(n,t,i){var v,e,c,u,y,p,h,r;if(this._isValid()){if(v=new b365.Ui.Formatter,e=this._bsInst.getBetItemById(t,n),i.value=$blib.isDecimal(i.value)?v.roundValue(i.value):"",c=i.parentNode.parentNode.getElementsByClassName("bs-FlexiUnitStake_TextBox")[0],u=parseInt(e.getStItem("bc"),10),!isNaN(u)&&u>1){var o,f=i.parentNode.parentNode.getElementsByClassName("bs-FlexiUnitStake_TextBox")[0],s=i.parentNode.parentNode.getElementsByClassName("bs-FlexiPercentage_TextBox")[0],l=i.parentNode.parentNode.getElementsByClassName("bs-FlexiTotalStake_TextBox")[0],a=i.parentNode.parentNode.parentNode.getElementsByClassName("bs-RepeatStakeContainer")[0];a&&(y=this._bsInst.getBetItems(this._bsInst.betTybetTypeNormal),p=this._bsInst.getBetItems(this._bsInst.betTypeCast),!isNaN(f.value)&&f.value>0&&(p.length>1||y.length>0)?$(a).removeClass("hidden"):$(a).addClass("hidden"));h=getBetslipWebModule();i.className.indexOf("UnitStake")>-1?(r=h.getFlexiValuesFromUnitStake(f.value,u),l.value=r.totalStake,s.value=r.flexiPercentage):i.className.indexOf("Percentage")>-1?(r=h.getFlexiValuesFromPercentage(s.value,u),f.value=r.unitStake,s.value=r.flexiPercentage,l.value=r.totalStake):(r=h.getFlexiValuesFromTotalStake(l.value,u),f.value=r.unitStake,s.value=r.flexiPercentage);o=f;e.setStItem("st",o.value);e.setStItem("gst",o.value);e.setStItem("gust",o.value)}this._bsInst.updateState()}new b365.Ui.Betslip.ToReturnCalculator(this._bsInst).calculate(n,t,c);new b365.Ui.Betslip.RepeatStakeVisibilitySetter(this._bsInst).set(c)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.IFBetStakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"};this._setMaxStake=function(n,t){if(t>0){var i=this._bsInst.getBetItemById(this._bsInst.itemTypeSingle,t-1),r=i.getStItem("st")?$blib.roundValue(i.getStItem("st")):0;if(Number(r)<Number(n))return r}return n}};b365.Ui.Betslip.IFBetStakeChangedHandler.prototype={handle:function(n,t){var f,i,r,u,e;this._isValid()&&(f=this._bsInst.getBetItemById(this._bsInst.itemTypeSingle,n),i=t.value,this._bsController&&this._bsController._currencyDisplayHelper&&i&&i!=""&&(i=this._bsController._currencyDisplayHelper.unformatCurrency(i)),$blib.isDecimal(i)==!1&&(t.value="",i=""),r=$blib.roundValue(i),u=this._setMaxStake(r,n),Number(u)<Number(r)&&(t.value=this._bsController._currencyDisplayHelper?this._bsController._currencyDisplayHelper.formatCurrency(u):u,r=u),new b365.Ui.Betslip.ToReturnCalculator(this._bsInst).calculate(n,this._bsInst.itemTypeSingle,t),e=r?$blib.pad2DP(r,this._bsController.getCurrencyObject().decimalSeparator):r,f.setStItem("st",e),f.setStItem("ust",e),new b365.Ui.Betslip.SingleStakeChangedHandler(this._bsInst,this._bsController).updateAllStakes("",Number(n)+1),this._bsInst.updateState())}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ReverseIfBetStakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"};this._setMaxStake=function(n,t){if(t>0){var i=this._bsInst.getBetItemById(this._bsInst.itemTypeSingle,t-1),r=i.getStItem("st")?$blib.roundValue(i.getStItem("st")):0;return r<n?r:n}}};b365.Ui.Betslip.ReverseIfBetStakeChangedHandler.prototype={handle:function(n,t){var i,u,r;if(this._isValid()){for(i=t.value,this._bsController._currencyDisplayHelper&&i&&i!=""&&(i=this._bsController._currencyDisplayHelper.unformatCurrency(i)),$blib.isDecimal(i)==!1&&(t.value="",i=""),u=this._bsInst.getBetItems(this._bsInst.itemTypeSingle),r=0;r<u.length;r++)u[r].setStItem("st",i),u[r].setStItem("ust",i);this._bsInst.updateState()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.StakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.StakeChangedHandler.prototype={handle:function(n,t){var r,u,f,a,e,o;if(this._isValid()){var v=new b365.Ui.Betslip.ItemInformation(n),i=v.itemIndexAndType(),s,h=/(\d{0,8})?([.|,]{1}(\d{0,2}))?/,c=this._bsController.getCurrencyObject().decimalSeparator,l=c=="."?",":".";if((n.value!=n.value.match(h)[0]||n.value.indexOf(l)>-1)&&(n.value=n.value.match(h)[0].replace(l,c)),n.value.length>0&&!t)for(r=document.getElementsByClassName("errStk"),r.length>0&&this._bsController.getMessageDisplayHandler().hideMsg(betSlipML.pleaseenterstake),u=r.length-1;u>=0;u--)r[u].className=r[u].className.replace("errStk","");switch(i[1]){case"single":new b365.Ui.Betslip.SingleStakeChangedHandler(this._bsInst,this._bsController).handle(i[0],i[1],n);break;case"tote-single":case"tote-cast":case"tote-pot":new b365.Ui.Betslip.ToteStakeChangedHandler(this._bsInst,this._bsController).handle(n);break;case"cast":n.className.indexOf("Flexi")>-1?new b365.Ui.Betslip.CastFlexiChangedHandler(this._bsInst,this._bsController).handle(i[0],i[1],n):new b365.Ui.Betslip.CastStakeChangedHandler(this._bsInst,this._bsController).handle(i[0],i[1],n);break;case"multiple":i[0]!="-1"?new b365.Ui.Betslip.MultipleStakeChangedHandler(this._bsInst,this._bsController).handle(i[0],n):new b365.Ui.Betslip.SingleStakeChangedHandler(this._bsInst,this._bsController).updateAllStakes(n.value,0);break;case"betbuilder":new b365.Ui.Betslip.ToReturnCalculator(this._bsInst).calculate(i[0],this._bsInst.betTypeBetBuilder,n)}new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this._bsController).calculate();this._bsInst.placebetBtnDisabledForSpanishStakeLimit&&(s=$(".placeBet.bs-BtnWrapper","#bsDiv"),s&&s.removeClass("disabled bs-BtnDisabled"),this._bsInst.placebetBtnDisabledForSpanishStakeLimit=!1);f=document.getElementsByClassName("bs-Alert");f.length>0&&(a=f[0].getAttribute("data-closeOnStakeEdit")==="True",a&&(f[0].setAttribute("data-closeOnStakeEdit","false"),e=document.getElementsByClassName("acceptChanges"),e.length>0&&e[0].className.indexOf("hidden")==-1&&(e[0].className+=" hidden"),o=document.getElementsByClassName("placeBet"),o.length>0&&(o[0].className=o[0].className.replace(" hidden",""))))}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.StakeFocusHandler=function(n,t){this._bsInst=n;this._bsController=t};b365.Ui.Betslip.StakeFocusHandler.prototype={attachHandlers:function(){for(var n=$(".ie-8 .stk, .ie-9 .stk, .ie-8 .totestkbc, .ie-9 .totestkbc"),t,i=0;i<n.length;i++)t=$(n[i]),t.val().length==0&&(t.val(t.attr("placeholder")),t.addClass("bs-Stake_TextBox-placeholder"));if(n.length>0){n.off("focus").on("focus",function(n){var t=n.target;t.value===$(t).attr("placeholder")&&(t.value="",$(t).removeClass("bs-Stake_TextBox-placeholder"))});n.off("focusout").on("focusout",function(n){var t=n.target;t.value.length===0&&(t.value=$(t).attr("placeholder"),$(t).addClass("bs-Stake_TextBox-placeholder"))})}},removeHandlers:function(){$(".ie-8 .stk, .ie-9 .stk").off("focusout").off("focus")}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToReturnCalculator=function(n){this._bsInst=n;this._eachWayCookieKey="ew";this._taxRates=$("#bsDiv>ul").attr("data-txr");this._taxCalculationMethod=$("#bsDiv>ul").attr("data-tcm");this._WinRateIndex=3;this._ReturnRateIndex=4;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.ToReturnCalculator.prototype={calculate:function(n,t,i){var r,u,f,o,s,a,v;if(n>=0){r=this._bsInst.getBetItems(t)[n];u=$blib.to2DP(i.value);u=Number(u)>$blib.getMaxStake()?String($blib.getMaxStake()):u;f=new b365.Ui.Betslip.TaxCalculator(this._bsInst);f._isFreeBet=r.getStItem("ft");var l=$blib.getItemOdds(t,r),h=f.calcReturnsByLine(Number(u),l),c,e=r.getCnItem("po");e&&e.length>0?c=!0:r.getStItem("ew")=="1"&&(o=$('li[data-item-id="'+n+'"]').find(".placedivider"),o&&o.length&&(s=Number(o[0].getAttribute("data-place-divider")),s&&s>0&&(a=getBetslipWebModule(),e=a.getFractionalPlaceOdds(l,s),c=!0)));c&&(v=f.calcReturnsByLine(Number(u),e),h=(Number(h)+Number(v)).toString());r.setStItem("st",u);r.setStItem("ust",u);r.setStItem("tr",h);this._bsInst.updateState()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToolTipHtmlBuilder=function(n){this._ele=n;this._isValid=function(){return typeof this._ele!="undefined"}};b365.Ui.Betslip.ToolTipHtmlBuilder.prototype={getHtml:function(){var t="",i=$(this._ele).parents("[data-tooltip]:first"),n,r,u;if(i.length==1)if(i=$(i[0]),n=i.attr("data-tooltip").split("|"),$(this._ele).hasClass("ausHelp"))t=(new b365.Ui.Betslip.AusToteToolTipHtmlBuilder).getHtml(n[0]);else{r=i.parents("[data-item-id]:first");u=r.attr("data-item-type");switch(u){case"single":t=(new b365.Ui.Betslip.SingleToolTipHtmlBuilder).getHtml(r,n);break;case"tote-single":t=(new b365.Ui.Betslip.ToteSingleToolTipHtmlBuilder).getHtml(n);break;case"tote-cast":t=(new b365.Ui.Betslip.ToteCastToolTipHtmlBuilder).getHtml(this._ele,n);break;case"tote-pot":t=(new b365.Ui.Betslip.TotePotToolTipHtmlBuilder).getHtml(n);break;case"cast":t=$(this._ele).parents().hasClass("toteLeg")?(new b365.Ui.Betslip.TotePotToolTipHtmlBuilder).getHtml(n):(new b365.Ui.Betslip.CastToolTipHtmlBuilder).getHtml(r,n)}}return t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.StakeToolTipHtmlBuilder=function(n){this._ele=n;this._isValid=function(){return typeof this._ele!="undefined"}};b365.Ui.Betslip.StakeToolTipHtmlBuilder.prototype={getStakeHtml:function(n,t){var r="",i=$(this._ele).parents("[data-tooltip]:first"),t;return i.length==1&&(i=$(i[0]),t=i.attr("data-tooltip"),r="<label  className='ttHead'>"+t+"<\/label><br />"),r}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PlaceBetClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.PlaceBetClickHandler.prototype={handle:function(n){var f,o,t,r,s,e,u,i;this._isValid()&&(f=new b365.Ui.Betslip.Validation.PlaceBetValidator(this._bsInst,this._bsController),u=$(n),u.hasClass("disabled")||u.hasClass("failed-min-odds")||(i=u.attr("data-atype"),i=="cnf"?(typeof window.MyBetsController!="undefined"&&window.MyBetsController.isInitialised()&&window.MyBetsController.disableButtonEvents(),this.updateStakes(),this._bsInst.confirmBets()):i=="cnf-ref"?(typeof window.MyBetsController!="undefined"&&window.MyBetsController.isInitialised()&&window.MyBetsController.disableButtonEvents(),this.updateStakes(),this._bsInst.referBets()):i=="clr"?this._bsInst.refresh():i==="bc-startcall"?(r=f.validate(!0),r&&(this._bsController.getPushMarketsEnabled()&&this._bsInst.backupPushBetPreSplitBSCookieValue(this._bsInst._betSlipCookieKey),this._bsInst.placeBets())):(typeof window.MyBetsController!="undefined"&&window.MyBetsController.isInitialised()&&window.MyBetsController.disableButtonEvents(),e=document.getElementById("totalStake"),s=Number(e.textContent||e.innerText)==0,s||this.updateStakes(),r=f.validate(i==="bc-startcall"||u.hasClass("placeCTCBet")),n.length>0&&(t=$(n[0].parentNode).find("#buttonContent"),t.length==0&&(t=n.find("button"),t.length>0&&(o=t[0].innerHTML,t=document.createElement("div"),t.setAttribute("id","buttonContent"),t.setAttribute("style","display:none;"),t.innerHTML=o,n[0].parentNode.appendChild(t),t=null)),r&&(n[0].innerHTML='<button><span  className="buttonSpinner"><\/span><\/button>')),r&&(this._bsController.getPushMarketsEnabled()&&this._bsInst.backupPushBetPreSplitBSCookieValue(this._bsInst._betSlipCookieKey),this._bsInst.placeBets()))))},updateStakes:function(){var t=$(".betslipWrapper input.stk"),n,r,i,u;if(this._bsInst.getSlipType()!=this._bsInst.slipIF&&t.length>0)for(n=0,r=t.length;n<r;n++)t[n].id!="mltsngstk"&&t[n].tagName=="INPUT"&&(t[n].type=="text"||t[n].type=="number"||t[n].type=="tel")&&(i=t[n].value?$blib.pad2DP(t[n].value,this._bsController.getCurrencyObject().decimalSeparator):t[n].value,i=i.replace(",","."),i=i.replace("..","."),i&&(u=new b365.Ui.Formatter,$blib.isDecimal(i)&&(t[n].value=u.roundValue(i))),new b365.Ui.Betslip.StakeChangedHandler(this._bsInst,this._bsController).handle(t[n]))}};Type.registerNamespace("b365.Ui.Betslip.Validation");b365.Ui.Betslip.Validation.PlaceBetValidator=function(n,t){this._bsInst=n;this._bsController=t;this._noStakeCss className="errStk";this._isValid=function(){return typeof this._bsInst!="undefined"};this._defaultValidator=function(n){var i="",c=this,r=$("#bsDiv"),f,s,u,t=0,e,n=n?n:$(".bs-BetCall_CallBtn",r).length>0,h,o;return this._bsController._delegates.isAuthenticated()?n?this._bsController.betCallEnabled()||(i="INTERNAL MESSAGE: CTC DISABLED"):(e=$(".bs-Footer .totalStake, .bs-ConfirmationFooter .totalStake",r),e.length>0&&(t=$(e[0]).text()),this._bsController&&this._bsController._currencyDisplayHelper&&(t=this._bsController._currencyDisplayHelper.unformatCurrency(t)),t=Number(t),h=document.getElementsByClassName("bs-FreeBet-selected"),(isNaN(t)||t==0)&&h.length==0?(this._bsController._noStakeCount=this._bsController._noStakeCount+1,u=$(".stk",r),o=u,f=$(".bs-MultipleBets"),f.length>0&&(s=$("ul:first-child",f),s.hasClass("closed")&&(o=u.filter(':not(".bs-MultipleBets_Stake")'))),this._bsController._enhancedBetSlipAnimations.shakeStakeFields(o,r,null,[],null),u.each(function(){var n=new b365.Ui.Betslip.ItemInformation($(this)).itemElement();n.addClass(c._noStakeCssClass)}),i=this._bsController._noStakeCount>2?betSlipML.pleaseenterstake:"INTERNAL MESSAGE: NOT VALIDATED"):this._bsController._noStakeCount=0):(i="INTERNAL MESSAGE: NOT LOGGED IN",this._bsController._noStakeCount=0),i}};b365.Ui.Betslip.Validation.PlaceBetValidator.prototype={validate:function(n){var t=this._defaultValidator(n),i;if(t=="")switch(this._bsInst.getSlipType()){case this._bsInst.slipIF:t=new b365.Ui.Betslip.Validation.IfPlaceBetValidator(this._bsInst).validate();break;case this._bsInst.slipUSTote:t=new b365.Ui.Betslip.Validation.UsTotePlaceBetValidator(this._bsInst).validate();break;case this._bsInst.slipUKTote:t=new b365.Ui.Betslip.Validation.UkTotePlaceBetValidator(this._bsInst).validate();break;case this._bsInst.slipETote:t=new b365.Ui.Betslip.Validation.ETotePlaceBetValidator(this._bsInst).validate()}if(t==""&&window.location.host.split(".").pop()=="it"&&(t=new b365.Ui.Betslip.Validation.ItalyBetValidator(this._bsInst).validate()),t!="")switch(t){case"INTERNAL MESSAGE: NOT VALIDATED":break;case"INTERNAL MESSAGE: CTC DISABLED":this._bsController.getMessageDisplayHandler().showMsg({message:betSlipML.callUnsuccessful,message2:betSlipML.pleaseCall});break;case"INTERNAL MESSAGE: NOT LOGGED IN":this._bsController.clientEnhancedMode()?this._bsController._stakeEntryType==this._bsController._stakeEntryTypes.stakePad&&this._bsController._stakeEntryHander&&this._bsController._stakeEntryHander._isShowing?(i=$("#stakePad"),i.length>0?this._bsController._enhancedBetSlipAnimations.hideStakePad(i,!0,this._bsController.clientLoginDelegate,[],this._bsController):this._bsController.clientLoginDelegate()):this._bsController.clientLoginDelegate():this._bsController.clientLoginDelegate();break;default:this._bsController.getMessageDisplayHandler().showMsg(t);this._bsInst.changeBetslipHeight()}return t==""}};Type.registerNamespace("b365.Ui.Betslip.Validation");b365.Ui.Betslip.Validation.ETotePlaceBetValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.Validation.ETotePlaceBetValidator.prototype={validate:function(){var f="",n,i,s,r;if(this._isValid()){var t=!0,e=this._bsInst._betItems,u=e.length-1,o=betSlipML.etoteinvalidstake;for(n=u;n>-1&&t;n--)i=e[n].getStItem("gst"),isNaN(i)||i==""||(t=Number(i)>0?/^([1]\d+|[1-9]\d*)(\.[0-9]{1,2}?)?$/.test(i):!1);if(t){for(u=this._bsInst._betCastItems.length-1,s=this._bsInst._betCastItems,n=u;n>-1&&t;n--)r=Number(s[n].getStItem("gst")),!isNaN(r)&&Number(r)>0&&(t=/^([1]\d+|[1-9]\d*)(\.[0-9]{1,2}?)?$/.test(r));t||(o=betSlipML.exactainvalidstake)}t||(f=o)}return f}};Type.registerNamespace("b365.Ui.Betslip.Validation");b365.Ui.Betslip.Validation.IfPlaceBetValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.Validation.IfPlaceBetValidator.prototype={validate:function(){var i="",t,n,r;if(this._isValid())if(t=this._bsInst.getBetItems(this._bsInst.itemTypeSingle),t.length<2)i=betSlipML.ifbetminselections;else for(n=1;n<t.length;n++)r=t[n].getStItem("st"),(isNaN(r)||Number(r)==0)&&(i=betSlipML.pleaseenterstakeorrisk,$('#bsDiv li[data-item-id="'+n+'"] input:text[data-inp-type]').addClass(this._noStakeCssClass));return i}};Type.registerNamespace("b365.Ui.Betslip.Validation");b365.Ui.Betslip.Validation.UkTotePlaceBetValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.Validation.UkTotePlaceBetValidator.prototype={validate:function(){var t="",i,u,o,r,f,e;if(this._isValid()){var n=!0,h=this._bsInst._betItems,s=h.length-1;for(i=s;i>-1&&n;i--)u=h[i].getStItem("gst"),isNaN(u)||u==""||(Number(u)>0?(u=u.replace(/^0+/,""),n=/^([1]\d+|[2-9]\d*)(\.[0-9]{1}0?)?$/.test(u)):n=!1);if(n){for(s=this._bsInst._betCastItems.length-1,o=this._bsInst._betCastItems,i=s;i>-1&&n;i--)if(r=Number(o[i].getStItem("gst")),!isNaN(r)&&Number(r)>0){f=Number(o[i].getStItem("bc"));f=isNaN(f)?1:f;e=$blib.roundDecimal(String(r*f));switch(o[i].getCnItem("cm")){case"6":n=/^2(\.00?)?$/.test(r);t=n?t:betSlipML.toteperunitstake;break;case"7":n=/^[0-9]\d*(\.(([1-9]{1}0?)|00))?$/.test(r);n&&(n=/^([1]\d+|[2-9])\d*(\.[0-9]{1}0?)?$/.test(e));t=n?t:betSlipML.totesuper7perunitstake;break;case"U":case"P":n=/^[0-9]\d*(\.[0-9]{1}0?)?$/.test($blib.roundDecimal(String(r)))&&/^[1-9]\d*(\.[0-9]{1}0?)?$/.test(e);t=n?t:betSlipML.toteinvalidstake;break;case"J":n=/^[1-9]\d*(\.[05]{1}0?)?$/.test(e);t=n?t:betSlipML.totejackpotinvalidstake;break;default:n=/^[0-9]\d*(\.(([1-9]{1}0?)|00))?$/.test(r);n&&(n=/^([1]\d+|[2-9])\d*(\.[0-9]{1}0?)?$/.test(e));t=n?t:betSlipML.minstaketote}}}else t=betSlipML.minstaketote}return t}};Type.registerNamespace("b365.Ui.Betslip.Validation");b365.Ui.Betslip.Validation.UsTotePlaceBetValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.Validation.UsTotePlaceBetValidator.prototype={validate:function(){var r="",n,u,o,e;if(this._isValid()){var t=!0,i=this._bsInst._betItems,f=i.length-1;for(n=f;n>-1&&t;n--)u=i[n].getStItem("gst"),isNaN(u)||u==""||(t=this.checkstake(u));if(t)for(i=this._bsInst._betCastItems,f=i.length-1,n=f;n>-1&&t;n--)o=i[n],e=i[n].getStItem("gust"),isNaN(e)||(t=this.checkstake(e),r=t?"":r=betSlipML.ustotecastsinvalid);else r=betSlipML.ustotesinglesinvalid}return r},checkstake:function(n){var t=parseFloat(n);return t<2?!1:t%parseInt(n)==0}};Type.registerNamespace("b365.Ui.Betslip.Validation");b365.Ui.Betslip.Validation.ItalyBetValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.Validation.ItalyBetValidator.prototype={validate:function(){var w="",i,n,c,g,s,e,nt,t,o,l,h,tt,it,a,v,b,u,rt,k,d,f=!1,y=!1,r,p=!1;if(this._isValid()){for(h=/^([1]\d+|[2-9]\d*)(\.00?)?$/,it=/^(\d+?)(\.(25|50?|75|00?))?$/,tt=/^(\d+?)(\.(50?|00?))?$/,a=/^(\d+?)(\.(05?|10?|15|20?|25|30?|35|40?|45|50?|55|60?|65|70?|75|80?|85|90?|95|00?))?$/,i=!0,c=this._bsInst._betItems,g=c.length-1,b=this._bsInst.getSlipType()==this._bsInst.slipBanker,t=g;t>-1&&i;t--){n=c[t].getStItem("st");f=!1;y=!1;p=!1;type=c[t].getStItem("_tp");switch(type){case"v":f=!0;break;case"f":y=!0;break;case"t":p=!0}if(typeof n!="undefined"&&n!=""&&(n=n.replace(",","."),n=n.replace("..","."),f?(r=1,s=tt):y?(r=3,s=h):p?(r=2,s=h):window.pushedConfig.getIsPSQFV4Enabled()?(r=1,s=a):(r=2,s=h),!isNaN(n)&&n!=""&&n!="0"&&n!="0.00"))if(Number(n)>=r)i=s.test(Number(n));else{i=!1;break}}for(u=this._bsInst._betCastItems,rt=u.length-1,t=rt;t>-1&&i;t--)if((n=u[t].getStItem("st"),f=u[t].getStItem("_tp")==="v",typeof n!="undefined"&&n!="")&&(n=n.replace(",","."),n=n.replace("..","."),o=Number(u[t].getCnItem("bc")?u[t].getCnItem("bc"):u[t].getStItem("bc")?u[t].getStItem("bc"):"1"),o>0&&!b&&f?(k=Number(String(n*o)),d=it):(k=Number(n),d=h),!isNaN(n)&&n!=""&&n!="0"&&n!="0.00"))if(Number(n)>=.25&&Number(k)>=1)i=d.test(Number(n));else{i=!1;break}for(e=this._bsInst._betMltItems,nt=e.length-1,t=nt;t>-1&&i;t--)if((n=e[t].getStItem("st"),typeof n!="undefined"&&n!="")&&(n=n.replace(",","."),n=n.replace("..","."),o=Number(e[t].getCnItem("bc")?e[t].getCnItem("bc"):e[t].getStItem("bc")?e[t].getStItem("bc"):"1"),o>1||o>0&&!b&&f?(l=Number(String(n*o)),v=a,r=1):(l=Number(n),window.pushedConfig.getIsPSQFV4Enabled()?(r=1,v=a):(r=2,v=h)),!isNaN(n)&&n!=""&&n!="0"&&n!="0.00"))if(Number(n)>=.05&&(Number(l)>=r||f&&Number(l)>=r))i=v.test(Number(n));else{i=!1;break}i||(w=p?betSlipML.minstakeitalyracingpools:y?betSlipML.minstakeitalyracing:f?betSlipML.minstakeitalyvirtuals:window.pushedConfig.getIsPSQFV4Enabled()?betSlipML.minstakeitalyv4:betSlipML.minstakeitaly)}return w===""?"":{message:w,force:!0}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.MessageDisplayHandler=function(n){this._bsInst=n;this._cachedOptions=null;this._currentMessage=null;this._messageStack=[];this._transitioning=!1;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.MessageDisplayHandler.prototype={showMsg:function(n,t){var i,u,r;if(this._isValid()){if(typeof n=="string"&&(n={message:n,className:t,priority:1,force:!1}),typeof n.priority=="undefined"&&(n.priority=1),!n.force&&!this._transitioning){if(r=this.findCurrentMessage(),this._currentMessage||(this._currentMessage=this.findCurrentMessage()),this._currentMessage&&this._currentMessage.priority>n.priority||r&&r.priority>n.priority){this._messageStack.push(n);return}if(this._currentMessage){if(this.areSame(n,this._currentMessage)&&r!=null)return;this._messageStack.push(this._currentMessage)}}this._currentMessage=n;typeof n.className=="undefined"&&(n.className="bs-Alert");i=$(".bs-Alert");i.addClass(n.className);typeof n.message className=="undefined"&&(n.message className="bs-Alert_Msg");u='<div  className="'+n.messageClass+'">'+n.message+"<\/div>";typeof n.message2!="undefined"&&n.message2!==""&&(typeof n.message2 className=="undefined"&&n.message2 className===""&&(n.message2 className="bs-Alert_Msg"),u+='<div  className="'+n.message2Class+'">'+n.message2+"<\/div>");i.html(u);i.removeClass("hidden");$(".bs-MultipleBets_Error").addClass("hidden");this._bsInst.contentChangedOnClient()}},hideMsg:function(n){var i,t,r;if(this._isValid()){if(n){for(typeof n=="string"&&(n={message:n}),i=this.findCurrentMessage(),t=this._messageStack.length-1;t>=0;t--)this.areSame(n,this._messageStack[t])&&this._messageStack.splice(t,1);if(i&&!this.areSame(n,i))return}this._currentMessage=null;this._transitioning=!0;r=this._messageStack.pop();r?this.showMsg(r):($(".bs-MultipleBets_Error").removeClass("hidden"),$(".bs-Alert").removeClass().addClass("bs-Alert hidden"));this._transitioning=!1;this._bsInst.contentChangedOnClient()}},clear:function(){this._cachedOptions=null;this._messageStack=[];this.hideMsg()},cacheMessage:function(n){this._cachedOptions=n},showCachedMessage:function(){this._cachedOptions&&this.showMsg(this._cachedOptions);this._cachedOptions=null},findCurrentMessage:function(){var n=$(".bs-Alert");if(this._transitioning||n.length==0||n.hasClass("hidden"))return null;var t=n.children(),i=t.eq(0).html(),r=t.eq(1).html();return i==""&&r==""?null:{className:n.attr("class"),message:i,messageClass:t.eq(0).attr("class"),message2:r,message2Class:t.eq(1).attr("class"),priority:1}},areSame:function(n,t){var i,r;return i=!n.message||!t.message?n.message===t.message:n.message.replace(/<(?:.|\n)*?>/gm,"")===t.message.replace(/<(?:.|\n)*?>/gm,""),r=!n.message2||!t.message2?n.message2===t.message2:n.message.replace(/<(?:.|\n)*?>/gm,"")===t.message.replace(/<(?:.|\n)*?>/gm,""),i&&r}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PlaceBetRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.PlaceBetRequestDespatcher.prototype={despatch:function(){this._isValid()&&new b365.Ui.Betslip.Validation.PlaceBetValidator(this._bsInst,this._bsController).validate()&&this._bsInst.req(this._bsInst.reqTypePlaceBet,"","",this._bsController)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ReferBetRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.ReferBetRequestDespatcher.prototype={despatch:function(){if(this._isValid()&&new b365.Ui.Betslip.Validation.PlaceBetValidator(this._bsInst,this._bsController).validate()){var t="",n=document.getElementById("refCode");n&&(t="refCode="+n.getAttribute("data-refCode")+"&reftime="+n.getAttribute("data-refTime"));this._bsInst.postPayload=t;this._bsInst.req(this._bsInst.reqTypeReferBet,"","",this._bsController);this._bsInst.postPayload="";new b365.Ui.Betslip.ItemSubscriptionManager(this._bsInst,this._bsController).unsubscribe()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.MaxBetReqCompleteHandler=function(n,t){this._bsInst=n;this._bsController=t;this._serverErrorReqType=99;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.MaxBetReqCompleteHandler.prototype={handle:function(n){var r;if(this._isValid()){var u=n[0],i=n[1][7][1].split("=")[1].split("-"),t=u.split("|");if(t[1]!=""&&t[0]!="E"&&this._bsController.getMessageDisplayHandler().showMsg(t[1]),t[0]!="E"&&t[0]!="L"){r=$blib.pad2DP(t[0]);switch(i[0]){case"M":new b365.Ui.Betslip.MultiplesMaxBetReqCompleteHandler(this._bsInst).handle(i[1],r);break;case"N":$("#mltsngstk").val("");new b365.Ui.Betslip.SinglesMaxBetReqCompleteHandler(this._bsInst,this._bsController).handle(i[1],r);break;case"C":new b365.Ui.Betslip.CastMaxBetReqCompleteHandler(this._bsInst,this._bsController).handle(i[1],r);break;case"B":new b365.Ui.Betslip.BetBuilderMaxBetReqCompleteHandler(this._bsInst,this._bsController).handle(i[1],r)}}else t[0]=="E"&&this._bsController.getMessageDisplayHandler().showMsg(betSlipML.pleaselogin);new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this._bsController).calculate()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.MultiplesMaxBetReqCompleteHandler=function(n){this._bsInst=n;this._serverErrorReqType=99;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.MultiplesMaxBetReqCompleteHandler.prototype={handle:function(n,t){if(this._isValid()){var i=$("li[data-item-type='multiple'][data-item-id='"+n+"'] input[data-inp-type='mltstk']");i.length>0&&(i[0].value=t,this._bsInst.getBetItemById(this._bsInst.itemTypeMultiple,n).setStItem("st",t),this._bsInst.updateState())}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.SinglesMaxBetReqCompleteHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.SinglesMaxBetReqCompleteHandler.prototype={handle:function(n,t){if(this._isValid()){var i=$("li[data-item-type='single'][data-item-id='"+n+"'] input[data-inp-type='sngstk']");i.length>0&&(i[0].value=t,this._bsInst.getBetItemById(this._bsInst.itemTypeSingle,n).setStItem("st",t),new b365.Ui.Betslip.StakeChangedHandler(this._bsInst,this._bsController).handle(i[0]),this._bsInst.updateState())}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CastMaxBetReqCompleteHandler=function(n,t){this._bsInst=n;this._bsController=t;this._serverErrorReqType=99;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.CastMaxBetReqCompleteHandler.prototype={handle:function(n,t){if(this._isValid()){var i=$("li[data-item-type='cast'][data-item-id='"+n+"'] input[data-inp-type='cststk']");i.length>0&&(i[0].value=t,this._bsInst.getBetItemById(this._bsInst.itemTypeCast,n).setStItem("st",t),this._bsInst.updateState());i[0].className.indexOf("Flexi")>-1?new b365.Ui.Betslip.CastFlexiChangedHandler(this._bsInst,this._bsController).handle(n,"cast",i[0]):new b365.Ui.Betslip.CastStakeChangedHandler(this._bsInst,this._bsController).handle(n,"cast",i[0])}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.InstanceEventAttacher=function(n,t){this._bsInst=n;this._controller=t;this._betSlipResponsiveClickHandler=null;this._betSlipClickHandler=new b365.Ui.Betslip.BetslipClickHandler(this._bsInst,this._controller);this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._controller!="undefined"}};b365.Ui.Betslip.InstanceEventAttacher.prototype={attach:function(){if(this._isValid()){var n=this,t=$("#bsDiv");t.change(function(t){new b365.Ui.Betslip.BetslipChangeHandler(n._bsInst,n._controller).handle(t)});n._betSlipResponsiveClickHandler===null&&(n._betSlipResponsiveClickHandler=new b365.Ui.Betslip.ResponsiveClickHandler(t[0],$.proxy(n._betSlipClickHandler.handle,n._betSlipClickHandler),!1));this._bsInst.addOnHandleInProg(function(t,i){new b365.Ui.Betslip.InProgressDisplayHandler(t,n._controller).handle(i)});this._bsInst.addOnPBetError(function(t){new b365.Ui.Betslip.PlaceBetErrorHandler(t,n._controller).handle()});this._bsInst.addOnAddBet(function(t,i){new b365.Ui.Betslip.AddBetHandler(t,n._controller).handle(i)});this._bsInst.addOnPlaceBet(function(t,i){new b365.Ui.Betslip.PlaceBetRequestDespatcher(t,n._controller).despatch(i)});this._bsInst.addOnLock(function(t,i){new b365.Ui.Betslip.LockUnlockHandler(t,n._controller).handle(i)});this._bsInst.addOnReqComplete(function(t,i){new b365.Ui.Betslip.ReqCompleteHandler(t,n._controller).handle(i,n._controller)});this._bsInst.addOnConfirmBet(function(t){new b365.Ui.Betslip.ConfirmBetRequestDespatcher(t,n._controller).despatch()});this._bsInst.addOnContentLoaded(function(t,i){n._controller.OnBetslipContentLoaded(i)});this._bsInst.addOnUpdateState(function(n,t){new b365.Ui.Betslip.UpdateStateHandler(n).handle(t)});this._bsInst.addOnRestoreState(function(n,t){new b365.Ui.Betslip.RestoreStateHandler(n).handle(t)});$("#bsDlg").on("click",function(t){new b365.Ui.Betslip.DialogClickHandler(n._bsInst,n._controller).handle(t)});$("#bsCD").on("click",function(t){new b365.Ui.Betslip.ConfirmationDialog(n._bsInst,n._controller).handleClick(t)});this._bsInst.addOnPoll(function(t,i){new b365.Ui.Betslip.PollBetRequestDespatcher(t,n._controller).despatch(i)});this._bsInst.addOnPollExpired(function(t,i){new b365.Ui.Betslip.PollingExpiredHandler(t,n._controller).handle(i)});this._bsInst.addOnReferBet(function(t,i){new b365.Ui.Betslip.ReferBetRequestDespatcher(t,n._controller).despatch(i)});$("#BetSlipForm").submit(function(t){var i=t.keyCode?t.keyCode:t.charCode;i==13?(t.preventDefault(),t.stopPropagation(),n._controller.placeBet()):(t.preventDefault(),t.stopPropagation(),t.returnValue=!1)});this._bsInst.addOnHideBetSlip(function(t){new b365.Ui.Betslip.ItemSubscriptionManager(t,n._controller).unsubscribe();var i=$("#bsDiv .betReceipt");i.length>0&&i.is(".visible")&&n._controller.itemsRemoved()})}},addOnBetAdded:function(n){this._bsInst.addOnBetAdded(function(t,i){n(t,i)})},addOnBetAddedReqComplete:function(n){this._bsInst.addOnBetAddedReqComplete(function(t){n(t)})},addOnEditBet:function(n){this._bsInst.addOnEditBet(function(t){n(t)})},addOnRefreshReqComplete:function(n){this._bsInst.addOnRefreshReqComplete(function(t){n(t)})},addOnBetSlipItemsChanged:function(n){this._bsInst.addOnBetSlipItemsChanged(function(t){n(t)})},addOnAcceptChanges:function(n){this._bsInst.addOnAcceptChanges(function(t){n(t)})},addOnBetSlipLoaded:function(n){this._bsInst.addOnBetSlipLoaded(function(t){n(t)})},addOnMaxSelections:function(n){this._bsInst.addOnMaxSelections(function(t){n(t)})},addOnBetslipDisplayed:function(n){this._bsInst.addOnBetslipDisplayed(function(t){n(t)})},addOnPlaceBet:function(n){this._bsInst.addOnPlaceBet(function(t){n(t)})},addOnPlaceBetSuccess:function(n){this._bsInst.addOnPlaceBetSuccess(function(t){n(t)})},addOnAddBetslipFooterLinks:function(n){this._bsInst.addOnAddBetslipFooterLinks(function(t){n(t)})},addOnAddReceiptHeaderLinks:function(n){this._bsInst.addOnAddReceiptHeaderLinks(function(t){n(t)})},addOnAddReceiptLiveAlertSignUp:function(n){this._bsInst.addOnAddReceiptLiveAlertSignUp(function(t){n(t)})},addOnBetslipError:function(n){this._bsInst.addOnBetslipError(function(t){n(t)})},addOnShowBetSlip:function(n){this._bsInst.addOnShowBetSlip(function(t){n(t)})},addOnHideBetSlip:function(n){this._bsInst.addOnHideBetSlip(function(t){n(t)})},addOnChangeBetslipHeight:function(n){this._bsInst.addOnChangeBetslipHeight(function(t){n(t)})},addOnPopupShow:function(n){this._bsInst.addOnPopupShow(function(t,i){n(t,i)})},addOnPopupHide:function(n){this._bsInst.addOnPopupHide(function(t){n(t)})},addOnSessionExpired:function(n){this._bsInst.addOnSessionExpired(function(t,i){n(t,i)})},addOnContentChangedOnClient:function(n){this._bsInst.addOnContentChangedOnClient(function(t){n(t)})},addOnDeleteBetReqComplete:function(n){this._bsInst.addOnDeleteBetReqComplete(function(t){n(t)})},addOnAddBetFailed:function(n){this._bsInst.addOnAddBetFailed(function(){n()})}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ReqCompleteHandler=function(n,t){this._bsInst=n;this._bsController=t;this._serverErrorReqType=99;this._betSlipDialogIndicator="BET_SLIP_DIALOG";this._showDlg=!1;this._resetButtonState=!0;this._hideInProg=!0;this._dlg=null;this._isValid=function(){return typeof this._bsInst!="undefined"};this._handleServerError=function(n){var t=this._bsController&&this._bsController.GetCurrentDialogRef();t&&t.hideDialog();$("#bsDiv").html(n[0])};this._handleDialogReqComplete=function(n){n[0]=n[0].replace(this._betSlipDialogIndicator,"");this._showDlg=!0;this._dlg=new b365.Ui.Betslip.DialogReqCompleteHandler(this._bsInst,this._bsController).handle(n)};this._pollingContinuesHandler=function(n,t){this._resetButtonState=!1;var i=new b365.Ui.Betslip.PollingContinuesReqCompleteHandler(this._bsInst).handle(n,t);this._hideInProg=i.pollStatus!==b365.Ui.BetslipAPI.Polling.PollStatusEnum.StartOrContinue};this._showPushDialog=function(n){var t,f,e,u,i,r;if(n)for(t=0,f=n.length;t<f;t++)if(e=this._bsInst._betItems[n[t].getAttribute("data-item-id")],u="P2"+n[t].getAttribute("data-item-fpid"),this._bsController.getPushPopupStatus(u)&&(i=parseInt(n[t].getAttribute("data-item-push"),10),i>0)){r=new b365.Ui.Betslip.PushBetDialog(this._bsInst,this._bsController,e.getCn(),i,n[t].getAttribute("data-item-id"),n[t].getAttribute("data-item-type"),u);this._bsController.showPushbetDialog(r,r._proceedAction,r._cancelAction,i);break}};this._defaultHandler=function(n){var t=this,e,s,h,o,f,c,r,l,u,i=n[0];if(t._bsController.clientEnhancedMode()&&t._bsController.clientBetSlipShowing()){if(i.indexOf("betReceipt")>-1){t._doStandardDOMUpdate(i,!1);return}if(t._bsController._stakeEntryType==t._bsController._stakeEntryTypes.stakePad)if(e=$("#stakePad"),e.length>0){if(s=e[0].getAttribute("data-item"),h=e[0].getAttribute("data-type"),o=document.createElement("div"),o.innerHTML=i,u=o.getElementsByTagName("li"),u.length>0)for(r=0,l=u.length;r<l;r++)if(u[r].getAttribute("data-item-id")==s&&u[r].getAttribute("data-item-type")==h){f=u[r];break}f?(f.innerHTML=f.innerHTML+t._bsController._stakeEntryHander.getStakePadMarkUp(s,h,!0),c=$("input",f),t._compareMultiplesAndRenderDOM(o.innerHTML,!0,!1),t._bsController._stakeEntryHander.enableOrDisableKeys(c)):t._compareMultiplesAndRenderDOM(i,!1,!0)}else t._compareMultiplesAndRenderDOM(i,!1,!1);else t._compareMultiplesAndRenderDOM(i,!1,!1)}else t._doStandardDOMUpdate(i,!1)};this._compareMultiplesAndRenderDOM=function(n,t,i){var r=this,l=!1,a=!1,o,s,u,f,h,e,v=!1,y,c;if(o=document.createElement("div"),o.innerHTML=n,s=o.getElementsByTagName("li"),s.length>0){for(f=0,h=s.length;f<h;f++)if(s[f].getAttribute("class")=="multiple-section multipleBets"){u=$('li[class$="multiple-section multipleBets"]',"#bsDiv");u.length>0&&u[0].children[0].getAttribute("class")=="open"&&(a=!0);l=!0;break}if(l)if(a){for(u=$('li[data-item-type$="multiple"]'),f=0,h=u.length;f<h;f++)y=u[f].getAttribute("data-item-id"),n.indexOf('li data-item-id="'+y+'" data-item-type="multiple"')==-1&&(u[f].setAttribute("animate","yes"),v=!0);v?(r._createAndDisplayBetSlipContainerClone(i),u=$('li[data-item-type$="multiple"][animate$="yes"]',"#bsDivClone"),r._doStandardDOMUpdate(n,t),e=$("#bsDivClone"),i?(c=$("#stakePadClone","#bsDivClone"),r._bsController._enhancedBetSlipAnimations.hideBetMultiples(u,e,!0,c,r._removeCloneAndShowLiveBetSlipContainer,[],r)):r._bsController._enhancedBetSlipAnimations.hideBetMultiples(u,e,!1,null,r._removeCloneAndShowLiveBetSlipContainer,[],r)):r._doStandardDOMUpdate(n,t)}else r._doStandardDOMUpdate(n,t);else{if(u=$('li[class$="multiple-section multipleBets"]',"#bsDiv"),u.length==0){r._doStandardDOMUpdate(n,t);return}r._createAndDisplayBetSlipContainerClone(i);u=$('li[class$="multiple-section multipleBets"]',"#bsDivClone");r._doStandardDOMUpdate(n,t);e=$("#bsDivClone");i?(c=$("#stakePadClone","#bsDivClone"),r._bsController._enhancedBetSlipAnimations.hideBetMultiples(u,e,!0,c,r._removeCloneAndShowLiveBetSlipContainer,[],r)):r._bsController._enhancedBetSlipAnimations.hideBetMultiples(u,e,!1,null,r._removeCloneAndShowLiveBetSlipContainer,[],r)}}else r._doStandardDOMUpdate(n,t);o=null};this._doStandardDOMUpdate=function(n,t){var i=this,f=document.getElementById("bsDiv"),u,e,o,h,r,s;if(f.innerHTML=n,u=f.getElementsByClassName("stk"),i._bsController&&i._bsInst&&i._bsController._stakeEntryType==i._bsController._stakeEntryTypes.deviceKeyBoard&&u.length>0)for(r=0,s=u.length;r<s;r++)e=u[r].cloneNode(!0),e.setAttribute("type",i._bsInst.keyboardType),u[r].parentNode.replaceChild(e,u[r]),e=null;if(i._bsController&&i._bsController._currencyDisplayHelper&&u.length>0)for(r=0,s=u.length;r<s;r++)o=u[r].value,o.toString().indexOf(".")>-1&&(h=o.toString().split("."),u[r].value=h[1]=="00"?h[0]:i._bsController._currencyDisplayHelper.formatCurrency(o));t&&(i._bsController._stakeEntryHander.reenable(i._bsController._stakeEntryHander),i._bsController._stakeEntryHander._isShowing=!0);$(f).find('li[data-item-type$="tote-single"], li[data-item-type$="tote-cast"]').length>0&&$(f).find(".bs-ConfirmHeader").removeClass("hidden");this._bsController.refreshMicrophone();i._resetButtonState=!1;i._checkLoginStatus()};this._createAndDisplayBetSlipContainerClone=function(n){var i=document.getElementById("bsDiv"),t=i.cloneNode(!0),r;t.setAttribute("id","bsDivClone");n&&(r=t.innerHTML,r=r.replace('id="stakePad"','id="stakePadClone"'),t.innerHTML=r);i.parentNode.appendChild(t);i.setAttribute("style","display:none;");i=null;t=null};this._removeCloneAndShowLiveBetSlipContainer=function(){var n=document.getElementById("bsDiv"),t=document.getElementById("bsDivClone");n.parentNode.removeChild(t);n.removeAttribute("style");n=null;t=null};this._checkLoginStatus=function(){var n=$("#bsDiv>ul:first").attr("data-bsuis");this._bsController._delegates.isAuthenticated()&&n=="0"&&window.location.reload()};this._customerDialogHandler=function(n){return this._resetButtonState=!0,new b365.Ui.Betslip.CustomerReqCompleteHandler(this._bsInst,this._bsController).handle(n)};this._betPlacementAttempt=function(n){if(n){var t=window.location.host.split(".").pop()==="it";t||this._bsInst.placeBetSuccess();this._bsInst.setValueInBSCookie("processed","true");this._bsInst.backupBSCookieValue(this._bsInst._betSlipCookieKey)}};this._addHeaderLinks=function(n){n&&(this._bsInst.addReceiptHeaderLinks(),new b365.Ui.Betslip.HeaderLinksReceiptRender(this._bsInst).render())};this._addFooterLinks=function(n){n||(this._bsInst.betSlipDisplayed(),this._bsInst.addBetslipFooterLinks(),new b365.Ui.Betslip.FooterLinksSlipRender(this._bsInst,$(".footer")).render())};this._addMatchAlertsReceipt=function(){this._bsInst.addReceiptLiveAlertSignUp();this._bsInst._matchAlertsReceipt=new b365.Ui.Betslip.MatchAlertsReceipt(this._bsInst,this._bsController);this._bsInst._matchAlertsReceipt.render()};this._processResponse=function(n,t,i,r){var u=this,l=Number($("#bsDiv>ul:first-child").attr("data-xrte")),o,p,f,s,w,e,a,v,b,h,y;!isNaN(l)&&l>0&&u._bsController.updateCurrenyRate(l);var d=this._bsInst.getBetItems(this._bsInst.itemTypeSingle),g=this._bsInst.getBetItems(this._bsInst.itemTypeMultiple),nt=this._bsInst.getBetItems(this._bsInst.itemTypeCast),tt=this._bsInst.getBetItems(this._bsInst.itemTypeBetBuilder);if(d.length||g.length||nt.length||tt.length||this._bsInst.setValueInBSCookie("fs","0"),u._bsInst&&n!==u._bsInst.reqTypePlaceBet)for(o=document.getElementsByClassName("stk"),p=new b365.Ui.Betslip.StakeChangedHandler(u._bsInst,u._bsController),f=0;f<o.length;f++)o[f].value>0&&p.handle(o[f]);if(s=getBetslipWebModule(),s&&s.getFreeBetBonusBalance&&(w=s.getFreeBetBonusBalance(),this._bsController.updateFreeBetBar(w)),u._bsController.isAustralianConfirmResponse=r,new b365.Ui.Betslip.TotalsCalculator(u._bsInst,u._bsController).calculate(),new b365.Ui.Betslip.LockUnlockHandler(u._bsInst,u._bsController).handle(!1,u._resetButtonState,n===u._bsInst.reqTypeBetBrk),e=document.getElementsByClassName("betSlip")[0]||document.getElementsByClassName("betReceipt")[0],a=e?e.getAttribute("data-betguid"):null,a&&u._bsController.setBetguid&&u._bsController.setBetguid(a),v=e?e.getAttribute("data-restrictedmultiples"):null,v&&u._bsController.getMultipleItemsController().setRestrictedMultiples(v),b=window.bsApp.hasPhoneOnlyItemOnSlip(),u._bsController.setTelebetBetslip&&u._bsController.setTelebetBetslip(b),h=document.getElementsByClassName("bs-UseFreeBet-error"),h.length>0){var it=new b365.Ui.Betslip.ItemInformation(h[0]),k=it.itemIndexAndType(),c=this._bsInst.getBetItemById(k[1],k[0]);c.setStItem("ft","");c.setStItem("fbv","");c.setStItem("st","");c.setStItem("ust","");u._bsInst.updateState();new b365.Ui.Betslip.FreeBetClickProcessor(this._bsInst,this._bsController).init(h[0]).handle(!1)}u._hideInProg&&u._bsInst.handleInProg("hide","");t.length>0&&n!=this._bsInst.reqTypeBetBrk&&t[0].indexOf("DepositMessage")==-1&&u._bsInst.contentLoaded();i&&new b365.Ui.Betslip.ItemSubscriptionManager(u._bsInst,u._bsController).attach(u._bsController);(u._receiptContext||r)&&u._bsInst.ScrollToTop();typeof window.MyBetsController!="undefined"&&window.MyBetsController.isInitialised()&&window.MyBetsController.bindButtonEvents();u._bsController&&(u._bsController.clientActionInProgress(!1),u._bsController.getMessageDisplayHandler().showCachedMessage());(n==u._bsInst.reqTypeAddItems||n==u._bsInst.reqTypeConstructAndAddItems)&&u._bsInst.betAddedReqComplete();this._bsInst.displayMaxExceededMessage&&(y=document.getElementsByClassName("acceptChanges"),y.length>0&&y[0].className.indexOf("hidden")>-1&&u._bsController.getMessageDisplayHandler().showMsg({message:betSlipML.maxselections,priority:1}),this._bsInst.displayMaxExceededMessage=!1);u._bsInst.toggledBankerSelectionState&&(u._bsController.ausMultiplesEnabled()&&(u._bsController.complexMultiplesNeedsRefresh=!1,u._bsController.getMultipleInfo()),u._bsInst.toggledBankerSelectionState=!1)}};b365.Ui.Betslip.Request={getTypeId:function(n){return n[1][7][0]},getResponse:function(n){return n[0]}};b365.Ui.Betslip.ReqCompleteHandler.prototype={handle:function(n){function ut(n,t,i){var r=n;return n&&i>0&&t>=0&&(r=n.substr(0,t)+n.substr(t+i)),r}var t=this,h,r,w,d,s,c,b,l,a,v,k,y,f,g,nt;if(t._bsController&&(t._bsController._noStakeCount=0),t._isValid()){f=!1;t._resetButtonState=!0;t._hideInProg=!0;var i=b365.Ui.Betslip.Request.getTypeId(n),e=b365.Ui.Betslip.Request.getResponse(n),u=i==bs.reqTypePlaceBet&&window.location.hostname.split(".").pop().toLowerCase()==="au",tt=e.indexOf("TELEBET_WRITE")>-1;this._receiptContext=!u&&e.indexOf("betReceipt")>-1;t._bsController&&t._bsController.ausMultiplesEnabled()&&(i==t._bsInst.reqTypeAddItems||i==t._bsInst.reqTypeDeleteItem||t._bsController.complexMultiplesCombinationsInit?(t._bsController.complexMultiplesCombinationsInit=!1,t._bsController.complexMultiplesNeedsRefresh=!0,g=t._bsInst.getBetItems(t._bsInst.betTypeMultiple).length>0,(g||t._bsController.hasMultipleStakeEntries())&&t._bsController.getMultipleInfo(!0)):i==t._bsInst.reqTypePlaceBet&&new b365.Ui.Betslip.TotalsCalculator(t._bsInst,t._bsController).calculate());t._bsController&&t._bsController.clientEnhancedMode()&&!b365.Ui.BetslipAPI.Polling.isPollingRequestType(i)&&(r=$("#bsDiv"),$("li",r).hasClass("disabledBetSlip")&&(h=$('li[class$="multiple-section multipleBets"], li[data-item-type$="single"], li[data-item-type$="cast"], li[data-item-type$="tote-single"], li[data-item-type$="tote-cast"], li[data-item-type$="tote-pot"], li[data-item-type$="tote-pot-leg"]',r),t._bsController._enhancedBetSlipAnimations.enableBetSlip(h,r)));var it=t._bsInst.getValueFromBSCookie("processed").replace("||",""),rt=e.indexOf("DepositMessage")>-1||e.indexOf("CustomerMessage")>-1,p=b365.Ui.BetslipAPI.Polling.getInstructionSubStringInfo(e),o=null;if(p&&(o=p.content,t._receiptContext&&(e=ut(e,p.sourceStartIndex,p.length),n[0]=e)),t._bsController&&(t._bsController.supressMicrophoneUpdates=u),i==t._serverErrorReqType)t._handleServerError(n),t._processResponse(i,n,f,u);else if(i==t._bsInst.reqTypeMaxBet)new b365.Ui.Betslip.MaxBetReqCompleteHandler(t._bsInst,t._bsController).handle(n),t._processResponse(i,n,f,u);else if(i==t._bsInst.reqTypeBetBrk||i==t._bsInst.reqTypePitcher||e.indexOf(t._betSlipDialogIndicator)!=-1)t._handleDialogReqComplete(n),t._processResponse(i,n,f,u),t._bsController.betPlacementNotification(!1);else if(e.indexOf("DUPLICATE_BET")>-1||e.indexOf("CHECK_MEMBERS")>-1)new b365.Ui.Betslip.DuplicateBetHandler(t._bsInst,t._bsController).handle(),t._hideInProg=!0,t._processResponse(i,n,f,u);else if(e.indexOf("LOCKED")>-1)r=$("#bsDiv"),w=r.find(".placeBet button"),w.length>0&&(s=r.find("#buttonContent"),s.length>0&&(s=s[0].innerHTML,w[0].innerHTML=s)),t._processResponse(i,n,f,u);else{if(i==t._bsInst.reqTypePhoneBet){new b365.Ui.Betslip.PhoneBetHandler(t._bsInst,t._bsController).displayPopup(e);return}if(o&&!t._receiptContext)t._pollingContinuesHandler(i,o),t._processResponse(i,n,f,u);else if(b365.Ui.BetslipAPI.Polling.isPollingRequestType(i))i!==t._bsInst.reqTypePollTempBetReceipt&&(new b365.Ui.Betslip.PollingFinishedReqCompleteHandler(t._bsInst,t._bsController).handle(n),t._betPlacementAttempt(t._receiptContext),t._receiptContext&&t._bsController.liveAlertsEnabled()&&t._addMatchAlertsReceipt(),t._addHeaderLinks(t._receiptContext),t._addFooterLinks(t._receiptContext),$("#closeButton").removeClass("disabled"),$("#okButton").removeClass("disabled"),t._bsController.clientEnhancedMode()&&(r=$("#bsDiv"),$("li",r).hasClass("disabledBetSlip")&&(h=$('li[class$="multiple-section multipleBets"], li[data-item-type$="single"], li[data-item-type$="cast"], li[data-item-type$="tote-single"], li[data-item-type$="tote-cast"], li[data-item-type$="tote-pot"], li[data-item-type$="tote-pot-leg"]',r),t._bsController._enhancedBetSlipAnimations.enableBetSlip(h,r)))),i==t._bsInst.reqTypePollReferredBet&&(f=!0),o&&t._pollingContinuesHandler(i,o),t._processResponse(i,n,f,u);else if(rt)t._customerDialogHandler(n)||t._processResponse(i,n,f,u);else{if(tt)return;i==t._bsInst.reqTypeFetchMultiples?(nt=t._bsController.getMultipleItemsController(),nt.process(n[0])):(f=!0,this._bsController.getPushMarketsEnabled()&&i==this._bsInst.reqTypeRefreshAccept&&(k=$(".hcapChange",r)[0]),t._defaultHandler(n,i),this._receiptContext||u||it!="true"?i==t._bsInst.reqTypeRefreshSlip||i==t._bsInst.reqTypeDeleteItem?(i==t._bsInst.reqTypeDeleteItem?(t._processResponse(i,n,f,u),t._bsInst.deleteBetReqComplete()):t._bsInst.refreshReqComplete(),y=$('li[data-item-type="single"]'),i!=t._bsInst.reqTypeDeleteItem&&t._showPushDialog(y,i)):i==t._bsInst.reqTypeAddItems||i==t._bsInst.reqTypeConstructAndAddItems?($(document).trigger("bsInfoMessage",n[0].toUpperCase().indexOf("ALREADY ADDED")>-1?window.betSlipML.duplicateselection:window.betSlipML.addedtobetslip),c=$("#BetSlipDialogueAddToBetslip"),c.length>0&&(b=n[0].match(/ className=\"[\w\s]*acceptChanges[\w\s]*\"/i),b.length>0&&n[0].indexOf("oddsChange")<0&&n[0].indexOf("hcapChange")<0&&(b[0].toLowerCase().indexOf("hidden")<0?$("a",c).addClass("disabled").attr("data-nav",""):$("a",c).removeClass("disabled").attr("data-nav","AddToBetSlip"))),y=$('li[data-item-type="single"]'),t._showPushDialog(y,i)):i==t._bsInst.reqTypePlaceBet||i==t._bsInst.reqTypeConfirmBet||i==t._bsInst.reqTypeGetCTCBetDetails?(t._betPlacementAttempt(t._receiptContext),t._bsController.betPlacementNotification(t._receiptContext),i==t._bsInst.reqTypePlaceBet&&(r=r||$("#bsDiv"),d=r.find(".placeBet.bs-BtnWrapper"),t._bsInst.placebetBtnDisabledForSpanishStakeLimit=!!d.attr("data-lineitemsabovebetlimits"))):i==t._bsInst.reqTypeRefreshAccept&&(r=$("#bsDiv"),r.trigger("b365.Ui.Betslip.acceptingchanges"),t._bsInst.acceptChanges(),k!=undefined&&t._showPushDialog(k,i)):new b365.Ui.Betslip.ViewResetter(t._bsInst,t._bsController).reset(),this._receiptContext&&this._bsController.liveAlertsEnabled()&&this._addMatchAlertsReceipt(),this._addHeaderLinks(this._receiptContext||u),this._addFooterLinks(this._receiptContext||u),o&&t._pollingContinuesHandler(i,o),this._bsController&&this._bsController._dlg&&(l=$("#okButton"),l.length>0&&(a=l[0].getAttribute("data-action"),a&&(a==="refer"||a==="split")&&(v=$("#bsCD"),v.length>0&&v[0].hasAttribute("style")&&v.css("display")!="none"&&this._bsController._dlg.hideDialog(),l.removeClass("disabled"),$("#closeButton").removeClass("disabled")))),t._processResponse(i,n,f,u))}}}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CustomerReqCompleteHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"};this._getCurrencyObject=function(){return window.sProps&&window.sProps.balance&&window.sProps.balance.currencyDecimalSeparator&&window.sProps.balance.currencyGroupSeparator?{decimalSeparator:window.sProps.balance.currencyDecimalSeparator,thousandsSeparator:window.sProps.balance.currencyGroupSeparator}:{decimalSeparator:".",thousandsSeparator:","}};this._unformatCurrency=function(n){return new b365.Ui.Betslip.CurrencyDisplayHelper(this,this._getCurrencyObject()).unformatCurrency(n)}};b365.Ui.Betslip.CustomerReqCompleteHandler.prototype={handle:function(n){var i=this,r,u,t=n[0].split("|");return t.splice(0,1),r={userBalance:t[0],totalStake:t[1],is3dSecure:t[2],isQuickDeposit:t[3],QuickDepositRemainingStake:i._unformatCurrency(t[4]),betslipContainsInplay:t[5]=="1",origin:t[6],cancelCallBack:function(){document.getElementById("bsCD")&&new b365.Ui.Betslip.ConfirmationDialog(i._bsInst,i._bsController).handleCancel()}},u=i.deposit(r),new b365.Ui.Betslip.LockUnlockHandler(i._bsInst,i._bsController).handle(!1,!0),u},deposit:function(n){return n.origin==="lotto"?(window.lottoInterface&&window.lottoInterface.lottoWebModule&&window.lottoInterface.lottoWebModule.launchDepositPopup(n),!0):(window.bsApp.betslipWebModule.launchDepositPopup(n),!1)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.DialogReqCompleteHandler=function(n,t){this._bsInst=n;this._bsController=t;this._titleMarker="|title";this._messageMarker="|message";this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.DialogReqCompleteHandler.prototype={handle:function(n){if(this._isValid()){var i=this,u=n[0],f,r,e,o,s,h,c,t,l;u.length>0&&(t=$(u),l=t.attr("data-renderstyle")==="confirmation",f=t.attr("class"),r=t.children("#title").html(),e=t.children("#message").html(),o=t.children("#button1Text").html(),s=t.children("#button2Text").html(),h=t.children("#button1Action").html(),c=t.children("#button2Action").html(),r||l?i._bsController.showConfirmation(i,r,e,o,h,s,c,f):i._bsController.showDialog(i,t))}},setDialog:function(n){var t=this;t._bsController.SetCurrentDialogRef(n)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.LockUnlockHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.LockUnlockHandler.prototype={handle:function(n,t,i){var o,s,r;if(this._isValid()){var h=$("#bsDiv"),f=$(".bs-Footer .bs-ItemOverlay"),e=$(".bs-BetSlipType .bs-ItemOverlay"),u=document.getElementsByClassName("bs-BetSlipType_SelectionText")[0],c=$("#bsDiv ul>li");typeof t=="undefined"&&(t=!0);o=this._bsInst._pollReqType===this._bsInst.reqTypePollTempBetReceipt;n=n||this._bsInst.pollInProgress()&&!o;typeof i=="undefined"&&(i=!1);f.length>0&&(n||this._bsInst.numItems()==0?(f.addClass("bs-ItemOverlay_show"),e.addClass("bs-ItemOverlay_show"),u&&(u.className=u.className+" bs-BetSlipType_SelectionText-disabled"),new b365.Ui.Betslip.EnhancedElementsLockUnlockHandler(this._bsInst,this._bsController).lock()):t&&(s=$("#bsDiv a.acceptChanges"),(!this._bsInst.isEmpty()||i)&&f.removeClass("bs-ItemOverlay_show"),e.removeClass("bs-ItemOverlay_show"),u&&(u.className=u.className.replace("bs-BetSlipType_SelectionText-disabled","")),new b365.Ui.Betslip.EnhancedElementsLockUnlockHandler(this._bsInst,this._bsController).unlock()));r=document.getElementById("bsDiv");r&&(n?r.className.indexOf("bs-ShowOverlay")===-1&&(r.className=r.className+" bs-ShowOverlay"):r.className=r.className.replace(/ bs-ShowOverlay/,""))}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EnhancedElementsLockUnlockHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.EnhancedElementsLockUnlockHandler.prototype.lock=function(){this._bsController.clientUsesSelect()||(this._bsController._enhancedBetSlipTypeSelector&&this._bsController._enhancedBetSlipTypeSelector.disablePopUp(),this._bsController._enhancedBetSlipOddsSelector&&this._bsController._enhancedBetSlipOddsSelector.disablePopUps(),this._bsController._enhancedBetSlipPitcherSelector&&this._bsController._enhancedBetSlipPitcherSelector.disablePopUps(),this._bsController._enhancedIfBetSelector&&this._bsController._enhancedIfBetSelector.disablePopUps(),this._bsController._enhancedTeaserSelector&&this._bsController._enhancedTeaserSelector.disablePopUps());this._bsController._removeClickHandler&&this._bsController._removeClickHandler.removeHandlers();this._bsController._eachWayClickHandler&&this._bsController._eachWayClickHandler.removeHandlers();this._bsController._freeBetClickHandler&&this._bsController._freeBetClickHandler.removeHandlers();this._bsController._noReservesClickHandler&&this._bsController._noReservesClickHandler.removeHandlers();this._bsController._streamingClickHandler&&this._bsController._streamingClickHandler.removeHandlers();this._bsController._toteHoverHandler&&this._bsController._toteHoverHandler.removeHandlers();this._bsController._unitStakeClickHandler&&this._bsController._unitStakeClickHandler.removeHandlers();this._bsController._stakeFocusHandler&&this._bsController._stakeFocusHandler.removeHandlers();this._bsController._stakeEntryType==this._bsController._stakeEntryTypes.stakePad&&this._bsController._stakeEntryHander&&this._bsController._stakeEntryHander._isShowing&&this._bsController._stakeEntryHander.detach()};b365.Ui.Betslip.EnhancedElementsLockUnlockHandler.prototype.unlock=function(){var n=this;this._bsController.clientUsesSelect()||(this._bsController._enhancedBetSlipTypeSelector&&this._bsController._enhancedBetSlipTypeSelector.enablePopUp(),this._bsController._enhancedBetSlipOddsSelector&&this._bsController._enhancedBetSlipOddsSelector.enablePopUps(),this._bsController._enhancedBetSlipPitcherSelector&&this._bsController._enhancedBetSlipPitcherSelector.enablePopUps(),this._bsController._enhancedIfBetSelector&&this._bsController._enhancedIfBetSelector.enablePopUps(),this._bsController._enhancedTeaserSelector&&this._bsController._enhancedTeaserSelector.enablePopUps());this._bsController._removeClickHandler?this._bsController._removeClickHandler.attachHandlers():(this._bsController._removeClickHandler=new b365.Ui.Betslip.RemoveClickHandler(n._bsInst,n._bsController),this._bsController._removeClickHandler.attachHandlers());this._bsController._eachWayClickHandler?this._bsController._eachWayClickHandler.attachHandlers():b365.Ui.Betslip.EachWayClickHandler&&(this._bsController._eachWayClickHandler=new b365.Ui.Betslip.EachWayClickHandler(n._bsInst,n._bsController),this._bsController._eachWayClickHandler.attachHandlers());this._bsController._freeBetClickHandler?this._bsController._freeBetClickHandler.attachHandlers():b365.Ui.Betslip.FreeBetClickHandler&&(this._bsController._freeBetClickHandler=new b365.Ui.Betslip.FreeBetClickHandler(n._bsInst,n._bsController),this._bsController._freeBetClickHandler.attachHandlers());this._bsController._noReservesClickHandler?this._bsController._noReservesClickHandler.attachHandlers():b365.Ui.Betslip.NoReservesClickHandler&&(this._bsController._noReservesClickHandler=new b365.Ui.Betslip.NoReservesClickHandler(n._bsInst,n._bsController),this._bsController._noReservesClickHandler.attachHandlers());this._bsController._streamingClickHandler?this._bsController._streamingClickHandler.attachHandlers():b365.Ui.Betslip.StreamingClickHandler&&(this._bsController._streamingClickHandler=new b365.Ui.Betslip.StreamingClickHandler(n._bsInst,n._bsController),this._bsController._streamingClickHandler.attachHandlers());this._bsController._toteHoverHandler?this._bsController._toteHoverHandler.attachHandlers():b365.Ui.Betslip.ToteHoverHandler&&(this._bsController._toteHoverHandler=new b365.Ui.Betslip.ToteHoverHandler(n._bsInst,n._bsController),this._bsController._toteHoverHandler.attachHandlers());this._bsController._unitStakeClickHandler?this._bsController._unitStakeClickHandler.attachHandlers():b365.Ui.Betslip.UnitStakeClickHandler&&(this._bsController._unitStakeClickHandler=new b365.Ui.Betslip.UnitStakeClickHandler(n._bsInst,n._bsController),this._bsController._unitStakeClickHandler.attachHandlers());this._bsController._toteStakeClickHandler?this._bsController._toteStakeClickHandler.attachHandlers():b365.Ui.Betslip.ToteStakeClickHandler&&(this._bsController._toteStakeClickHandler=new b365.Ui.Betslip.ToteStakeClickHandler(n._bsInst,n._bsController),this._bsController._toteStakeClickHandler.attachHandlers());this._bsController._stakeFocusHandler?this._bsController._stakeFocusHandler.attachHandlers():b365.Ui.Betslip.StakeFocusHandler&&(this._bsController._stakeFocusHandler=new b365.Ui.Betslip.StakeFocusHandler,this._bsController._stakeFocusHandler.attachHandlers());this._bsController._stakeEntryType==this._bsController._stakeEntryTypes.stakePad&&this._bsController._stakeEntryHander&&this._bsController._stakeEntryHander._isShowing&&this._bsController._stakeEntryHander.init()};Type.registerNamespace("b365.Ui.BetslipAPI"),function(n){var i="BET_POLL",t="ENDPOLLDATA",r="PS=",u="RDAT=",f="NPRP=";n.PollStatusEnum={StartOrContinue:0,Succeeded:1,Failed:2};n.getInstructionSubStringInfo=function(n){var u,r=n.indexOf(i),f;return r<0?null:(f=n.indexOf(t,r+i.length),u=f>-1?n.substring(r,f+t.length):n.substring(r),{content:u,sourceStartIndex:r,length:u.length})};n.boundedSubString=function(n,t,i){var r,u;return!n||!t||!i||n.length<t.length+i.length?null:(r=n.indexOf(t),r<=-1)?null:(r+=t.length,u=n.indexOf(i,r),u<r)?null:n.substring(r,u)};n.parsePollInfo=function(e){var s=n.boundedSubString(e,i,t),o,h=null;return s&&(o=s.split("|"),h={reqType:o.length>1?Number(o[1]):null,referenceId:o.length>2?o[2]:"",time:o.length>3?o[3]:null,interval:o.length>4?o[4]:null,pollStatus:n.PollStatusEnum.StartOrContinue,nextPollRequestParams:null,responseData:null},s.indexOf(r)>0&&(h.pollStatus=Number(n.boundedSubString(s,r,f)),h.nextPollRequestParams=n.boundedSubString(s,f,u),h.responseData=n.boundedSubString(e,u,t))),h};n.isPollingRequestType=function(n){return n===bs.reqTypePollReferredBet||n===bs.reqTypePollTempBetReceipt}}(window.b365.Ui.BetslipAPI.Polling=window.b365.Ui.BetslipAPI.Polling||{});Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PollingContinuesReqCompleteHandler=function(n){this._bsInst=n;this._isValid=function(){return this._bsInst!==undefined}};b365.Ui.Betslip.PollingContinuesReqCompleteHandler.prototype={EnableGuiControlsForTempReceipt:function(n){var i=$("#bsDiv"),t=i.find(".br-Header_Done button"),r=t&&n!==t.prop("disabled");r||(i.find(".br-Header_RetainLink").prop("disabled",!n),t.prop("disabled",!n),n?t.parent().removeClass("disabled"):t.parent().addClass("disabled"))},handle:function(n,t){var i=null;if(this._isValid()){if((i=b365.Ui.BetslipAPI.Polling.parsePollInfo(t),!i)||(n=Number(n),b365.Ui.BetslipAPI.Polling.isPollingRequestType(n)===i.reqType&&this._bsInst._pollReqType===0))return null;n===this._bsInst.reqTypePollTempBetReceipt&&this.handleTempReceiptData(i);i.pollStatus===b365.Ui.BetslipAPI.Polling.PollStatusEnum.StartOrContinue&&this._bsInst.pollBet(i.reqType,i.referenceId,i.time,i.interval,i.nextPollRequestParams);i.reqType===this._bsInst.reqTypePollTempBetReceipt&&this.EnableGuiControlsForTempReceipt(i.pollStatus!==b365.Ui.BetslipAPI.Polling.PollStatusEnum.StartOrContinue)}return i},handleTempReceiptData:function(n){var i=n.responseData,c=-1,l=2,a=3,r,v,t,o=null,s,u=null,y,e,p,h,f;if(n.pollStatus!==b365.Ui.BetslipAPI.Polling.PollStatusEnum.Failed&&i&&i.length!==0&&(i=JSON.parse(i),i)){for(v=i.BetList.length,e=document.getElementsByClassName("br-Status"),r=0;r<v;r+=1){t=i.BetList[r];s=$("#tempbetstatus_title_"+t.TempBettingSlipId);switch(t.Status){case c:o="br-Status_Desc-timeout";u=betSlipML.aamstimeout;break;case l:o="br-Status_Desc-acceptedref";u=t.PSQFReference;p=s[0].parentElement.children[0];u=t.PSQFReference+" -";$("#tempbetstatus_reference_"+t.TempBettingSlipId).text(t.BetReference).prev().prev().removeClass("hidden");p.className="br-ItalyStatus br-Status_Desc br-Status_Desc-accepted";e[r].className=e[r].className+" br-Status_Accepted";break;case a:o="br-Status_Desc-rejected";u=betSlipML.aamsrejected;e[r].className=e[r].className+" br-Status_Rejected"}(t.Status===l||t.Status===a||t.Status===c)&&(s.text(u),$("#tempbetstatus_desc_"+t.TempBettingSlipId).addClass("hidden"));y=t.Status===0||t.Status===1;y===!1&&s.removeClass("br-Status_Desc-pending").addClass(o);document.getElementsByClassName("br-Status_Desc-pending").length==0&&(h=document.getElementsByClassName("br-Italy_Header_Disabled"),h.length>0&&(h[0].className=h[0].className.replace("br-Italy_Header_Disabled","")),f=document.getElementsByClassName("br-Italy_Retain_Disabled"),f.length>0&&(f[0].children[0].className=f[0].children[0].className.replace("br-Italy_Reuse_Disabled",""),f[0].className=f[0].className.replace("br-Italy_Retain_Disabled","")))}n.pollStatus===b365.Ui.BetslipAPI.Polling.PollStatusEnum.Succeeded&&i.UserBalanceDisplayValue.length>0&&($("#bsDiv > ul:first-child").attr("data-ub",i.UserBalanceDisplayValue),this._bsInst.placeBetSuccess())}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PollingFinishedReqCompleteHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.PollingFinishedReqCompleteHandler.prototype={handle:function(n){if(this._isValid()){this._bsInst.resetPoll();var t=n[0].indexOf("DepositMessage")>-1||n[0].indexOf("CustomerMessage")>-1;t?(this._bsController._dlg&&this._bsController._dlg.hideDialog(),new b365.Ui.Betslip.CustomerReqCompleteHandler(this._bsInst,this._bsController).handle(n)):(this._bsController._dlg&&this._bsController._dlg.hideDialog(),$("#bsDiv").html(n[0]))}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.MultiBreakdownRequestDespatcher=function(n,t){this._bsController=t;this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.MultiBreakdownRequestDespatcher.prototype={despatch:function(n){if(this._isValid()){var t=new b365.Ui.Betslip.BetBreakdownKeyGenerator(this._bsInst,this._bsInst.getBetItemById(this._bsInst.itemTypeMultiple,n),this._bsInst.itemTypeMultiple,n).generate();this._bsController.showBetslipBreakdownDialog(t)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.RemoveAllItemsRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"};this._closeBetSlip=function(){var n=this;n._bsInst.hideBetSlip()}};b365.Ui.Betslip.RemoveAllItemsRequestDespatcher.prototype={despatch:function(n){this._isValid()&&!$(n).hasClass("disabled")&&(this._closeBetSlip(),this._bsInst.clearBets(!0),this._bsInst.betSlipItemsChanged(),this._bsController.itemsRemoved(),$("#bsDiv").trigger("b365.Ui.Betslip.removingall"))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.EditSelectionsRequestDespatcher=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.EditSelectionsRequestDespatcher.prototype={despatch:function(){this._isValid()&&(this._bsInst.editBet(),this._bsInst.setClearOnAdd(!1),this._bsInst.setValueInBSCookie("processed","false"),this._bsInst.refresh(this._bsInst.betTypeNormal))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.DialogClickHandler=function(n,t){this._bsInst=n;this._controller=t;this._closeAction="close";this._referAction="refer";this._italyPushProceed="ipProceed";this._italyPushCancel="ipCancel";this._pdProceed="pdProceed";this._pdHelp="pdHelp";this._hrefClick="href";this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._controller.GetCurrentDialogRef()!="undefined"};this._handleRefer=function(){new b365.Ui.Betslip.ReferBetRequestDespatcher(this._bsInst,this._controller).despatch()}};b365.Ui.Betslip.DialogClickHandler.prototype={handle:function(n){var i=$(n.target),r=i.attr("data-action"),t;if(this._isValid()){if(r!==this._hrefClick&&(n.preventDefault(),n.stopPropagation()),i.hasClass("disabled"))return;switch(r){case this._closeAction:$("#closeButton").removeClass("disabled");$("#okButton").removeClass("disabled");this.hideDialog();break;case this._referAction:$("#closeButton").addClass("disabled");t=$("#okButton");t.addClass("disabled");t[0].innerHTML=window.betSlipML.referringBet+'<span  className="buttonSpinner"><\/span>';this._handleRefer();break;case this._italyPushProceed:case this._italyPushCancel:case this._pdProceed:case this._pdHelp:this._controller._dlg.controller.handleClick(n)}}}};b365.Ui.Betslip.DialogClickHandler.prototype.hideDialog=function(){this._controller._dlg&&this._controller._dlg.hideDialog()};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.DialogCloser=function(n,t){this._controller=n;this._dialogContainer=$(t);this._isValid=function(){return typeof this._controller!="undefined"&&typeof this._dialogContainer!="undefined"}};b365.Ui.Betslip.DialogCloser.prototype={closeDialog:function(){this._isValid()&&(this._dialogContainer.addClass("hidden"),$(".centergreyout").remove())}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.RetainSelectionsRequestDespatcher=function(n,t){this._bsInst=n;this._controller=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.RetainSelectionsRequestDespatcher.prototype={despatch:function(n){var i,t;if(this._isValid()&&!$(n).hasClass("disabled")){for(this._controller.getPushMarketsEnabled()?this._bsInst.restoreBSCookieValue("bs",this._bsInst._pushBetSlipCookieBackup):this._bsInst.restoreBSCookieValue("bs",this._bsInst._betSlipCookieBackup),this._bsInst.setValueInBSCookie("processed","false"),new b365.Ui.Betslip.RestoreStateHandler(this._bsInst).handle(),this._bsInst.setClearOnAdd(!1),new b365.Ui.Betslip.UpdateStateHandler(this._bsInst).handle(),i=this._bsInst.getBetItems(this._bsInst.itemTypeAll),t=0;t<i.length;t++)i[t].setStItem("st",""),i[t].setStItem("ust",""),i[t].setStItem("fb",""),i[t].setStItem("gust",""),i[t].setStItem("gst",""),i[t].setStItem("tr",""),i[t].setStItem("fbv",""),i[t].setStItem("ft","");this._bsInst.updateState();this._bsInst.refresh(this._bsInst.betTypeNormal);this._controller.retainSelectionsDelegate()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.SingleBreakdownRequestDespatcher=function(n,t){this._bsController=t;this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.SingleBreakdownRequestDespatcher.prototype={despatch:function(n){if(this._isValid()){var t=new b365.Ui.Betslip.BetBreakdownKeyGenerator(this._bsInst,this._bsInst.getBetItemById(this._bsInst.itemTypeSingle,n),this._bsInst.itemTypeSingle,n).generate();this._bsController.showBetslipBreakdownDialog(t)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.RepeatStakeClickHandler=function(n,t,i,r,u){this._bsInst=n;this._bsController=t;this._itemIndex=i;this._itemType=r;this._itemElement=u;this._isItalianDomain=window.location.host.split(".").pop()=="it";this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._itemIndex!="undefined"&&typeof this._itemType!="undefined"&&typeof this._itemElement!="undefined"};this._isValidRepeatStake=function(n){return n!=""&&Number(n)>0};this._repeatStake=function(n,t,i){var f,e,u,r;if(this._isValid()){for(f=this._bsInst.getBetItems(t),e=new b365.Ui.Betslip.StakeChangedHandler(this._bsInst,this._bsController),u=i;u<f.length;u++)r=$("#bsDiv "+(t==this._bsInst.itemTypeSingle?".single-section":".cast-section")+" li[data-item-id='"+u+"']:not(.suspended) .stk"),r.length>0&&r[0].className.indexOf("bs-FreeBet-disabled")==-1&&(f[u].setStItem("st",n),r[0].value=n,e.handle(r[0]),r.removeClass("bs-Stake_TextBox-placeholder"));this._bsInst.updateState()}}};b365.Ui.Betslip.RepeatStakeClickHandler.prototype={handle:function(n){if(typeof n!="undefined"&&n&&this._isValid()){var r=$(this._itemElement).find(".stk:first"),i=(new b365.Ui.Formatter).padStringTo2DP(r[0].value),t=i;this._bsController._currencyDisplayHelper&&(t=this._bsController._currencyDisplayHelper.formatCurrency(i));r[0].value=t;this._isValidRepeatStake(i)&&(this._itemType==this._bsInst.itemTypeSingle?(this._repeatStake(t,this._bsInst.itemTypeSingle,Number(this._itemIndex)+1),this._repeatStake(t,this._bsInst.itemTypeCast,0)):this._itemType==this._bsInst.itemTypeCast&&this._repeatStake(t,this._bsInst.itemTypeCast,Number(this._itemIndex)+1),new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this._bsController).calculate())}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.RepeatStakeVisibilitySetter=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.RepeatStakeVisibilitySetter.prototype={set:function(n){if(this._isValid()){var t=$("[data-item-id='0']").first().find(".bs-Stake_TextBox")[0]==n;t&&($blib.isDecimal(n.value)&&n.value!==""?$(".bs-RepeatStake").removeClass("hidden"):$(".bs-RepeatStake").addClass("hidden"))}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.NoReservesClickHandler=function(n,t){this._bsInst=n;this._bsController=t;this._enabled=!1;this._noReservesClickHandlers=[];this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.NoReservesClickHandler.prototype={handle:function(n){var r=this,t,i,f,e,o,u;if(typeof n!="undefined"&&n){if(r.removeHandlers(),t=n.target,i=$(t),!i.prop("disabled")&&!i.parents().prop("disabled")){switch(t.nodeName.toLowerCase()){case"div":i=$(t).find('span.bs-CheckBox[data-inp-type="nrcb"]');t=i[0];break;default:i=$(t).parent().find('span.bs-CheckBox[data-inp-type="nrcb"]');t=i[0]}r._bsInst._pollReqType===r._bsInst.reqTypePollTempBetReceipt&&r._bsInst.resetPoll();f=new b365.Ui.Betslip.ItemInformation(t);e=f.itemIndexAndType();o=f.itemElement();$(o).hasClass("suspended")||(u=$(t).hasClass("checked"),!1||(u?($(t).removeClass("checked"),u=!1):($(t).addClass("checked"),u=!0)),new b365.Ui.Betslip.NoReservesClickProcessor(this._bsInst,e[0],e[1],o).handle(u,n));r.attachHandlers()}n.stopPropagation();n.preventDefault()}},attachHandlers:function(){var n=this,i=$('div[data-inp-type="nrcb"], span[data-inp-type="nrcb"]',"#bsDiv"),t,r;if(n.removeHandlers(n),i.length==0){n._enabled=!1;return}for(t=0,r=i.length;t<r;t++)n._noReservesClickHandlers.push(new b365.Ui.Betslip.ResponsiveClickHandler(i[t],$.proxy(n.handle,n),!1));n._enabled=!0},removeHandlers:function(){var n=this,t,i;if(n._noReservesClickHandlers.length>0){for(t=0,i=n._noReservesClickHandlers.length;t<i;t++)n._noReservesClickHandlers[t]._element&&n._noReservesClickHandlers[t].destroy();n._noReservesClickHandlers=[]}n._enabled=!1}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.NoReservesClickProcessor=function(n,t,i,r){this._bsInst=n;this._itemIndex=t;this._itemType=i;this._itemElement=r;this._noReservesCookieKey="nr";this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._itemIndex!="undefined"&&typeof this._itemType!="undefined"&&typeof this._itemElement!="undefined"};this._updateSelectionLabel=function(n){var t=$(this._itemElement).find(".no-reserves-hidden").text().split("|");$(this._itemElement).find(".bs-Selection_Desc").text(n?t[1]:t[0])}};b365.Ui.Betslip.NoReservesClickProcessor.prototype={handle:function(n,t){if(typeof t!="undefined"&&t&&this._isValid()){var i=this._bsInst.getBetItemById(this._itemType,this._itemIndex);i&&(i.setStItem(this._noReservesCookieKey,n?"1":"0"),this._bsInst.updateState(),this._updateSelectionLabel(n))}}};b365.Ui.Formatter=function(){this._to2DP=function(n){n=n.replace(",",".");var t=n.indexOf(".");return t!=-1&&n.length-t>3&&(n=n.substr(0,t+3)),n}};b365.Ui.Formatter.prototype={padStringTo2DP:function(n){var t,i;return typeof n!="string"&&(n=String(n)),n=n.replace(/,/g,"."),n=n.trim(),n==="."||n===""?n="0.00":(n=this._to2DP(n),t=n.indexOf("."),t==-1?n+=".00":(i=n.length-(t+1),i==0?n+="00":i==1&&(n+="0"))),n},numDecPlcs:function(n){typeof n!="string"&&(n=String(n));var t=".";return n.indexOf(t)>-1?n.length-n.indexOf(t)-1:0},roundValue:function(n){var u,f,t,i,r,e;if(typeof n!="string"&&(n=String(n)),n=n.trim(),n!="NaN"&&n.indexOf(".")>=0){if(f=n.split("."),t=f[0],i=f[1],i.trim().length==0)return n;i=i.length>4?i.substring(0,3):i;r=i.substring(2,3);Number(r)>=5?(r=i.substring(1,2),Number(r)==9?(e=i.substring(0,1),Number(e)==9?(t=Number(t)+1,u=t):(r=Number(e)+1,t=t+"."+r,u=t)):(r=Number(r)+1,r=String(i.substring(0,1))+String(r),t=t+"."+r,u=t)):i.length==1?(t=t+"."+i,u=t):(t=t+"."+i.substring(0,2),u=t)}else u=n===""||n=="NaN"?"":isNaN(n)?n:n;return u},roundDecimal:function(n){return typeof n!="string"&&(n=String(n)),n=n.replace(/,/g,"."),n=n.trim(),n==="."||n===""?"0.00":this.padStringTo2DP(this.roundValue(n))},round:function(n,t){return Math.round(parseFloat(n)*Math.pow(10,t))/Math.pow(10,t)},roundFixed:function(n,t){return this.round(n,t).toFixed(t)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AcceptChangesRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._formatter=new b365.Ui.Formatter;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.AcceptChangesRequestDespatcher.prototype={despatch:function(){var o,p,e=0,h,a,s=!1,g,u,nt,n;if(this._isValid()){if(window.location.host.split(".").pop()=="au"&&(o=$(".betCallDisabled"),o.length>0))if(o.length>1)new b365.Ui.Betslip.RemoveAllItemsRequestDespatcher(this._bsInst,this._bsController).despatch(null);else for(u=0,p=o.length;u<p;u++)new b365.Ui.Betslip.ItemDeleteExecutor(this._bsInst,this._bsController,o[u].getAttribute("data-item-id"),o[u].getAttribute("data-item-type")).execute();for(var t=this._bsInst.getBetItems(this._bsInst.betTypeAll),f,tt,w,b,k,c,r,l,i=[],d=t.length,v=-1,y=-1,n=0;n<d;n++)h=t[n].getStItem("olc"),c=t[n].getCnItem("id"),t[n].type==this._bsInst.betTypeNormal?(c=t[n].getCnItem("fp"),r=$('li[data-item-fpid="'+c+'"]',this._bsWrapper)):t[n].type==this._bsInst.betTypeMultiple?r=$('li[data-item-id="'+c+'"][data-item-type="multiple"]',this._bsWrapper):t[n].type==this._bsInst.betTypeCast?(v+=1,r=$('li[data-item-id="'+v+'"][data-item-type="cast"]',this._bsWrapper),r.length==0&&(r=$('li[data-item-id="'+v+'"][data-item-type="tote-cast"]',this._bsWrapper))):t[n].type==this._bsInst.betTypeBetBuilder&&(y++,r=$('li[data-item-id="'+y+'"][data-item-type="betbuilder"]',this._bsWrapper)),g=t[n].type&&t[n].type!=this._bsInst.betTypeNormal,(h!==undefined||g)&&((t[n].getStItem("rs")&&t[n].getStItem("rs").length>0||r.hasClass("errStk"))&&(f=t[n].getStItem("rs"),f||t[n].type!=this._bsInst.betTypeCast?(t[n].setStItem("st",f),t[n].setStItem("rs",""),t[n].getStItem("ust")&&t[n].setStItem("ust",f)):f=document.querySelector("#bsDiv>ul").getAttribute("data-minstake"),f&&(l=$('input[class*="stk"]',r),l.length>0&&(l[0].value=this._bsController._currencyDisplayHelper.formatCurrency(this._formatter.roundDecimal(String(f))),new b365.Ui.Betslip.StakeChangedHandler(this._bsInst,this._bsController).handle(l[0],!0)))),a=r.attr("data-item-push"),a&&a!=""&&(h=="2"||h=="3")&&(s=!0),t[n].getStItem("olc")&&(t[n].setStItem("olc","0"),s=!0),f=t[n].getStItem("st"),tt=t[n].getStItem("ew"),w=$blib.getItemOdds(bs.betTypeNormal,t[n])||$blib.getItemOdds(bs.betTypeBetBuilder,t[n]),b=new b365.Ui.Betslip.TaxCalculator(this._bsInst),k=b.calcReturnsByLine(f,w),t[n].setStItem("tr",k)),t[n].getCnItem("fp")&&t[n].getStItem("_s")!==undefined&&t[n].getStItem("_s")=="1"&&(t[n].getCnItem("id")?this._bsController.itemsRemoved(t[n].getCnItem("id").replace("Y","").replace("N","")):t[n].getCnItem("mid")&&t[n].getCnItem("pid")?this._bsController.itemsRemoved(t[n].getCnItem("pid")+":"+t[n].getCnItem("mid")):t[n].getCnItem("Inc")?this._bsController.itemsRemoved(t[n].getCnItem("fp")+"~inc"+t[n].getCnItem("Inc")):this._bsController.itemsRemoved(t[n].getCnItem("fp")),u=r.attr("data-item-id"),u=u-e,i[e]=new b365.Ui.Betslip.ItemDeleteExecutor(this._bsInst,this._bsController,u,r.attr("data-item-type")).executeWithoutRequest(),e++),t[n].type==bs.betTypeBetBuilder&&(nt=t[n].getStItem("_s")==="1",nt&&(i[e]=new b365.Ui.Betslip.ItemDeleteExecutor(this._bsInst,this._bsController,y,r.attr("data-item-type")).executeWithoutRequest(),e++)),t[n].getStItem("spodss")!==undefined&&t[n].getStItem("spodss")==1&&(s=!0);if(this._bsInst.updateState(),this._bsInst.betSlipItemsChanged(),e>0)if(e!=d){for(n=0;n<i.length;n++)(!this._bsController.isReqOnBetDeletedEnabled()||this._bsInst.req(this._bsInst.reqTypeDeleteItem))&&(i[n].getCnItem("id")?this._bsController.itemsRemoved(i[n].getCnItem("id").replace("Y","").replace("N","")):i[n].getCnItem("mid")&&i[n].getCnItem("pid")?this._bsController.itemsRemoved(i[n].getCnItem("pid")+":"+i[n].getCnItem("mid")):i[n].getCnItem("Inc")?this._bsController.itemsRemoved(i[n].getCnItem("fp")+"~inc"+i[n].getCnItem("Inc")):this._bsController.itemsRemoved(i[n].getCnItem("fp")));s=!0}else new b365.Ui.Betslip.RemoveAllItemsRequestDespatcher(this._bsInst,this._bsController).despatch(null),new b365.Ui.Betslip.ItemSubscriptionManager(this._bsInst,this._bsController).unsubscribe();s?(this._bsInst.refresh(this._bsInst.betTypeAllAccept),new b365.Ui.Betslip.ItemSubscriptionManager(this._bsInst,this._bsController).unsubscribe()):($(".acceptChanges",this._bsWrapper).addClass("hidden"),$("a.placeBet",this._bsWrapper).removeClass("hidden"),$("a.placeBet",this._bsWrapper).removeClass("bs-BtnDisabled"),$(".oddsChange",this._bsWrapper).removeClass("oddsChange"),$(".hcapChange",this._bsWrapper).removeClass("hcapChange"),$(".errStk",this._bsWrapper).removeClass("errStk"));this._bsController.getMessageDisplayHandler().hideMsg(betSlipML.oddsChanged)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetConstructDecoder=function(n,t){this._bsInst=n;this._construct=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._construct!="undefined"};this._getSpecificType=function(n,t){switch(n){case this._bsInst.toteTypeUKTote:return t==this._bsInst.betTypeToteNonCast?this._bsInst.betTypeToteNonCast:t==this._bsInst.betTypeTotePot?this._bsInst.betTypeTotePot:this._bsInst.betTypeToteCast;case this._bsInst.toteTypeETote:return t==this._bsInst.betTypeToteNonCast?this._bsInst.betTypeEToteNonCast:t==this._bsInst.betTypeTotePot?this._bsInst.betTypeETotePot:this._bsInst.betTypeEToteCast;case this._bsInst.toteTypeUSTote:return t==this._bsInst.betTypeToteNonCast?this._bsInst.betTypeUsToteNonCast:t==this._bsInst.betTypeTotePot?this._bsInst.betTypeUsTotePot:this._bsInst.betTypeUsToteCast;default:return t==this._bsInst.betTypeToteNonCast?this._bsInst.betTypeFrgnToteNonCast:t==this._bsInst.betTypeTotePot?this._bsInst.betTypeFrgnTotePot:this._bsInst.betTypeFrgnToteCast}}};b365.Ui.Betslip.AddBetConstructDecoder.prototype={betType:function(){var n=bs.betTypeNormal,i,r,t;if(this._isValid())if($.isArray(this._construct)){if(this._construct[0].stype&&this._construct[0].cmask){i=this._construct[0].stype;r=this._construct[0].ttype;switch(i){case"N":case"I":n=this._bsInst.betTypeCast;break;case"A":case"O":t=new b365.Ui.Betslip.CastMaskInfo(this._construct[0].cmask);n=t.isToteCast(i)?this._bsInst.betTypeCast:t.isTotePot()?this._bsInst.betTypeTotePotAus:this._bsInst.betTypeCast;break;case"T":case"R":case"J":case"E":t=new b365.Ui.Betslip.CastMaskInfo(this._construct[0].cmask);n=t.isToteCast(i)?this._getSpecificType(r,this._bsInst.betTypeToteCast):t.isTotePot()?this._getSpecificType(r,this._bsInst.betTypeTotePot):this._getSpecificType(r,this._bsInst.betTypeToteNonCast)}}}else this._construct.indexOf("bc=")>-1?n=bs.betTypeMultiple:this._construct.indexOf("il=")>-1&&(n=bs.betTypeBetBuilder);return n}},function(){Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetHandler=function(n,t){typeof $displayHelper!="undefined"&&(n._betItems.length==0&&$displayHelper.isPortraitMode()&&$displayHelper.isPrematch()&&window.MyBetsController.isInitialised()?window.MyBetsController.showBetSlip():$displayHelper.isPortraitMode()&&!$displayHelper.isPrematch()&&window.MyBetsController.isInitialised()?window.MyBetsController.showBetSlip():!$displayHelper.isPortraitMode()&&window.MyBetsController.isInitialised()&&window.MyBetsController.showBetSlip());this._bsInst=n;this._controller=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._controller!="undefined"};this._getConstruct=function(n){var t=n;return typeof n=="string"||$.isArray(n)||(t=Array.prototype.slice.call(n)[0]),t||(t=n.ConstructString),t};this._failedToAddBet=function(n,t){t===this._bsInst.betTypeNormal&&n.length>0&&$("#bsDiv").trigger("b365.Ui.Betslip.failedtoaddbet",n[0])};this._duplicateCheck=function(n){for(var r=new b365.Ui.Betslip.DuplicateItemValidator(this._bsInst),i=!1,t=0;t<n.length&&!i;t++)i=r.isDuplicate(n[t]);return i}};b365.Ui.Betslip.AddBetHandler.prototype={handle:function(n,t,i){var p,w,a,b,k,v,g;if(this._isValid()){var r=[],s=[],e=this._getConstruct(n),f=new b365.Ui.Betslip.AddBetConstructDecoder(this._bsInst,e),h,c,l,u=!0,o=f.betType();if(this._bsInst.setClearOnAdd(t===!0||$("#bsDiv .betReceipt").length>0),p=document.getElementById("pro"),p.className.indexOf("hidden")===-1&&(u=!1),w=document.getElementsByClassName("bs-ConfirmationFooter"),w.length>0&&(u=!1),a=document.getElementsByClassName("bs-BetCall_Connecting"),a.length>0&&(u=!1),a=document.getElementsByClassName("bs-BetCall_Connected"),a.length>0&&(u=!1),!u){this._bsInst.addBetFailed();return}if(h=this._bsInst.getClearOnAdd(),b=new b365.Ui.Betslip.AddBetTypeValidator(this._bsInst,this._controller).validate(o,e),h||b){if(this._bsInst._pollReqType===this._bsInst.reqTypePollTempBetReceipt&&this._bsInst.resetPoll(),o===this._bsInst.betTypeFrgnToteCast&&(e=new b365.Ui.Betslip.ForeignToteConstructCorrector(this._bsInst,e).GetCorrectedConstruct()),r=new b365.Ui.Betslip.AddBetItemsBuilder(this._bsInst,e).betItems(o),o!==this._bsInst.betTypeCast&&o!==this._bsInst.betTypeToteCast||this._bsInst.okToAdd(r.length)||(k=this._bsInst._betItems.length+this._bsInst._betCastItems.length,v=14-k,v!=0&&(r.splice(v,r.length),this._bsInst.displayMaxExceededMessage=!0)),h||(c=this._bsInst.okToAdd(r.length))){if(l=h,h){for(var y=0,d=this._bsInst.getBetItems(f.betType()),nt=d.length;y<nt;y++)this._controller.itemsRemoved(d[y].getCnItem("fp"));this._bsInst.clearBets(!1);t&&this._controller.itemsRemoved();c=this._bsInst.okToAdd(r.length)}else s=this._bsInst.getBetItems(f.betType()),l=!this._duplicateCheck(r);l&&c?(s.length===0&&(new b365.Ui.Betslip.DefaultSlipTypeSetter(this._bsInst).setSlipType(f.betType()),this._bsInst.showBetSlip()),this._controller.isReqOnBetAddedEnabled()&&this._bsInst.locked()||(s=s.concat(r),this._bsInst.setBetItems(s,f.betType()),g=r&&r.length<2&&+r[0].getStItem("fb")>0,g&&this._bsInst.setValueInBSCookie("fs","1"),this._bsInst.updateState(),this._bsInst.betAdded(r),this._bsInst.betSlipItemsChanged()),this._controller.isReqOnBetAddedEnabled()&&(this._bsInst.req(this._bsInst.reqTypeAddItems)||(this._failedToAddBet(r,f.betType()),u=!1))):l||(this._bsInst.unlock(),new b365.Ui.Betslip.InProgressDisplayHandler(this._bsInst,this._controller).handle(["hide",betSlipML.duplicateselection,null,""]),u=!1)}c||(this._bsInst.unlock(),this._controller.getMessageDisplayHandler().showMsg({message:betSlipML.maxselections,priority:1}),this._bsInst.maxSelections(),this._duplicateCheck(r)||(this._failedToAddBet(r,f.betType()),u=!1));u||this._bsInst.addBetFailed();u&&i&&typeof i=="function"&&i.call()}else{if(o==this._bsInst.betTypeBetBuilder){if(this._bsInst.getSlipType()==this._bsInst.slipStandard){$log("Rejected BetBuilder Addbet action: Validation failure");bsApp.dispatchParticipantEvent({type:"bb_maxExceeded"});bsApp.resetBetslipProgress();return}bsApp.dispatchParticipantEvent({type:"bb_incompatible"})}new b365.Ui.Betslip.ConfirmationDialog(this._bsInst,this._controller).showIncompatibleSelectionsDialog(e,i)}}}}}(),function(){Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.DeleteBetHandler=function(n,t){this._bsInst=n;this._controller=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._controller!="undefined"}};b365.Ui.Betslip.DeleteBetHandler.prototype={handle:function(n){var r,e,o,f,t,u,i;if(this._isValid()){if(r=!0,e=document.getElementById("pro"),e.className.indexOf("hidden")===-1&&(r=!1),o=document.getElementsByClassName("bs-ConfirmationFooter"),o.length>0&&(r=!1),!r){this._bsInst.deleteBetReqComplete();return}f=$blib.getBetItemIndex(n,this._bsInst);f!=-1?new b365.Ui.Betslip.ItemDeleteExecutor(this._bsInst,this._controller,f,this._bsInst.betTypeNormal).execute():(n.indexOf("#id=")>-1?(t=n.indexOf("#id="),u=n.indexOf("#",t+1),i=n.slice(t+4,u),i=i.replace("Y","").replace("N","")):(t=n.indexOf("#id="),u=n.indexOf("#",t+1),i=n.slice(t+4,u)),i.length>0&&(this._controller.itemsRemoved(i.replace("Y","").replace("N","")),this._bsInst.deleteBetReqComplete()))}}}}();Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetItemsBuilder=function(n,t){this._bsInst=n;this._construct=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._construct!="undefined"}};b365.Ui.Betslip.AddBetItemsBuilder.prototype={betItems:function(n){var t=[],i;if(this._isValid())switch(n){case this._bsInst.betTypeCast:case this._bsInst.betTypeToteCast:case this._bsInst.betTypeUsToteCast:case this._bsInst.betTypeEToteCast:case this._bsInst.betTypeFrgnToteCast:t=new b365.Ui.Betslip.CastBetItemsBuilder(this._bsInst,this._construct).betItems();break;case this._bsInst.betTypeToteNonCast:case this._bsInst.betTypeUsToteNonCast:case this._bsInst.betTypeEToteNonCast:case this._bsInst.betTypeTotePot:case this._bsInst.betTypeUsTotePot:case this._bsInst.betTypeETotePot:case this._bsInst.betTypeFrgnToteNonCast:case this._bsInst.betTypeFrgnTotePot:case this._bsInst.betTypeTotePotAus:t=new b365.Ui.Betslip.ToteBetItemsBuilder(this._bsInst,this._construct).betItems();break;case this._bsInst.betTypeNormal:case this._bsInst.betTypeBetBuilder:i=new b365.Ui.BetDTO(n);i.parse(this._construct);t.push(i)}return t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetTypeEToteValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.AddBetTypeEToteValidator.prototype={validate:function(n){var t=!1;return this._isValid()&&(t=n==this._bsInst.betTypeEToteCast||n==this._bsInst.betTypeEToteNonCast||n==this._bsInst.betTypeETotePot),t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetTypeIfRevIfBankerTeaserValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.AddBetTypeIfRevIfBankerTeaserValidator.prototype={validate:function(n){var t=!1;return this._isValid()&&(t=n==this._bsInst.betTypeNormal),t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetTypeStandardValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.AddBetTypeStandardValidator.prototype={validate:function(n){var i=!0,t=this._bsInst.getBetItems(this._bsInst.betTypeTotePotAus);return n==this._bsInst.betTypeTotePotAus?i=t.length>0&&(t[0].getCnItem("spt")=="A"||t[0].getCnItem("spt")=="O")&&new b365.Ui.Betslip.CastMaskInfo(t[0].getCnItem("cm")).isTotePot():n==bs.betTypeBetBuilder?i=this._validateBetBuilder():(i=!(t.length>0&&(t[0].getCnItem("spt")=="A"||t[0].getCnItem("spt")=="O")&&new b365.Ui.Betslip.CastMaskInfo(t[0].getCnItem("cm")).isTotePot()),i&&(i=n==this._bsInst.betTypeNormal||n==this._bsInst.betTypeCast||n==bs.betTypeFrgnToteCast||n==bs.betTypeFrgnToteNonCast||n==bs.betTypeFrgnTotePot)),i},_validateBetBuilder:function(){var n;return n=this._bsInst.getBetItems(this._bsInst.betTypeBetBuilder),!n||n.length<4}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetTypeUkToteValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.AddBetTypeUkToteValidator.prototype={validate:function(n){var t=!1;return this._isValid()&&(t=n==this._bsInst.betTypeToteCast||n==this._bsInst.betTypeToteNonCast||n==this._bsInst.betTypeTotePot),t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetTypeUsToteValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.AddBetTypeUsToteValidator.prototype={validate:function(n){var t=!1;return this._isValid()&&(t=n==this._bsInst.betTypeUsToteCast||n==this._bsInst.betTypeUsToteNonCast||n==this._bsInst.betTypeUsTotePot),t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AddBetTypeValidator=function(n,t){this._bsInst=n;this._controller=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._controller!="undefined"}};b365.Ui.Betslip.AddBetTypeValidator.prototype={validate:function(n){var t=!0;if(this._bsInst.numItems()>0)switch(this._bsInst.getSlipType()){case this._bsInst.slipStandard:t=new b365.Ui.Betslip.AddBetTypeStandardValidator(this._bsInst).validate(n);break;case this._bsInst.slipBanker:case this._bsInst.slipIF:case this._bsInst.slipReverseIF:case this._bsInst.slipFixedTeaser:t=new b365.Ui.Betslip.AddBetTypeIfRevIfBankerTeaserValidator(this._bsInst).validate(n);n==this._bsInst.slipFixedTeaser||t||n!=this._bsInst.betTypeCast||(this._bsInst.setValueInBSCookie("bt",this._bsInst.slipStandard),t=!0);break;case this._bsInst.slipUKTote:t=new b365.Ui.Betslip.AddBetTypeUkToteValidator(this._bsInst).validate(n);break;case this._bsInst.slipUSTote:t=new b365.Ui.Betslip.AddBetTypeUsToteValidator(this._bsInst).validate(n);break;case this._bsInst.slipETote:t=new b365.Ui.Betslip.AddBetTypeEToteValidator(this._bsInst).validate(n)}return t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CastMaskInfo=function(n){this._castmask=n;this._isValid=function(){return typeof this._castmask!="undefined"}};b365.Ui.Betslip.CastMaskInfo.prototype={isToteCast:function(n){return n=="J"&&this._castmask!="D"?!0:this._castmask=="E"||this._castmask=="T"||this._castmask=="W"||this._castmask=="S"||this._castmask=="Q"},isTotePot:function(){return this._castmask=="P"||this._castmask=="U"||this._castmask=="J"||this._castmask=="6"||this._castmask=="7"||this._castmask=="2"||this._castmask=="3"||this._castmask=="4"}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CastBetItemsBuilder=function(n,t){this._bsInst=n;this._construct=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._construct!="undefined"};this._getTotePotItemConstructs=function(n,t){for(var f=[],e="#fp=",u,r,i=0;i<t.valuelist.length;i++)for(u=0;u<t.valuelist[i].length;u++)r=t.valuelist[i][u].split(":"),i===0&&u===0&&(n+="#cm="+r[2]+"#tmn="+r[4]+"#tmi="+r[3]),e+=r[5]+":"+r[0]+":"+r[6]+":"+r[1]+(i==t.valuelist.length-1&&u==t.valuelist[i].length-1?"":",");return f.push(n+e+(t.mediaType!==""?"|#mt="+t.mediaType+"#":"")),f};this._getCombinations=function(n,t){for(var r=[],u=t[0],f,i=0;i<u.length;i++)n.indexOf(u[i])==-1&&(f=n+(n===""?"":",")+u[i],t.length>1&&t[1]?r=r.concat(this._getCombinations(f,t.slice(1))):r.push(f));return r};this._getNoneTotePotItemConstructs=function(n,t){var u=[],r="#fp=",f,i;if(t.ctype=="C"||t.cmask=="Q"){for(i=0;i<t.valuelist[0].length;i++)r+=t.valuelist[0][i]+(i==t.valuelist[0].length-1?"":",");u.push(n+r)}else if(t.ctype=="B"){for(r+=t.valuelist[0],i=1;i<t.valuelist.length;i++)t.valuelist[i]&&(r+=","+t.valuelist[i].toString());u.push(n+r+(t.mediaType!==""?"|#mt="+t.mediaType+"#":""))}else for(f=this._getCombinations("",t.valuelist),i=0;i<f.length;i++)u.push(n+r+f[i]+(t.mediaType!==""?"|#mt="+t.mediaType+"#":""));return u};this._getAusCastItemConstructs=function(n,t){for(var u=[],r="#fp=",i=0;i<t.valuelist.length;i++)t.valuelist[i]&&(r+=t.valuelist[i].join(",")),i!=t.valuelist.length-1&&t.valuelist[i+1]&&(r+="~");return u.push(n+r+"|#atc="+t.atcValue+"#"+(t.mediaType!==""?"mt="+t.mediaType+"#":"")),u}};b365.Ui.Betslip.CastBetItemsBuilder.prototype={betItems:function(){for(var o=[],t="",n,u,i,f,e,r=0;r<this._construct.length;r++){if(n=this._construct[r],t==="")switch(n.ttype){case this._bsInst.toteTypeUKTote:t=this._bsInst.betTypeToteCast;break;case this._bsInst.toteTypeETote:t=this._bsInst.betTypeEToteCast;break;case this._bsInst.toteTypeUSTote:t=this._bsInst.betTypeUsToteCast;break;case this._bsInst.toteTypeForeignTote:t=this._bsInst.toteTypeForeignTote;break;default:t=this._bsInst.betTypeCast}u="pt="+(t==this._bsInst.betTypeCast?"C":"T")+"B#spt="+n.stype+(n.cmask=="P"?"":"#cm="+n.cmask)+"#ct="+n.ctype+(n.c2ID?"#c2="+n.c2ID:"#f="+n.fixid)+(n.classificationId?"#c="+n.classificationId:"");switch(n.cmask){case"P":i=this._getTotePotItemConstructs(u,n);break;default:switch(n.stype){case"A":case"O":i=this._getAusCastItemConstructs(u,n);break;default:i=this._getNoneTotePotItemConstructs(u,n)}}for(f=0;f<i.length;f++)e=new b365.Ui.BetDTO(t),e.parse(i[f]),o.push(e)}return o}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToteBetItemsBuilder=function(n,t){this._bsInst=n;this._construct=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._construct!="undefined"};this._addWinEwPlBet=function(n,t,i){var u,r;n+="#f="+t.fixid;n+=t.stype=="J"?"#o=0/0":"";n+=t.id?"#id="+t.id:"";var f=t.ctype=="E"||t.ctype=="H",o=f?":":",",e="#fp=";if(f)for(r=0;r<t.valuelist[0].length;r++)i.push(n+e+t.valuelist[0][r]);else for(u=t.valuelist[0].slice(o),r=0;r<u.length;r++)i.push(n+e+u[r])};this._addPotBet=function(n,t,i,r){n+="#tmn="+t.totemn+"#tmi="+t.totemi+"#c2="+t.c2ID;i.push(n+this._getTotePotFid(t)+this._getTotePotFp(t)+(r==bs.betTypeTotePotAus?"|#atc="+t.atcValue:""))};this._getTotePotFp=function(n){for(var t="#fp=",r,i=0;i<n.valuelist.length;i++){for(r=0;r<n.valuelist[i].length;r++)t+=n.valuelist[i][r]+"-";t.endsWith("-")&&(t=t.substring(0,t.lastIndexOf("-")));t+=","}return t.endsWith(",")&&(t=t.substring(0,t.lastIndexOf(","))),t};this._getTotePotFid=function(n){return n.fixid&&n.fixid!=""?"#f="+n.fixid:""}};b365.Ui.Betslip.ToteBetItemsBuilder.prototype={betItems:function(n){var o=[],r,t,u,i,f,e;if(this._isValid())for(r=0;r<this._construct.length;r++){t=this._construct[r];t.stype!="T"&&t.stype!="E"&&t.ctype=="E"&&(t.ctype="H");u="pt=TB#spt="+t.stype+"#cm="+t.cmask;i=[];switch(t.cmask){case"D":u+="#ct="+t.ctype;this._addWinEwPlBet(u,t,i);break;default:this._addPotBet(u,t,i,n)}for(f=0;f<i.length;f++)e=new b365.Ui.BetDTO(n),e.parse(i[f]),o.push(e)}return o}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.DefaultSlipTypeSetter=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.DefaultSlipTypeSetter.prototype={setSlipType:function(n){if(this._isValid()){var t=this._bsInst.slipStandard;switch(n){case this._bsInst.betTypeToteCast:case this._bsInst.betTypeToteNonCast:case this._bsInst.betTypeTotePot:t=this._bsInst.slipUKTote;break;case this._bsInst.betTypeUsToteCast:case this._bsInst.betTypeUsToteNonCast:case this._bsInst.betTypeUsTotePot:t=this._bsInst.slipUSTote;break;case this._bsInst.betTypeEToteCast:case this._bsInst.betTypeEToteNonCast:case this._bsInst.betTypeETotePot:t=this._bsInst.slipETote}this._bsInst.setValueInBSCookie("bt",t)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.DuplicateItemValidator=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.DuplicateItemValidator.prototype={isDuplicate:function(n){var i=!1,c,e,u,t;if(this._isValid()){if(n.type==bs.betTypeBetBuilder){var o=function(n,t){var i=n.getValue("fp"),r=t.getValue("fp");return i<r?-1:i>r?1:0},f=n.getBBItems().sort(o),s=this._bsInst.getBetItems(n.type),h=!0;for(t=0;t<s.length;t++)if(c=s[t],e=c.getBBItems().sort(o),f.length===e.length){for(u=0;u<f.length;u++)if(f[u].getValue("fp")!==e[u].getValue("fp")){h=!1;break}if(i=h,i){bsApp.dispatchParticipantEvent({type:"bb_duplicate"});break}}return i}var r=this._bsInst.getBetItems(n.type),a=n.getCnItem("pt"),l=function(n,t){return n.getCnItem("spt")===t.getCnItem("spt")&&n.getCnItem("cm")===t.getCnItem("cm")&&n.getCnItem("ct")===t.getCnItem("ct")&&n.getCnItem("f")===t.getCnItem("f")&&n.getCnItem("fp")===t.getCnItem("fp")};for(t=0;!i&&t<r.length;t++)switch(a){case"S":i=r[t].getCnItem("pid")===n.getCnItem("pid")&&r[t].getCnItem("mid")===n.getCnItem("mid");break;case"CB":i=l(n,r[t]);break;case"TB":switch(n.type){case bs.betTypeToteCast:case bs.betTypeUsToteCast:case bs.betTypeEToteCast:case bs.betTypeToteNonCast:case bs.betTypeUsToteNonCast:case bs.betTypeEToteNonCast:i=l(n,r[t])}break;default:r[t].getCnItem("fp")===n.getCnItem("fp")&&r[t].getCnItem("f")==n.getCnItem("f")&&r[t].getCnItem("pt")!=="S"&&(i=r[t].getCnItem("Inc")==n.getCnItem("Inc")?!0:!1)}}return i}},function(){var n;Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.InProgressDisplayHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"};this._setText=function(n){$("#bsDiv #pro>ul>li .progressMsg").html(n)}};b365.Ui.Betslip.InProgressDisplayHandler.prototype={handle:function(t){var c=t[0],u=t[1],e=t.length>3?t[3]:"alert",o,i,r,s,f;if(this._isValid()){if(r=t[2],c=="show")s=r==this._bsInst.reqTypeBetBrk,r==this._bsInst.reqTypeReferBet||r==this._bsInst.reqTypePollReferredBet?this._setText(betSlipML.processingbet+"<br/><br/>"+betSlipML.additionalstakereferred):r==this._bsInst.reqTypePollTempBetReceipt&&this._setText(betSlipML.processingbet),n&&clearTimeout(n),n=setTimeout(Function.createDelegate(this,function(){var t,n=$("#bsDiv");n.find(".bs-Alert").addClass("hidden");s?this._bsInst.isSiteOverlaySpinnerShowing=this._bsController.showSiteOverlaySpinner():(n.find("#pro").removeClass("hidden"),n.hasClass("receipt")||n.find(".bs-Footer, .bs-ConfirmationFooter").addClass("hidden"));this._bsController.clientActionInProgress(!0);this._bsController&&this._bsController.clientEnhancedMode()&&(n.find("li").hasClass("disabledBetSlip")||(t=$('li[class$="multiple-section multipleBets"], li[data-item-type$="single"], li[data-item-type$="cast"], li[data-item-type$="tote-single"], li[data-item-type$="tote-cast"], li[data-item-type$="tote-pot"], li[data-item-type$="tote-pot-leg"]',"#bsDiv"),this._bsController._enhancedBetSlipAnimations.disableBetSlip(t,n)));this._bsInst.contentChangedOnClient()}),1e3),new b365.Ui.Betslip.EnhancedElementsLockUnlockHandler(this._bsInst,this._bsController).lock();else{if(n&&clearTimeout(n),this._bsInst.isSiteOverlaySpinnerShowing&&(this._bsInst.isSiteOverlaySpinnerShowing=!this._bsController.hideSiteOverlaySpinner()),i=$("#bsDiv"),$("#bsDiv #pro").addClass("hidden"),i.hasClass("receipt")||i.find(".bs-Footer").removeClass("hidden"),this._bsController.clientActionInProgress(!1),u){if(e==="alert"){var l=betSlipML.ok?betSlipML.ok:"OK",a='<div  className="bs-Alert_ErrOkButton">'+l+"<\/div>",h=$(".betSlip");h.addClass("bs-Alert_ErrMsgContainer");h.html('<div  className="bs-Alert_Msg bs-Alert_ErrorMsg" >'+u+a+"<\/div>")}else this._bsController.getMessageDisplayHandler().showMsg(u,e);f=this._bsController.GetCurrentDialogRef();f&&f.hideDialog()}this._bsController&&this._bsController.clientEnhancedMode()&&$("li",i).hasClass("disabledBetSlip")&&(o=$('li[class$="multiple-section multipleBets"], li[data-item-type$="single"], li[data-item-type$="cast"], li[data-item-type$="tote-single"], li[data-item-type$="tote-cast"], li[data-item-type$="tote-pot"], li[data-item-type$="tote-pot-leg"]',i),this._bsController._enhancedBetSlipAnimations.enableBetSlip(o,i));new b365.Ui.Betslip.EnhancedElementsLockUnlockHandler(this._bsInst,this._bsController).unlock()}this._bsInst.contentChangedOnClient()}}}}(),function(){Type.registerNamespace("b365.Ui.Betslip");var n,t;b365.Ui.Betslip.ConfirmationDialog=function(i,r){scope=this;this._bsInst=i;this._controller=r;this._closeAction="close";this._referAction="refer";this._splitAction="split";this._clearAndAddAction="clearAndAdd";this._quickBetCancel="cancelquickbet";this._quickBetActivate="activatequickbet";this._isValid=function(){return typeof this._bsInst!="undefined"};this._clearDialogAndConstruct=function(){n=null;this._controller.ClearCurrentDialogRef()};this._handleClearAndAdd=function(){$("#closeButton").removeClass("disabled");$("#okButton").removeClass("disabled");var i=n;this.hideDialog();this._clearDialogAndConstruct();new b365.Ui.Betslip.AddBetHandler(this._bsInst,this._controller).handle(i,!0,t);this._controller.refreshBetslip(!0)};this._handleRefer=function(){new b365.Ui.Betslip.ReferBetRequestDespatcher(this._bsInst,this._controller).despatch()};this._handleSplitBet=function(){this._bsInst.req(this._bsInst.reqTypeSplitBet,"","",this._bsController)};this._handleQuickBetCancel=function(){this._controller._quickBet.setSwitchAndState(!1)};this._handleQuickBetActivate=function(){this._bsInst.clearBets(!0);this._controller.itemsRemoved();this._controller._quickBet.setSwitchAndState(!0)}};b365.Ui.Betslip.ConfirmationDialog.prototype={handleCancel:function(){$("#closeButton").removeClass("disabled");$("#okButton").removeClass("disabled");scope.hideDialog();scope._clearDialogAndConstruct()},showIncompatibleSelectionsDialog:function(i,r){var f=this,u=!1;typeof i!="undefined"&&i&&(n=i,t=r,i.indexOf("pom")>-1?u=!0:(items=this._bsInst.getBetItems(),u=items.length>0&&items[0].getStItem("pom")=="Y"),f._controller.showSiteConfirmation(f,"",u?betSlipML.incompatiblectcselectionsclear:betSlipML.incompatibleselectionsclear,u?betSlipML.ok:betSlipML.cont,this._clearAndAddAction,betSlipML.cancel,this._closeAction,"incompDialogue",!0))},showQuickBetActivationDialog:function(){var n=this;n._controller.showSiteConfirmation(n,betSlipML.qbtitle,betSlipML.qbtext,betSlipML.qbbutton1text,this._quickBetCancel,betSlipML.qbbutton2text,this._quickBetActivate,"quickbet",!0)},handleClick:function(n){var i=$(n.target),r=i.attr("data-action"),t;if(n.preventDefault(),n.stopPropagation(),!i.hasClass("disabled"))switch(r){case this._closeAction:this.handleCancel();break;case this._clearAndAddAction:this._handleClearAndAdd();break;case this._referAction:$("#closeButton").addClass("disabled");t=$("#okButton");t.addClass("disabled");t[0].innerHTML=window.betSlipML.referringBet+'<span  className="bs-DialogButton_Spinner"><\/span>';this._handleRefer();break;case this._splitAction:$("#closeButton").addClass("disabled");t=$("#okButton");t.addClass("disabled");t[0].innerHTML=window.betSlipML.processing+'<span  className="bs-DialogButton_Spinner"><\/span>';this._handleSplitBet();break;case this._quickBetCancel:this._handleQuickBetCancel();break;case this._quickBetActivate:this._handleQuickBetActivate()}},setDialog:function(n){this._controller.SetCurrentDialogRef(n)}};b365.Ui.Betslip.ConfirmationDialog.prototype.hideDialog=function(){this._controller._dlg&&this._controller._dlg.hideDialog()}}(),function(){Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PushBetDialog=function(n,t,i,r,u,f,e){this._bsInst=n;this._controller=t;this._construct=i;this._pushStatus=r;this._betItemId=u;this._betItemType=f;this._fixtureParticipantId=e;this._proceedAction="ipProceed";this._cancelAction="ipCancel";this._clearDialogAndConstruct=function(){this._construct=null;this._controller.ClearCurrentDialogRef()};this._handleCancel=function(){this._betItemId&&this._betItemType&&new b365.Ui.Betslip.ItemDeleteExecutor(this._bsInst,this._controller,this._betItemId,"single").execute();this._clearDialogAndConstruct()};this._handleProceed=function(){this._controller.highlightSelectedBets();this._controller.pushBetPopupAcceptedHandler(this._fixtureParticipantId);this._clearDialogAndConstruct()}};b365.Ui.Betslip.PushBetDialog.prototype={handleClick:function(n){var t=$(n.target),i=t.attr("data-action");if(n.preventDefault(),n.stopPropagation(),!t.hasClass("disabled"))switch(i){case this._cancelAction:this._handleCancel();break;case this._proceedAction:this._handleProceed()}},setDialog:function(n){this._controller.SetCurrentDialogRef(n)}}}();Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetBuilderMaxBetReqCompleteHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.BetBuilderMaxBetReqCompleteHandler.prototype={handle:function(n,t){if(this._isValid()){var i=$("li[data-item-type='betbuilder'][data-item-id='"+n+"'] input[data-inp-type='sngstk']");i.length>0&&(i[0].value=t,this._bsInst.getBetItemById(this._bsInst.itemTypeBetBuilder,n).setStItem("st",t),new b365.Ui.Betslip.StakeChangedHandler(this._bsInst,this._bsController).handle(i[0]),this._bsInst.updateState())}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetMaxRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._maxBetKeySingles="N";this._maxBetKeyCasts="C";this._maxBetKeyMultiples="M";this._maxBetKeyBetBuilder="B";this._maxBetItemTypeSingle="1";this._maxBetItemTypeBetBuilder="22";this._maxBetItemTypeCast="50";this._getKey=function(n){return n==this._bsInst.itemTypeSingle?this._maxBetKeySingles:n==this._bsInst.itemTypeCast?this._maxBetKeyCasts:n==this._bsInst.itemTypeBetBuilder?this._maxBetKeyBetBuilder:this._maxBetKeyMultiples};this._getMaxBetItemType=function(n,t){return n==this._bsInst.itemTypeSingle?this._maxBetItemTypeSingle:n===this._bsInst.itemTypeBetBuilder?this._maxBetItemTypeSingle:n==this._bsInst.itemTypeCast?this._maxBetItemTypeCast:this._bsInst.getBetItemById(this._bsInst.itemTypeMultiple,t).getCnItem("id")};this._isValid=function(){return typeof this._bsInst!="undefined"};this._getMaxBetType=function(n){return n==this._bsInst.itemTypeSingle?this._bsInst.betTypeNormal:n==this._bsInst.itemTypeCast?this._bsInst.betTypeCast:n==this._bsInst.itemTypeBetBuilder?this._maxBetItemTypeBetBuilder:this._bsInst.betTypeMultiple}};b365.Ui.Betslip.BetMaxRequestDespatcher.prototype={despatch:function(n){if(this._isValid())if(this._bsController._delegates.isAuthenticated()){var i=new b365.Ui.Betslip.ItemInformation(n),t=i.itemIndexAndType();this._bsInst.req(this._bsInst.reqTypeMaxBet,"key="+this._getKey(t[1])+"-"+t[0]+"-"+this._getMaxBetItemType(t[1],t[0])+"-"+this._getMaxBetType(t[1]))}else this._bsController.getMessageDisplayHandler().showMsg(betSlipML.pleaselogin)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.IfBetActionChangeHandler=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.IfBetActionChangeHandler.prototype={handle:function(n,t){var u,i;if(n>0)u=this._bsInst.getBetItemById(this._bsInst.betTypeNormal,n),u.setStItem("ac",t.value);else{var f=this._bsInst.getBetItems(this._bsInst.betTypeNormal),r=$("#bsDiv .ifbetaction"),e=$(t).find("option:selected").text();for(i=0;i<f.length;i++)f[i].setStItem("ac",t.value),r[i].selectedIndex=t.value==r[i].options[0].value?0:1,$(r[i]).parent(".betslip-select").attr("data-text",e)}this._bsInst.updateState()}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BankerToggleRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.BankerToggleRequestDespatcher.prototype={despatch:function(n){var t=n.target,i,r,u;this._isValid()&&t.tagName.toLowerCase()=="div"&&(i=new b365.Ui.Betslip.ItemInformation(t),r=i.itemIndexAndType(),u=this._bsInst.getBetItemById(this._bsInst.betTypeNormal,r[0]),u.setStItem("bk",$(t).hasClass("bs-BankerIndicator_Btn-selected")||$(t.parentElement).hasClass("bs-BankerIndicator_Btn-selected")?"0":"1"),this._bsInst.toggledBankerSelectionState=!0,this._bsInst.updateState(),this._bsInst.refresh(this._bsInst.betTypeAll))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.OddsChangeHandler=function(n,t){this._bsInst=n;this._bsController=t;this._serverErrorReqType=99;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.OddsChangeHandler.prototype={handle:function(n,t){if(this._isValid()){var i=n.target,r=this._bsInst.getBetItemById(this._bsInst.betTypeNormal,t);i.value=="SP"?(r.setStItem("sp","1"),r.setStItem("tr","")):r.setStItem("sp","0");$(i).parent(".betslip-select").attr("data-text",$(i).find("option:selected").text());this._bsInst.updateState();new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this._bsController).calculate()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.OddsLineChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._bsWrapper=$("#bsDiv");this._isValid=function(){return typeof this._bsInst!="undefined"};this._updateMultiplesOddsDisplay=function(n){var u=this,f=document.getElementsByClassName("bs-MultipleBets_Odds")[0],t,i="",e,r;if(f){if(n){e=u._bsController.getUsersOddsType();i=n;switch(e){case 1:t=n-1;t=u._roundDown(t,2);t=parseFloat(t.toFixed(2));i=t+"/1";break;case 2:i=u._roundDown(n,2);break;case 3:r=n-1;i=r>.999999?"+"+String(r*100+.5|0):"-"+String(100/r+.5|0)}}f.textContent=i}};this._roundDown=function(n,t){return t=t||0,Math.floor(n*Math.pow(10,t))/Math.pow(10,t)}};b365.Ui.Betslip.OddsLineChangedHandler.prototype={handle:function(n){var s=this,h,r,v=!1,u,f,a,t,o;if(s._isValid()){var e=n||!1,c=s._bsInst.getBetItems(),i="0",l=this._bsInst.getBetItems(this._bsInst.betTypeBetBuilder);if(c.length===0&&l.length===0)return;if(!e){for(u=document.getElementsByClassName("bs-Item"),h=1,t=0,o=c.length;t<o;t++)r=c[t],f=eval(r.getCnItem("o"))+1.000000000001,this._bsInst.useTruncated2dpPriceForReturnsCalc?f=Math.floor(f*100+1e-6)/100:window.location.host.split(".").pop()=="it"&&window.pushedConfig.getIsPSQFV4Enabled()&&(f=Math.floor(f*1e3+1e-6)/1e3),h*=f,r.getStItem("sp")==="1"&&(v=!0),i=r.getStItem("olc"),i&&Number(i)>0&&(e=!0,u[t]&&(u[t].className.indexOf("oddsChange")===-1&&i!=2&&(u[t].className+=" oddsChange"),u[t].className.indexOf("hcapChange")===-1&&i!=1&&(u[t].className+=" hcapChange")));s._updateMultiplesOddsDisplay(v?null:h)}if(a=$("#BetSlipDialogueAddToBetslip"),!e)for(t=0,o=l.length;t<o;t++)if(r=l[t],i=r.getStItem("olc"),i&&Number(i)>0){e=!0;break}e?($(".acceptChanges",this._bsWrapper).removeClass("hidden"),$("a.placeBet",this._bsWrapper).addClass("hidden"),$("a",a).addClass("disabled").attr("data-nav",""),this._bsController.getMessageDisplayHandler().showMsg(betSlipML.oddsChanged)):($(".acceptChanges",this._bsWrapper).addClass("hidden"),$("a",a).removeClass("disabled").attr("data-nav","AddToBetSlip"),$("a.placeBet",this._bsWrapper).removeClass("hidden"),this._bsController.getMessageDisplayHandler().hideMsg());this._bsInst.changeBetslipHeight()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.UpdateStateHandler=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.UpdateStateHandler.prototype={handle:function(){this._isValid()&&(this._bsInst.setValueInBSCookie("ns",$bto.serialize(this._bsInst.getBetItems(this._bsInst.betTypeNormal))),this._bsInst.setValueInBSCookie("ms",$bto.serialize(this._bsInst.getBetItems(this._bsInst.betTypeMultiple))),this._bsInst.setValueInBSCookie("cs",$bto.serialize(this._bsInst.getBetItems(this._bsInst.betTypeCast))),this._bsInst.setValueInBSCookie("bb",$bto.serialize(this._bsInst.getBetItems(this._bsInst.betTypeBetBuilder))))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.RestoreStateHandler=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.RestoreStateHandler.prototype={handle:function(){if(this._isValid()){this._bsInst.setBetItems($bto.parseCookieString(this._bsInst.getValueFromBSCookie("ns",""),this._bsInst.betTypeNormal),this._bsInst.betTypeNormal);this._bsInst.setBetItems($bto.parseCookieString(this._bsInst.getValueFromBSCookie("ms",""),this._bsInst.betTypeMultiple),this._bsInst.betTypeMultiple);this._bsInst.setBetItems($bto.parseCookieString(this._bsInst.getValueFromBSCookie("cs",""),this._bsInst.betTypeCast),this._bsInst.betTypeCast);var n=this._bsInst.getValueFromBSCookie("bb",""),t=$bto.parseCookieString(n,this._bsInst.betTypeBetBuilder);this._bsInst.setBetItems(t,this._bsInst.betTypeBetBuilder);this._bsInst.betSlipItemsChanged()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PlaceBetErrorHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.PlaceBetErrorHandler.prototype={handle:function(){this._isValid()&&($(".emptyBetslip").hide(),$(".placeBet").hide(),this._bsInst.betslipError(),new b365.Ui.Betslip.ViewResetter(this._bsInst,this._bsController).reset(),this._bsInst.addReceiptHeaderLinks(),new b365.Ui.Betslip.FooterLinksSlipRender(this._bsInst,$(".bs-Footer")).render())}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CastBreakdownRequestDespatcher=function(n,t){this._bsController=t;this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.CastBreakdownRequestDespatcher.prototype={despatch:function(n){if(this._isValid()){var t=new b365.Ui.Betslip.BetBreakdownKeyGenerator(this._bsInst,this._bsInst.getBetItemById(this._bsInst.itemTypeCast,n),this._bsInst.itemTypeCast,n).generate();this._bsController.showBetslipBreakdownDialog(t)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AusToteToolTipHtmlBuilder=function(){};b365.Ui.Betslip.AusToteToolTipHtmlBuilder.prototype={getHtml:function(n){return"<span>"+n+"<\/span>"}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.SingleToolTipHtmlBuilder=function(){this._alwaysInclude="*~"};b365.Ui.Betslip.SingleToolTipHtmlBuilder.prototype={getHtml:function(n,t){var r=n.find("input[data-inp-type='ewcb']").length>0||t.length>=3&&t[2].startsWith(this._alwaysInclude),u,i;return r&&(t[2]=t[2].replace(this._alwaysInclude,"")),u=n.hasClass("hdCap"),i="<label  className='ttHead'>"+t[0]+"<\/label><br />",i+=t[1]&&t[1].length>0?"<label>"+t[1]+"<\/label><br />":"",i+="<label>",i+=$("#bsDiv .betReceipt").length==0&&n.children("div.pitcher").length>0?n.find("div.pitcher").find(".pitcher-sel")[0].options[0].selected?t[3]:"("+n.find("div.pitcher .pitcher-sel>option:selected").text()+")":t[3]&&t[3].length>0?t[3]:"",i+=(u?" "+n.find(".hdCapDisplay").text():"")+"<\/label><br/>",t.length==5&&t[4]!=""&&(i+="<label>"+t[4]+"<\/label><br />"),r&&(i+=t[2]),i}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToteSingleToolTipHtmlBuilder=function(){};b365.Ui.Betslip.ToteSingleToolTipHtmlBuilder.prototype={getHtml:function(n){var t="",r;return n.length>2&&n[2].length>0&&n[2].indexOf("#")>-1&&(r=n[i].split("#"),t+="<br /><label>"+r[0]+" ("+r[1]+")<\/label>"),t+="<br /><label>"+n[3]+"<\/label>","<label  className='ttHead'>"+n[0]+"<\/label><br /><label>"+n[1]+"<\/label>"+t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.UKToteBetStakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._stakeCookieKey="st";this._eachWayCookieKey="ew";this._betCountCookieKey="bc";this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.UKToteBetStakeChangedHandler.prototype={handle:function(n){var e,o;if(this._isValid()){var b=$(n),s=new b365.Ui.Betslip.ItemInformation(n),h=s.itemIndexAndType(),c=s.itemElement();$blib.isDecimal(n.value)==!1&&(n.value="");var w=n.getAttribute("data-no-convert")?!0:!1,t=new b365.Ui.Formatter,i=Number($("#bsDiv>ul:first-child").attr("data-xrte"));(i==0||w==!0)&&(i=1);var l=Math.pow(10,t.numDecPlcs(i)),r=this._bsInst.getBetItemById(h[1],h[0]),u=r.getStItem(this._betCountCookieKey);typeof u=="undefined"&&(u=1);r.getStItem(this._eachWayCookieKey)=="1"&&(u=u*2);var f=t.roundValue(this._bsController._currencyDisplayHelper.unformatCurrency(n.value)),a=Math.pow(10,t.numDecPlcs(f)),v=t.roundDecimal(String(u*f)),y=$(".totestkbc",c),p=$(".bs-ToteStakeUsersCurrency",c);y.length>0||p.length>0?(e=i==0?0:t.roundDecimal(String(Number(f)*a*i*l/l/a)),o=i==0?0:t.roundDecimal(String(e*u)),p.text(o=="0"?"":o),r.setStItem("st",this._bsController._currencyDisplayHelper.formatCurrency(e)),y.text(v=="0"?"":this._bsController._currencyDisplayHelper.formatCurrency(v))):r.setStItem("st",this._bsController._currencyDisplayHelper.formatCurrency(f));r.setStItem("gust",f);r.setStItem("gst",f)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.USToteBetStakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._stakeCookieKey="st";this._eachWayCookieKey="ew";this._betCountCookieKey="bc";this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.USToteBetStakeChangedHandler.prototype={handle:function(n){var o,e,s,h;if(this._isValid()){var g=$(n),c=new b365.Ui.Betslip.ItemInformation(n),l=c.itemIndexAndType(),a=c.itemElement();$blib.isDecimal(n.value)==!1&&(n.value="");var v=n.getAttribute("data-no-convert")?!0:!1,t=new b365.Ui.Formatter,i=Number($("#bsDiv>ul:first-child").attr("data-xrte"));(i==0||v==!0)&&(i=1);o=Math.pow(10,t.numDecPlcs(i));e=Number($("#bsDiv>ul:first-child").attr("data-xrte-us"));(e==0||v==!0)&&(e=1);var y=Math.pow(10,t.numDecPlcs(e)),r=this._bsInst.getBetItemById(l[1],l[0]),u=r.getStItem(this._betCountCookieKey);typeof u=="undefined"&&(u=1);r.getStItem(this._eachWayCookieKey)=="1"&&(u=u*2);var d=this._bsController._currencyDisplayHelper.unformatCurrency(n.value),f=t.roundValue(d),p=Math.pow(10,t.numDecPlcs(f)),w=t.roundDecimal(String(u*f)),b=$(".totestkbc",a),k=$(".bs-ToteStakeUsersCurrency",a);b.length>0||k.length>0?(s=i==0?0:t.roundDecimal(String(Number(f)*p*e*y/y/p*i*o/o)),h=i==0?0:t.roundDecimal(String(s*u)),k.text(h=="0"?"":this._bsController._currencyDisplayHelper.formatCurrency(h)),r.setStItem("st",s),b.text(w=="0"?"":this._bsController._currencyDisplayHelper.formatCurrency(w))):r.setStItem("st",f);r.setStItem("gust",f);r.setStItem("gst",f)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToteStakeChangedHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.ToteStakeChangedHandler.prototype={handle:function(n){if(this._isValid()){switch(this._bsInst.getSlipType()){case this._bsInst.slipUKTote:new b365.Ui.Betslip.UKToteBetStakeChangedHandler(this._bsInst,this._bsController).handle(n);break;case this._bsInst.slipUSTote:new b365.Ui.Betslip.USToteBetStakeChangedHandler(this._bsInst,this._bsController).handle(n);break;default:new b365.Ui.Betslip.UKToteBetStakeChangedHandler(this._bsInst,this._bsController).handle(n)}this._bsInst.updateState()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToteCastToolTipHtmlBuilder=function(){};b365.Ui.Betslip.ToteCastToolTipHtmlBuilder.prototype={getHtml:function(n,t){return"<label  className='ttHead'>"+t[0]+"<\/label><br /><label>"+t[1]+"<\/label><br/>"+$(n).closest(".bs-ToolTip").html()}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.TotePotToolTipHtmlBuilder=function(){};b365.Ui.Betslip.TotePotToolTipHtmlBuilder.prototype={getHtml:function(n){return"<label  className='ttHead'>"+n[0]+"<\/label><br /><label>"+n[1]+"<\/label><br /><label>"+n[2]+"<\/label>"}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.TotePotLegDeleteExecutor=function(n,t,i,r){this._bsInst=n;this._legIndex=i;this._legType=r;this._legEle=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._legIndex!="undefined"&&typeof this._legType!="undefined"&&typeof this._legEle!="undefined"}};b365.Ui.Betslip.TotePotLegDeleteExecutor.prototype={execute:function(){var n,r,i,u;if(this._isValid()){var c=new b365.Ui.Betslip.ItemInformation(this._legEle),s=c.itemIndexAndType(),h=this._bsInst.getBetItemById(s[1],s[0]),f=this._legIndex.split(":"),e=h.getCnItem("fp").split(","),t=e[f[0]-1].split("-"),l=t.length,o=-1;for(n=l-1;o<0;n--)o=t[n].startsWith(f[1])?n:-1;for(t.splice(o,1),r="",n=0;n<e.length;n++){if(i=e[n],n==f[0]-1)for(i="",u=0;u<t.length;u++)i+=(i.length>0?"-":"")+t[u];r+=(r.length>0?",":"")+i}h.setCnItem("fp",r);this._bsInst.updateState();this._bsInst.req(this._bsInst.reqTypeRefreshSlip)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ConfirmBetRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.ConfirmBetRequestDespatcher.prototype={despatch:function(){this._isValid()&&this._bsInst.req(this._bsInst.reqTypeConfirmBet)}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PitcherDetailsRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.PitcherDetailsRequestDespatcher.prototype={despatch:function(n){if(this._isValid()){var t=n.target,i="key=B-"+t.href.split("_")[1];this._bsController.showPitcherDetails(i)}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.CastToolTipHtmlBuilder=function(){};b365.Ui.Betslip.CastToolTipHtmlBuilder.prototype={getHtml:function(n,t){return"<label  className='ttHead'>"+t[0]+"<\/label><br /><label>"+t[1]+"<\/label><br />"+$(n).find(".bs-tt").html()}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.TeaserChangeHandler=function(n){this._bsInst=n;this._teaserItemCookieKey="ti";this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.TeaserChangeHandler.prototype={handle:function(n){if(this._isValid()){var t=n.target;t.selectedIndex>-1&&(this._bsInst.setValueInBSCookie("ti",t.options[t.selectedIndex].value),this._bsInst.updateState(),this._bsInst.refresh(this._bsInst.betTypeAll))}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.AusToteChangeHandler=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.AusToteChangeHandler.prototype={handle:function(n,t,i){if(this._isValid()){console.log(1);var r=$(n.target),f=this._bsInst.getBetItemById(i,t),u=$(r).find("option:selected");f.setStItem("atc",u.val());$(r).parent(".betslip-select").attr("data-text",u.text());this._bsInst.updateState()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ForeignToteConstructCorrector=function(n,t){this._bsInst=n;this._construct=t;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._construct!="undefined"}};b365.Ui.Betslip.ForeignToteConstructCorrector.prototype={GetCorrectedConstruct:function(){if($.isArray(this._construct))for(var n=0;n<this._construct.length;n++)(this._construct[n].cmask=="1"||this._construct[n].cmask=="2"||this._construct[n].cmask=="3"||this._construct[n].cmask=="4")&&(this._construct[n].ctype="C");return this._construct}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PollingExpiredHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.PollingExpiredHandler.prototype={handle:function(n){if(this._isValid()&&(n[0]===this._bsInst.reqTypePollTempBetReceipt&&$("#bsDiv").find("[id^=tempbetstatus_title_].pending").removeClass("pending").addClass("timedout"),this._bsInst.resetPoll(),new b365.Ui.Betslip.LockUnlockHandler(this._bsInst,this._bsController).handle(!1,!1),new b365.Ui.Betslip.InProgressDisplayHandler(this._bsInst,this._bsController).handle(["hide",betSlipML.pleasecheckmembers]),n[0]===this._bsInst.reqTypePollReferredBet)){var t=this._bsController.GetCurrentDialogRef();t&&t.hideDialog()}}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PollBetRequestDespatcher=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.PollBetRequestDespatcher.prototype={despatch:function(n){var i,t;this._isValid()&&(t="",n[1]&&n[1].length>0&&(t="br="+n[1]),n.length>2&&n[2]&&n[2].length>0&&(t.length>0&&(t+="&"),t+=n[2]),this._bsController.clientEnhancedMode()&&(i=$("#bsDiv"),i.find("ul:first-child").hasClass("betReceipt")&&i.find("li").removeClass("disableBetSlip").removeClass("enableBetSlip").removeClass("disabledBetSlip")),this._bsInst.req(n[0],t,"",this._bsController))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetBreakdownKeyGenerator=function(n,t,i,r){this._bsInst=n;this._item=t;this._itemType=i;this._itemIndex=r;this._betTypeIDCookieKey="id";this._eachWayCookieKey="ew";this._fixtureCookieKey="f";this._fixtureParticipantCookieKey="fp";this._stakeCookieKey="st";this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._item!="undefined"&&typeof this._itemType!="undefined"&&typeof this._itemIndex!="undefined"};this._getStake=function(){return this._item.getStItem(this._stakeCookieKey)===undefined?"0":String(parseInt(this._item.getStItem(this._stakeCookieKey)*100))};this._isEachWay=function(){return this._item.getStItem(this._eachWayCookieKey)&&this._item.getStItem(this._eachWayCookieKey)=="1"?!0:!1};this._getCastKey=function(){return"key=C-"+(this._getStake(this._item)+"-"+String(Number(this._itemIndex)+1)+"-0")};this._getMultiplesKey=function(){return"key=M-"+(this._getStake(this._item)+"-"+this._item.getCnItem(this._betTypeIDCookieKey)+"-"+(this._isEachWay()?"1":"0"))};this._getSingleKey=function(){return"key=N-"+(this._getStake(this._item)+"-"+this._item.getCnItem(this._fixtureCookieKey)+"-"+this._item.getCnItem(this._fixtureParticipantCookieKey)+"-"+(this._isEachWay()?"1":"0"))}};b365.Ui.Betslip.BetBreakdownKeyGenerator.prototype={generate:function(){var n=null;if(this._isValid())switch(this._itemType){case this._bsInst.itemTypeMultiple:n=this._getMultiplesKey();break;case this._bsInst.itemTypeCast:n=this._getCastKey();break;default:n=this._getSingleKey()}return n}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetSlipPopUpMessageController=function(n){this._bsContext=n;this._messageTimeout=function(){window.clearTimeout(this._autoCloseTimer);this.HideMessage()};this._clearPopUpShowing className=function(){$(".showing-fade-popup").removeClass("showing-fade-popup")};this._eventTargetElement=$(".betSlipPopupHeader>a>span:first-child");$(document).on("bsInfoMessage",$.proxy(this.ShowMessage,this));$(document).on("HideBsInfoMessage",$.proxy(this.HideMessage,this))};b365.Ui.Betslip.BetSlipPopUpMessageController.prototype={ShowMessage:function(n,t,i){var r=this,u,s,h;if(r._bsContext.IsPortraitMode()&&r._bsContext.IsPrematch()&&!$("#bsDiv").is(":visible")){r._eventTargetElement=typeof window.MyBetsController!="undefined"&&window.MyBetsController.isInitialised()?$("#myBetsHeader>ul>li:first-child"):$(".betSlipPopupHeader>a>span:first-child");u=$("#ttDivFade");u.removeClass("ttHidden");r._autoCloseTimer!=-1&&r._messageTimeout();r._clearPopUpShowingClass();r._eventTargetElement.addClass("showing-fade-popup");i||(i=140);$.isNumeric(i)||(i=parseInt(i.replace(/px/g,"").replace(/;/g,"")));u.find(".cnt").html(t).css("max-width",i).css("width",i);var f=10,e=r._eventTargetElement.offset(),o=r._eventTargetElement.outerHeight(!0);o&&(f=o);s=e.top+f+4;h=e.left+r._eventTargetElement.outerWidth(!0)/2-i/2;u.css("top",s).css("left",h).css("max-width",i+"px").css("width",i+"px");u.fadeIn();this._autoCloseTimer=window.setTimeout(Function.createDelegate(r,r._messageTimeout),3500)}n.stopPropagation()},HideMessage:function(){this._clearPopUpShowingClass();$("#ttDivFade").fadeOut().addClass("ttHidden")}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.TaxCalculator=function(n){this._bsInst=n;this._taxRates=0;this._taxCalculationMethod="";this._isFreeBet=!1;var t=$("#bsDiv>ul").attr("data-txr"),i=$("#bsDiv>ul").attr("data-tcm");typeof t!="undefined"&&(this._taxRates=t);typeof i!="undefined"&&(this._taxCalculationMethod=i);this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.TaxCalculator.prototype={getstakeToTax:function(n,t,i){return t==-1?i-n:i<=t?i-n:t-n},parseTaxRateForStakeAndCalculateTotalReturns:function(n,t){for(var p=new b365.Ui.Formatter,r=0,u=0,s=0,w=this._taxRates.toString(),e=w.split("#"),b=Number(p.roundValue(String(n))),l=t*b,a=Number(0),v=Number(0),i,f,o,y,h,c,r=0;r<e.length;r++)i=e[r].split(","),i.length>4&&(f=Number(i[0]),o=Number(i[1]),y=Number(i[2]),h=Number(i[3]),c=Number(i[4]),l>f&&(a=this.getstakeToTax(f,o,l),u=u+a*h));for(this._isFreeBet||(u=u+n),r=0;r<e.length;r++)i=e[r].split(","),i.length>4&&(f=Number(i[0]),o=Number(i[1]),y=Number(i[2]),h=Number(i[3]),c=Number(i[4]),u>f&&(v=this.getstakeToTax(f,o,u),s=s+v*c));return s},calcReturnsByLine:function(n,t){n=isNaN(n)?0:Number(n);var r=0,i,u;try{i=eval(t)}catch(f){return 0}return isNaN(i)?0:(this._bsInst.useTruncated2dpPriceForReturnsCalc?i=Math.floor(i*100+1e-6)/100:window.location.host.split(".").pop()=="it"&&window.pushedConfig.getIsPSQFV4Enabled()&&(i=Math.floor(i*1e3+1e-6)/1e3),this._taxCalculationMethod==2?(u=n*100%100,u>0&&(u=u/100,r=this.parseTaxRateForStakeAndCalculateTotalReturns(u,i)),n=Math.floor(n),r=r+n*this.parseTaxRateForStakeAndCalculateTotalReturns(1,i)):r=this.parseTaxRateForStakeAndCalculateTotalReturns(n,i),r=parseFloat(r.toPrecision(12)),this.floorTo2dp(r))},floorTo2dp:function(n){var t,i;return t=n.toString(),i=t.indexOf("."),i>-1?t=t.substr(0,i+3):t+=".00",parseFloat(t).toFixed(2)}};BetSlipDelegates.prototype.isPortraitMode=function(){var n=this;return n._bsContext&&n._bsContext.IsPortraitMode?n._bsContext.IsPortraitMode():!1};BetSlipDelegates.prototype.isPrematch=function(){var n=this;return n._bsContext&&n._bsContext.IsPrematch?n._bsContext.IsPrematch():!1};BetSlipDelegates.prototype.isAuthenticated=function(){var n=this;return n._bsContext&&n._bsContext.IsAuthenticated?n._bsContext.IsAuthenticated():!1};BetSlipDelegates.prototype.updateBalance=function(){var n=this;n._bsContext&&n._bsContext.UpdateBalance&&n._bsContext.UpdateBalance()};BetSlipDelegates.prototype.showOverlay=function(){var n=this;n._bsContext&&n._bsContext.ShowPleaseWaitSpinner&&n._bsContext.ShowPleaseWaitSpinner()};BetSlipDelegates.prototype.hideOverlay=function(){var n=this;n._bsContext&&n._bsContext.HidePleaseWaitSpinner&&n._bsContext.HidePleaseWaitSpinner()};BetSlipDelegates.prototype.showTooltip=function(n){var t=this;t._bsContext&&t._bsContext.ShowTooltip&&t._bsContext.ShowTooltip(n)};BetSlipDelegates.prototype.hideTooltip=function(){var n=this;n._bsContext&&n._bsContext.HideTooltip&&n._bsContext.HideTooltip()};BetSlipDelegates.prototype.showLoginPage=function(){var n=this;n._bsContext&&n._bsContext.ShowLoginPage&&n._bsContext.ShowLoginPage()};BetSlipDelegates.prototype.toggleQuickBet=function(){var n=this;n._bsContext&&n._bsContext.ToggleQuickBet&&n._bsContext.ToggleQuickBet()};BetSlipDelegates.prototype.toggleQuickBetHelpTooltip=function(n){var t=this;t._bsContext&&t._bsContext.ToggleQuickBetHelpTooltip&&t._bsContext.ToggleQuickBetHelpTooltip(n)};BetSlipDelegates.prototype.removeQuickBetTooltip=function(){var n=this;n._bsContext&&n._bsContext.RemoveQuickBetTooltip&&n._bsContext.RemoveQuickBetTooltip()};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.StakeEntryRules=function(){function n(n){this._bsController=n}return n.prototype.PushBetDisplayUpdate=function(n,t,i){var f=$('#bsDiv li[data-item-id="'+n+'"]'),e=f.attr("data-item-push"),o=$blib.to2DP(i.value),s=this._bsController._bsInst.getBetItems(t)[n],h=new b365.Ui.Betslip.TaxCalculator(this._bsController._bsInst),p=$blib.getItemOdds(t,s),u,r,c,l,a,v,y;this._bsController.getPushMarketsEnabled()&&e>0&&e<5&&(r=f.children(".italy-push-text"),o>0?(u=$blib.pad2DP(String(o/2)),c=r.find(".italy-push-stake"),v=r.find(".italy-push-win-return"),y=r.find(".italy-push-draw-return"),c.text(u+" "+betSlipML.towin+" "),l=$blib.pad2DP(String(h.calcReturnsByLine(Number(u),p)*2)),a=$blib.pad2DP(String(h.calcReturnsByLine(Number(u),"1/1"))),v.text(this._bsController._currencyDisplayHelper.formatCurrency(l)),y.text(this._bsController._currencyDisplayHelper.formatCurrency(a)),r.removeClass("no-stake")):r.addClass("no-stake"),s.setCnItem("ipms",1))},n}();BetSlipController.prototype.GetBetSlipMode=function(){var n=this;return new b365.Ui.Betslip.ModeResolver(n._bsInst).resolve()};BetSlipController.prototype.SetBetSlipTextBoxMinValues=function(){this._setTextBoxesMinNumeric()};BetSlipController.prototype.OnItemBetMax=function(n){new b365.Ui.Betslip.BetMaxRequestDespatcher(this._bsInst,this).despatch(n)};BetSlipController.prototype.OnItemStakeChanged=function(n){new b365.Ui.Betslip.StakeChangedHandler(this._bsInst,this).handle(n)};BetSlipController.prototype.SetCurrentDialogRef=function(n){this._dlg=n};BetSlipController.prototype.GetCurrentDialogRef=function(){return this._dlg};BetSlipController.prototype.ClearCurrentDialogRef=function(){this._dlg=null};BetSlipController.prototype.CloseCurrentDialogClearRef=function(){if(this._dlg!==null){try{this._dlg.hideDialog()}catch(n){}this._dlg=null}};BetSlipController.prototype.OnBetslipContentLoaded=function(){var n=this,t,i,r;new b365.Ui.Betslip.RestoreStateHandler(n._bsInst).handle();b365.Ui.Betslip.ToggleMultiples&&new b365.Ui.Betslip.ToggleMultiples(n._bsInst,n).reset();t=document.getElementsByClassName("bs-useBetCredit")[0];b365.Ui.Betslip.ToggleBetCredit&&t&&t.className.indexOf("hidden")==-1&&new b365.Ui.Betslip.ToggleBetCredit(n._bsInst,n).reset();n._suspendSelections();typeof n._stakeEntryHander!="undefined"&&n._stakeEntryHander.init();i=$("#bsDiv");$(".betslip-select select",i).on("click change customselect",function(){$(this).parent().attr("data-text",$(this).find(":selected").text())}).trigger("customselect");n.clientUsesSelect()||(n._enhancedBetSlipTypeSelector?n._enhancedBetSlipTypeSelector.enablePopUp():n._enhancedBetSlipTypeSelector=new b365.Ui.Betslip.EnhancedBetSlipTypeSelector(n),n._enhancedBetSlipOddsSelector?n._enhancedBetSlipOddsSelector.enablePopUps():n._enhancedBetSlipOddsSelector=new b365.Ui.Betslip.EnhancedBetSlipOddsSelector(n),n._enhancedBetSlipPitcherSelector?n._enhancedBetSlipPitcherSelector.enablePopUps():n._enhancedBetSlipPitcherSelector=new b365.Ui.Betslip.EnhancedBetSlipPitcherSelector(n),n._enhancedBetSlipIfBetSelector?n._enhancedBetSlipIfBetSelector.enablePopUps():n._enhancedBetSlipIfBetSelector=new b365.Ui.Betslip.EnhancedBetSlipIfBetSelector(n),n._enhancedBetSlipTeaserTypeSelector?n._enhancedBetSlipTeaserTypeSelector.enablePopUps():n._enhancedBetSlipTeaserTypeSelector=new b365.Ui.Betslip.EnhancedBetSlipTeaserTypeSelector(n),n._enhancedBetSlipEachWayExtraSelector?n._enhancedBetSlipEachWayExtraSelector.enablePopUps():n._enhancedBetSlipEachWayExtraSelector=new b365.Ui.Betslip.EnhancedBetSlipEachWayExtraSelector(n));n._removeClickHandler||(n._removeClickHandler=new b365.Ui.Betslip.RemoveClickHandler(n._bsInst,n));!n._eachWayClickHandler&&b365.Ui.Betslip.EachWayClickHandler&&(n._eachWayClickHandler=new b365.Ui.Betslip.EachWayClickHandler(n._bsInst,n));!n._freeBetClickHandler&&b365.Ui.Betslip.FreeBetClickHandler&&(n._freeBetClickHandler=new b365.Ui.Betslip.FreeBetClickHandler(n._bsInst,n));!n._noReservesClickHandler&&b365.Ui.Betslip.NoReservesClickHandler&&(n._noReservesClickHandler=new b365.Ui.Betslip.NoReservesClickHandler(n._bsInst,n));n._currencyDisplayHelper||(n._currencyDisplayHelper=new b365.Ui.Betslip.CurrencyDisplayHelper(n,n.getCurrencyObject()));!n._streamingClickHandler&&b365.Ui.Betslip.StreamingClickHandler&&(n._streamingClickHandler=new b365.Ui.Betslip.StreamingClickHandler(n._bsInst,n));!n._toteHoverHandler&&b365.Ui.Betslip.ToteHoverHandler&&(n._toteHoverHandler=new b365.Ui.Betslip.ToteHoverHandler(n._bsInst,n));!n._unitStakeClickHandler&&b365.Ui.Betslip.UnitStakeClickHandler&&(n._unitStakeClickHandler=new b365.Ui.Betslip.UnitStakeClickHandler(n._bsInst,n));!n._toteStakeClickHandler&&b365.Ui.Betslip.ToteStakeClickHandler&&(n._toteStakeClickHandler=new b365.Ui.Betslip.ToteStakeClickHandler(n._bsInst,n));!n._stakeFocusHandler&&b365.Ui.Betslip.StakeFocusHandler&&(n._stakeFocusHandler=new b365.Ui.Betslip.StakeFocusHandler(n._bsInst,n));!n.webPopupManager&&b365.Ui.Betslip.WebPopupManager&&(n.webPopupManager=new b365.Ui.Betslip.WebPopupManager(n._bsInst,n));this._isAustralianDomain&&b365.Ui.Betslip.BetCallHandler&&(n.betCallHandler||(n.betCallHandler=new b365.Ui.Betslip.BetCallHandler(n._bsInst,n)),window.pushedConfig&&window.pushedConfig.getIsBetCallAvailable&&n.betCallHandler.init(),n._bsInst.setClickToCallHandler(n.betCallHandler));r=document.getElementsByClassName("bs-FreeBetCheckBox-selected");r.length>0&&(new b365.Ui.Betslip.FreeBetClickProcessor(this._bsInst,this).init(r[0]).handle(!0),n._freeBetClickHandler.attachHandlers());n._bsContext.additionalResizeRequired();n.resizeHandler();n._delegates.updateBalance();i.trigger("b365.Ui.Betslip.contentloaded");n._quickBet||(n._quickBet=new b365.Ui.Betslip.QuickBet(this._bsInst,n),n._quickBet.initialised||(n._quickBet=null));n.quickBetContext={navigationChanged:function(t){n._quickBet&&n._quickBet.isQuickBetLoaded()&&n._quickBet.navigationChanged&&n._quickBet.navigationChanged(t)},canHandleBets:function(){var t=!1;return n._quickBet&&n._quickBet.isQuickBetLoaded()&&n._quickBet.canHandleBets&&(t=n._quickBet.canHandleBets()),t}};n._bsInst.betSlipLoaded()};BetSlipController.prototype.initialiseWithParticipantInformation=function(n){var i=this,t="";t+="participantid="+(n.id?n.id:"")+"&";t+="pcode="+(n.code?n.code:"")+"&";t+="ptype="+(n.type?n.type:"")+"&";t+="odds="+(n.odds?n.odds:"")+"&";i.initialise();i._bsInst.req(i._bsInst.reqTypeConstructAndAddItems,t)};BetSlipController.prototype.initialise=function(){var n=this,t;n.initialiseStakeEntry();n._bsInst.deviceType=n.deviceType();n._bsInst.betSource=n.betSource();n._bsInst.showStreaming=n.showStreaming();n._bsInst.isV6Mode=n._bsContext.IsV6Mode||function(){return!1};n._bsInst.showFullTextMode=n.showFullTextMode();n._bsInst.showFixtureDate=n.showFixtureDate();n._bsInst.keyboardType=n.getKeyboardType();n._bsInst.refreshUserBalance=n.getRefreshUserBalance();n._isAustralianDomain&&(n._isAusMultiplesAvailable=n.getAusMultiplesAvailable(),n._pushConfigInitialisedDelegate={scope:this,method:n.pushConfigInitialised},n._ausMultiplesAvailabilityChangedDelegate={scope:this,method:n.ausMultiplesAvailabilityChanged},window.pushedConfig.getArePropertiesInitialised()?(n._isAusMultiplesAvailable=window.pushedConfig.getIsAusMultiplesAvailable(),window.pushedConfig.addEventListener(n._ausMultiplesAvailabilityChangedEvent,n._ausMultiplesAvailabilityChangedDelegate)):window.pushedConfig.addEventListener(n._pushConfigInitialisedEvent,n._pushConfigInitialisedDelegate));t=n._bsInst.getValueFromBSCookie("processed").replace("||","");t=="true"&&new b365.Ui.Betslip.ViewResetter(n._bsInst,n).reset()};BetSlipController.prototype.initialiseStakeEntry=function(){var n=this;typeof n._stakeEntryHander!="undefined"&&n._stakeEntryHander.detach();n.clientEnhancedMode()?(n._stakeEntryHander=new b365.Ui.Betslip.StakePadController("#bsDiv",n,n,function(n){return new b365.Ui.Betslip.ItemInformation(n).itemIndex()[0]},n.OnItemStakeChanged,function(n){return $(n).prop("disabled")||$(n).parents().hasClass("suspended")?!1:!0},null,n.showStakePadToolTips()),n._stakeEntryType=n._stakeEntryTypes.stakePad):(n._stakeEntryType=n._stakeEntryTypes.deviceKeyBoard,n._stakeEntryHander=new b365.Ui.Betslip.StakeEntryKeyboard(n._bsInst,n))};BetSlipController.prototype.addBet=function(n,t,i){new b365.Ui.Betslip.AddBetHandler(this._bsInst,this).handle(n,t,i)};BetSlipController.prototype.betExists=function(n){return $blib.getBetItemIndex(n,this._bsInst)!=-1};BetSlipController.prototype.deleteBet=function(n){new b365.Ui.Betslip.DeleteBetHandler(this._bsInst,this).handle(n)};BetSlipController.prototype.deleteCastBet=function(n){for(var i=bs.getBetItems(bs.itemTypeCast),u,t=0,r=i.length;r>t;t++)i[t]&&i[t].getCnItem("fp")&&(u=i[t].getCnItem("fp"),n===u&&new b365.Ui.Betslip.ItemDeleteExecutor(bsApp.bsController._bsInst,bsApp.bsController,t,bs.itemTypeCast).execute())};BetSlipController.prototype.placeBet=function(){var n=this;n._bsInst.req(n._bsInst.reqTypePlaceBet,undefined,undefined,this)};BetSlipController.prototype.removeBets=function(){var n=this;new b365.Ui.Betslip.RemoveAllItemsRequestDespatcher(n._bsInst,n).despatch(null)};BetSlipController.prototype.loadAddedItems=function(){var n=this;n._bsInst.req(n._bsInst.reqTypeAddItems)};BetSlipController.prototype.refreshBetslip=function(n){var t=this,i=n?t._bsInst.reqTypeAddItems:t._bsInst.reqTypeRefreshSlip;t._bsInst.req(i,"",null,t)};BetSlipController.prototype.resizeHandler=function(){var n=this,r=330,t,i=" expanded";t=document.body.className.indexOf(i)>-1;document.body.clientWidth>r&&!t?(document.body.className+=i,n._bsContext.repositionPopup()):document.body.clientWidth<=r&&t&&(document.body.className=document.body.className.replace(i,""),n._bsContext.repositionPopup());n._bsContext.resizeBetslip()};BetSlipController.prototype.initiatePhoneBetRequest=function(n){new b365.Ui.Betslip.PhoneBetHandler(this._bsInst,this).initiate(n)};BetSlipController.prototype.hideBetSlip=function(){var n=this;n._bsInst.hideBetSlip()};BetSlipController.prototype.setOddsType=function(n){var t=this;t._bsInst.req(t._bsInst.reqTypeSetOddsType,"oty="+n,null,t)};BetSlipController.prototype.IsItalianDomain=function(){return this._isItalianDomain};BetSlipController.prototype.IsGreekDomain=function(){return this._isGreekDomain};BetSlipController.prototype.IsAustralianDomain=function(){return this._isAustralianDomain};BetSlipController.prototype.getPushMarketsEnabled=function(){return this._pushMarketsEnabled};BetSlipController.prototype.setPushMarketsEnabled=function(n){this._pushMarketsEnabled=n};BetSlipController.prototype.retainSelectionsDelegate=function(){var n=this;n._bsContext&&n._bsContext.RetainSelectionsDelegate&&n._bsContext.RetainSelectionsDelegate()};BetSlipController.prototype.clientLoginDelegate=function(){var n=this;n._bsContext&&n._bsContext.ClientLoginDelegate&&n._bsContext.ClientLoginDelegate()};BetSlipController.prototype.clientQuickBetLoginDelegate=function(){var n=this;n._bsContext&&n._bsContext.ClientQuickBetLoginDelegate&&n._bsContext.ClientQuickBetLoginDelegate()};BetSlipController.prototype.clientAddQuickBetToBetslip=function(){var n=this;n._bsContext&&n._bsContext.clientAddQuickBetToBetslip&&n._bsContext.clientAddQuickBetToBetslip()};BetSlipController.prototype.clientContinueDelegate=function(){var n=this;return n._bsContext&&n._bsContext.ClientContinueDelegate?(n._bsContext.ClientContinueDelegate(),!0):!1};BetSlipController.prototype.showBetslipBreakdownDialog=function(n){var t=this;return t._bsContext&&t._bsContext.ShowBetslipBreakdownDialog?(t._bsContext.ShowBetslipBreakdownDialog(n),!0):!1};BetSlipController.prototype.showPitcherDetails=function(n){var t=this;return t._bsContext&&t._bsContext.ShowPitcherDetails?(t._bsContext.ShowPitcherDetails(n),!0):!1};BetSlipController.prototype.updateCurrenyRate=function(n){var t=this;return t._bsContext&&t._bsContext.updateCurrenyRate?(t._bsContext.updateCurrenyRate(n),!0):!1};BetSlipController.prototype.clearLiveAlerts=function(){var n=this;return n._bsContext&&n._bsContext.ClearLiveAlerts?(n._bsContext.ClearLiveAlerts(),!0):!1};BetSlipController.prototype.clientActionInProgress=function(n){var t=this;t._bsContext&&t._bsContext.ClientActionInProgress&&t._bsContext.ClientActionInProgress(n)};BetSlipController.prototype.getCurrencyObject=function(){var n=this;return n._bsContext&&n._bsContext.GetCurrencyObject?n._bsContext.GetCurrencyObject():{decimalSeparator:".",thousandsSeparator:","}};BetSlipController.prototype.clientEnhancedMode=function(){var n=this;return n._bsContext&&n._bsContext.ClientEnhancedMode?n._bsContext.ClientEnhancedMode():!1};BetSlipController.prototype.showStakePadToolTips=function(){var n=this;return n._bsContext&&n._bsContext.ShowStakePadToolTips?n._bsContext.ShowStakePadToolTips():!0};BetSlipController.prototype.liveAlertsEnabled=function(){var n=this;return n._bsContext&&n._bsContext.IsMatchAlertsEnabled?n._bsContext.IsMatchAlertsEnabled():!1};BetSlipController.prototype.betCallEnabled=function(){var n=this;return window.location.host.indexOf(".au")>-1&&window.pushedConfig&&window.pushedConfig.getIsBetCallAvailable&&window.pushedConfig.getIsBetCallAvailable()};BetSlipController.prototype.betCallTwilioEnabled=function(){var n=this;return window.location.host.indexOf(".au")>-1&&window.pushedConfig&&window.pushedConfig.getIsBetCallTwilioAvailable&&window.pushedConfig.getIsBetCallTwilioAvailable()&&n._bsContext&&n._bsContext.BetCallTwilioSupported?n._bsContext.BetCallTwilioSupported():!1};BetSlipController.prototype.appVersion=function(){var n=this;return n._bsContext&&n._bsContext.AppVersion?n._bsContext.AppVersion():""};BetSlipController.prototype.clientBetSlipShowing=function(){var n=this;return n._bsContext&&n._bsContext.ClientBetSlipShowing?n._bsContext.ClientBetSlipShowing():!1};BetSlipController.prototype.clientUsesSelect=function(){var n=this;return n._bsContext&&n._bsContext.ClientUsesSelect?n._bsContext.ClientUsesSelect():!0};BetSlipController.prototype.stakeEntryRule=function(){var n=this;return n._bsContext&&n._bsContext.StakeEntryRule?n._bsContext.StakeEntryRule():null};BetSlipController.prototype.joinNow=function(){var n=this;n._bsContext&&n._bsContext.JoinNow&&n._bsContext.JoinNow()};BetSlipController.prototype.membersHistory=function(){var n=this;n._bsContext&&n._bsContext.MembersHistory&&n._bsContext.MembersHistory()};BetSlipController.prototype.betPlacementNotification=function(n){var t=this;t._bsContext&&t._bsContext.BetPlacementNotification&&t._bsContext.BetPlacementNotification(n)};BetSlipController.prototype.isReqOnBetAddedEnabled=function(){var n=this;return n._bsContext&&n._bsContext.IsReqOnBetAddedEnabled?n._bsContext.IsReqOnBetAddedEnabled():!0};BetSlipController.prototype.isReqOnBetDeletedEnabled=function(){var n=this;return n._bsContext&&n._bsContext.IsReqOnBetDeletedEnabled?n._bsContext.IsReqOnBetDeletedEnabled():!0};BetSlipController.prototype.showConfirmation=function(n,t,i,r,u,f,e,o,s){var c={Controller:n,Title:t,Msg:i,Button1Text:r,Button1Action:u,Button2Text:f,Button2Action:e,additionalClass:o},h;s&&(c.OutofContextDialogue=!0);h=this;h._bsContext&&h._bsContext.ShowConfirmation&&h._bsContext.ShowConfirmation(this._bsInst,c)};BetSlipController.prototype.showSiteConfirmation=function(n,t,i,r,u,f,e,o,s){var c={Controller:n,Title:t,Msg:i,Button1Text:r,Button1Action:u,Button2Text:f,Button2Action:e,additionalClass:o},h;s&&(c.OutofContextDialogue=!0);h=this;h._bsContext&&h._bsContext.showSiteConfirmation&&h._bsContext.showSiteConfirmation(c)};BetSlipController.prototype.showPushbetDialog=function(n,t,i,r,u){var e={Controller:n,OkAction:t,CancelAction:i,PushBetId:r,FixtureParticipantId:u},f=this;f._bsContext&&f._bsContext.showPushbetDialog&&f._bsContext.showPushbetDialog(e)};BetSlipController.prototype.getPushPopupStatus=function(n){var t=this,i=!1;return t._bsContext&&t._bsContext.getPushPopupStatus&&(i=t._bsContext.getPushPopupStatus(n)),i};BetSlipController.prototype.showDialog=function(n,t,i){var u={Controller:n,MarkUp:t,Modal:i},r=this;r._bsContext&&r._bsContext.ShowDialog&&r._bsContext.ShowDialog(u)};BetSlipController.prototype.deviceType=function(){var n=this;return n._bsContext&&n._bsContext.DeviceType?n._bsContext.DeviceType():""};BetSlipController.prototype.betSource=function(){var n=this;return n._bsContext&&n._bsContext.BetSource?n._bsContext.BetSource():""};BetSlipController.prototype.showFullTextMode=function(){var n=this;return n._bsContext&&n._bsContext.ShowFullTextMode?n._bsContext.ShowFullTextMode():!1};BetSlipController.prototype.showFixtureDate=function(){var n=this;return n._bsContext&&n._bsContext.ShowFixtureDate?n._bsContext.ShowFixtureDate():!1};BetSlipController.prototype.showStreaming=function(){var n=this;return n._bsContext&&n._bsContext.ShowStreaming?n._bsContext.ShowStreaming():!1};BetSlipController.prototype.getRefreshUserBalance=function(){var n=this;return n._bsContext&&n._bsContext.RefreshUserBalance?n._bsContext.RefreshUserBalance():!0};BetSlipController.prototype.getKeyboardType=function(){var n=this;return n._bsContext&&n._bsContext.KeyboardType?n._bsContext.KeyboardType():""};BetSlipController.prototype.itemsRemoved=function(n,t){var r={Id:n?n:null,CheckSuspended:t?t:null},i=this;i._bsContext&&i._bsContext.ItemsRemoved&&i._bsContext.ItemsRemoved(r)};BetSlipController.prototype.pushBetRulesLink=function(){var n=this;return n._bsContext&&n._bsContext.PushBetRulesUrl?n._bsContext.PushBetRulesUrl():""};BetSlipController.prototype.highlightSelectedBets=function(){var n=this;return n._bsContext&&n._bsContext.HighlightSelectedBets?n._bsContext.HighlightSelectedBets():""};BetSlipController.prototype.pushBetPopupAcceptedHandler=function(n){var t=this;return t._bsContext&&t._bsContext.PushBetPopupAcceptedHandler&&t._bsContext.PushBetPopupAcceptedHandler(n),""};BetSlipController.prototype.showEnableMicrophoneMessage=function(){var n=new b365.Ui.Betslip.PermissionsDialog(this);this.showDialog(n,n.buildMarkup(),!1)};BetSlipController.prototype.addOnBetSlipLoaded=function(n){var t=this;t._instanceEventAttacher.addOnBetSlipLoaded(n)};BetSlipController.prototype.addOnBetAdded=function(n){var t=this;t._instanceEventAttacher.addOnBetAdded(n)};BetSlipController.prototype.addOnBetAddedReqComplete=function(n){var t=this;t._instanceEventAttacher.addOnBetAddedReqComplete(n)};BetSlipController.prototype.addOnEditBet=function(n){var t=this;t._instanceEventAttacher.addOnEditBet(n)};BetSlipController.prototype.addOnRefreshReqComplete=function(n){var t=this;t._instanceEventAttacher.addOnRefreshReqComplete(n)};BetSlipController.prototype.addOnBetSlipItemsChanged=function(n){var t=this;t._instanceEventAttacher.addOnBetSlipItemsChanged(n)};BetSlipController.prototype.addOnAcceptChanges=function(n){var t=this;t._instanceEventAttacher.addOnAcceptChanges(n)};BetSlipController.prototype.addOnMaxSelections=function(n){var t=this;t._instanceEventAttacher.addOnMaxSelections(n)};BetSlipController.prototype.addOnBetslipDisplayed=function(n){var t=this;t._instanceEventAttacher.addOnBetslipDisplayed(n)};BetSlipController.prototype.addOnPlaceBet=function(n){var t=this;t._instanceEventAttacher.addOnPlaceBet(n)};BetSlipController.prototype.addOnPlaceBetSuccess=function(n){var t=this;t._instanceEventAttacher.addOnPlaceBetSuccess(n)};BetSlipController.prototype.addOnAddBetslipFooterLinks=function(n){var t=this;t._instanceEventAttacher.addOnAddBetslipFooterLinks(n)};BetSlipController.prototype.addOnAddReceiptHeaderLinks=function(n){var t=this;t._instanceEventAttacher.addOnAddReceiptHeaderLinks(n)};BetSlipController.prototype.addOnAddReceiptLiveAlertSignUp=function(n){var t=this;t._instanceEventAttacher.addOnAddReceiptLiveAlertSignUp(n)};BetSlipController.prototype.addOnBetslipError=function(n){var t=this;t._instanceEventAttacher.addOnBetslipError(n)};BetSlipController.prototype.addOnShowBetSlip=function(n){var t=this;t._instanceEventAttacher.addOnShowBetSlip(n)};BetSlipController.prototype.addOnHideBetSlip=function(n){var t=this;t._instanceEventAttacher.addOnHideBetSlip(n)};BetSlipController.prototype.addOnChangeBetslipHeight=function(n){var t=this;t._instanceEventAttacher.addOnChangeBetslipHeight(n)};BetSlipController.prototype.addOnPopupShow=function(n){var t=this;t._instanceEventAttacher.addOnPopupShow(n)};BetSlipController.prototype.addOnPopupHide=function(n){var t=this;t._instanceEventAttacher.addOnPopupHide(n)};BetSlipController.prototype.addOnSessionExpired=function(n){var t=this;t._instanceEventAttacher.addOnSessionExpired(n)};BetSlipController.prototype.addOnContentChangedOnClient=function(n){var t=this;t._instanceEventAttacher.addOnContentChangedOnClient(n)};BetSlipController.prototype.showSiteOverlaySpinner=function(){var n=this;return n._bsContext&&n._bsContext.ShowSiteOverlaySpinner?(n._bsContext.ShowSiteOverlaySpinner(),!0):!1};BetSlipController.prototype.hideSiteOverlaySpinner=function(){var n=this;return n._bsContext&&n._bsContext.HideSiteOverlaySpinner?(n._bsContext.HideSiteOverlaySpinner(),!0):!1};BetSlipController.prototype.betSlipTypeChanged=function(n,t){var i=this;i._bsContext&&i._bsContext.BetSlipTypeChanged&&i._bsContext.BetSlipTypeChanged(n,t)};BetSlipController.prototype.betCallConnected=function(){var n=this;n._bsContext&&n._bsContext.betCallConnectedDelegate&&n._bsContext.betCallConnectedDelegate()};BetSlipController.prototype.betCallDisconnected=function(){var n=this;n._bsContext&&n._bsContext.betCallDisconnectedDelegate&&n._bsContext.betCallDisconnectedDelegate()};BetSlipController.prototype.addOnDeleteBetReqComplete=function(n){var t=this;t._instanceEventAttacher.addOnDeleteBetReqComplete(n)};BetSlipController.prototype.addOnAddBetFailed=function(n){var t=this;t._instanceEventAttacher.addOnAddBetFailed(n)};BetSlipController.prototype.subscriptionHandler=function(n,t){new b365.Ui.Betslip.ItemSubscriptionManager(this._bsInst,this).subscriptionHandler(n,t)};BetSlipController.prototype.subscribeItem=function(n){var t=this;t._bsContext&&t._bsContext.subscribeItem&&t._bsContext.subscribeItem(n)};BetSlipController.prototype.unsubscribeItem=function(n){var t=this;t._bsContext&&t._bsContext.unsubscribeItem&&t._bsContext.unsubscribeItem(n)};BetSlipController.prototype.getFormatedOdds=function(n,t,i){var r=this;return r._bsContext&&r._bsContext.getFormatedOdds?r._bsContext.getFormatedOdds(n,t,i):n};BetSlipController.prototype.getUsersOddsType=function(){var n=this;return n._bsContext&&n._bsContext.getUsersOddsType?n._bsContext.getUsersOddsType():1};BetSlipController.prototype.setBetguid=function(n){var t=this;t._bsContext&&t._bsContext.setBetguid&&t._bsContext.setBetguid(n)};BetSlipController.prototype.getBetguid=function(){var n=this;return n._bsContext&&n._bsContext.getBetguid?n._bsContext.getBetguid():null};BetSlipController.prototype.stringToBoolean=function(n){return(n=n.toUpperCase(),n=="TRUE")?!0:(n=="FALSE",!1)};BetSlipController.prototype.getLanguageCode=function(){var n=document.cookie.match("aps03.*lng=(\\d*)&"),t;if(n.length>1){t=n[1];switch(t){case"1":return"eng";case"2":return"chi";case"3":return"spa";case"4":return"frc";case"5":return"ger";case"6":return"ita";case"7":return"dan";case"8":return"swe";case"9":return"nor";case"10":return"sim";case"14":return"usa";case"19":return"bul";case"20":return"gre";case"21":return"pol";case"22":return"por";case"23":return"rom";case"24":return"cze";case"25":return"hun";case"26":return"svk";case"28":return"ned";default:return"eng"}}else return"eng"};BetSlipController.prototype.setTelebetBetslip=function(n){var t=this;t._bsContext&&t._bsContext.setTelebetBetslip&&t._bsContext.setTelebetBetslip(n)};BetSlipController.prototype.setMicrophoneAvailable=function(n){var t=this;t._bsContext&&t._bsContext.setMicrophoneAvailable&&t._bsContext.setMicrophoneAvailable(n);t.betCallHandler&&t.betCallHandler.microphoneAvailabilityChanged&&t.betCallHandler.microphoneAvailabilityChanged()};BetSlipController.prototype.setQuickBetTooltipDismissed=function(n){var t=this;t._bsContext&&t._bsContext.setQuickBetTooltipDismissed&&t._bsContext.setQuickBetTooltipDismissed(n)};BetSlipController.prototype.getQuickBetTooltipDismissed=function(){var n=this;if(n._bsContext&&n._bsContext.getQuickBetTooltipDismissed)return n._bsContext.getQuickBetTooltipDismissed()};BetSlipController.prototype.setQuickBetEnabled=function(n){var t=this;t._bsContext&&t._bsContext.setQuickBetEnabled&&t._bsContext.setQuickBetEnabled(n)};BetSlipController.prototype.getQuickBetEnabled=function(){var n=this;if(n._bsContext&&n._bsContext.getQuickBetEnabled)return n._bsContext.getQuickBetEnabled()};BetSlipController.prototype.setAusMultiplesAvailable=function(n){var t=this;t._bsContext&&t._bsContext.setAusMultiplesAvailable&&t._bsContext.setAusMultiplesAvailable(n)};BetSlipController.prototype.getAusMultiplesAvailable=function(){var n=this;if(n._bsContext&&n._bsContext.getAusMultiplesAvailable)return n._bsContext.getAusMultiplesAvailable()};BetSlipController.prototype.initialiseMicrophone=function(){sProps.clickToCall.enabled&&(this._microphoneController||(this._microphoneController=new b365.Ui.Betslip.MicrophoneController(this._bsInst,this)),this._microphoneController.initMicrophoneChecks())};BetSlipController.prototype.refreshMicrophone=function(){sProps.clickToCall.enabled&&this._microphoneController&&this._microphoneController.updateMicrophoneState()};BetSlipController.prototype.microphoneAvailable=function(n){sProps.clickToCall.enabled&&this._microphoneController&&this._microphoneController.updateMicrophoneAvailable(n)};BetSlipController.prototype.getMessageDisplayHandler=function(){return this._messageDisplayHandler?this._messageDisplayHandler:(this._messageDisplayHandler=new b365.Ui.Betslip.MessageDisplayHandler(this._bsInst),this._messageDisplayHandler)};BetSlipController.prototype.getMultipleItemsController=function(){return this._multipleItemsController?this._multipleItemsController:(this._multipleItemsController=new b365.Ui.Betslip.MultipleItemsController(this._bsInst,this),this._multipleItemsController)};BetSlipController.prototype.isLocked=function(){var n;return this._bsInst.locked()?!0:(n=document.getElementsByClassName("bs-ConfirmationFooter"),n.length>0&&n[0].className.indexOf("hidden")===-1)?!0:!1};BetSlipController.prototype.getMultipleInfo=function(n){var t=this,i;t.ausMultiplesEnabled()&&(t.complexMultiplesProcessing=!0,i=t._bsInst.getBetItems(t._bsInst.betTypeMultiple),i.length>=t._multiplesCombinationLimit?this.getMultipleBetCounts():n?this.getMultipleCombinations():t.complexMultiplesProcessing=!1)};BetSlipController.prototype.getMultipleCombinations=function(){var n=this;$.ajax({headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache",Pragma:"no-cache"},type:"GET",url:"/betslip/Core/MultiplesCombinations.ashx",cache:!1}).done(function(t){n.initialiseMultiplesData(t)}).fail(function(){n.complexMultiplesProcessing=!1})};BetSlipController.prototype.getMultipleBetCounts=function(){var n=this;$.ajax({headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache",Pragma:"no-cache"},type:"GET",url:"/betslip/Core/MultiplesBetCounts.ashx",cache:!1}).done(function(t){n.initialiseMultiplesData(t)}).fail(function(){n.complexMultiplesProcessing=!1})};BetSlipController.prototype.hasMultipleStakeEntries=function(){var t=this,n=t._bsInst.getBetItems(this._bsInst.betTypeMultiple);for(i=0;i<n.length;i++)if(n[i].getStItem("st"))return!0;return!1};BetSlipController.prototype.initialiseMultiplesData=function(n){var f=this,t,i,r,u,e;if(f.ausMultiplesEnabled()&&(this.complexMultiplesInfo=[],n.multiples)){for(this.totalsCalculator||(this.totalsCalculator=new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this)),this.complexMultiplesInfo=n.multiples,t=0;t<this.complexMultiplesInfo.length;t++)if(r=[],this.complexMultiplesInfo[t].D1){for(u=this.complexMultiplesInfo[t].D1.split(","),i=0;i<u.length;i++)e=u[i].split("#"),r.push(e);this.complexMultiplesInfo[t].combinations=r}else this.complexMultiplesInfo[t].combinations=null;f.complexMultiplesProcessing=!1;this.totalsCalculator.calculate()}};BetSlipController.prototype.pushConfigInitialised=function(){var n=this;window.pushedConfig.removeEventListener(n._pushConfigInitialisedEvent,n._pushConfigInitialisedDelegate);window.pushedConfig.addEventListener(n._ausMultiplesAvailabilityChangedEvent,n._ausMultiplesAvailabilityChangedDelegate);this.ausMultiplesAvailabilityChanged()};BetSlipController.prototype.ausMultiplesAvailabilityChanged=function(){var n=this,t=n._isAustralianDomain&&window.pushedConfig.getIsAusMultiplesAvailable();n._isAusMultiplesAvailable!==t&&(n.refreshBetslip(),n.setAusMultiplesAvailable(t),n._isAusMultiplesAvailable=t)};BetSlipController.prototype.ausMultiplesEnabled=function(){var n=this;return n._isAusMultiplesAvailable};BetSlipController.prototype.updateMultiplesEachWayFlag=function(){var s=this,r,o,n;if(s.ausMultiplesEnabled()){var u="ew",t=this._bsInst.getBetItems(this._bsInst.betTypeMultiple),i=this._bsInst.getBetItems(this._bsInst.betTypeNormal);if(i&&i.length>0&&t&&t.length>0){var h=i.length,f=t.length,e=!1;for(r=0;r<h;r++)if(o=i[r].getStItem(u),o=="1"){for(e=!0,n=0;n<f;n++)t[n].setStItem(u,"1");break}if(!e)for(n=0;n<f;n++)t[n].setStItem(u,"0")}}};BetSlipController.prototype.updateFreeBetBar=function(n){var t=document.getElementsByClassName("bs-useBetCredit")[0],i=document.getElementsByClassName("br-Receipt")[0]||document.getElementsByClassName("bs-Confirm")[0],u;if(t)if(n>0&&window.pushedConfig.getIsFreeBetsAllowed(getBetslipWebModule().getUserCountryID())&&this._bsInst.getBetItems(this._bsInst.betTypeAll).length>0&&!this._bsInst.containsPhoneOnlyBet()&&this._bsInst.getSlipType()===this._bsInst.slipStandard){t.setAttribute("data-bb",n);var r=t.getElementsByClassName("bs-useBetCreditAmount")[0],f=(new b365.Ui.Formatter).padStringTo2DP(n),e=new b365.Ui.Betslip.CurrencyDisplayHelper(this,this.getCurrencyObject()).formatCurrency(f);r.innerHTML=r.innerHTML.replace("{0}",e);t.className=t.className.replace(" hidden","")}else t.className.indexOf(" hidden")===-1&&(this._bsInst.setValueInBSCookie("fs","0"),t.className=t.className+" hidden"),u=$(bsDiv).children("ul:first-child").data("isocode"),$(".isoCurrency").text(u);else i&&n>0&&this._bsInst.getBetItems(this._bsInst.betTypeAll).length>0&&i.setAttribute("data-bb",n)};BetSlipController.prototype.populateMatchAlerts=function(n){this._bsContext.populateMatchAlerts(n)};BetSlipController.prototype.setMatchAlertSubscriptionState=function(n){this._bsContext.setMatchAlertSubscriptionState(n)};BetSlipController.prototype.setBetReceiptMatchAlertsState=function(n){this._bsInst._matchAlertsReceipt.setBetReceiptMatchAlertsState(n)};BetSlipController.prototype.hidePopups=function(n){var t=this;n!=t._enhancedBetSlipTypeSelector&&t._enhancedBetSlipTypeSelector&&t._enhancedBetSlipTypeSelector._isShowing&&t._enhancedBetSlipTypeSelector.hidePopUpMenu(t._enhancedBetSlipTypeSelector);n!=t._enhancedBetSlipOddsSelector&&t._enhancedBetSlipOddsSelector&&t._enhancedBetSlipOddsSelector._isShowing&&t._enhancedBetSlipOddsSelector.hidePopUpMenu(t._enhancedBetSlipOddsSelector);n!=t._enhancedBetSlipToteSelector&&t._enhancedBetSlipToteSelector&&t._enhancedBetSlipToteSelector._isShowing&&t._enhancedBetSlipToteSelector.hidePopUpMenu(t._enhancedBetSlipToteSelector);n!=t._enhancedBetSlipIfBetSelector&&t._enhancedBetSlipIfBetSelector&&t._enhancedBetSlipIfBetSelector._isShowing&&t._enhancedBetSlipIfBetSelector.hidePopUpMenu(t._enhancedBetSlipIfBetSelector);n!=t._enhancedBetSlipTeaserTypeSelector&&t._enhancedBetSlipTeaserTypeSelector&&t._enhancedBetSlipTeaserTypeSelector._isShowing&&t._enhancedBetSlipTeaserTypeSelector.hidePopUpMenu(t._enhancedBetSlipTeaserTypeSelector);n!=t._enhancedBetSlipAusRaceBetTypeSelector&&t._enhancedBetSlipAusRaceBetTypeSelector&&t._enhancedBetSlipAusRaceBetTypeSelector._isShowing&&t._enhancedBetSlipAusRaceBetTypeSelector.hidePopUpMenu(t._enhancedBetSlipAusRaceBetTypeSelector);n!=t._enhancedBetSlipEachWayExtraSelector&&t._enhancedBetSlipEachWayExtraSelector&&t._enhancedBetSlipEachWayExtraSelector._isShowing&&t._enhancedBetSlipEachWayExtraSelector.hidePopUpMenu(t._enhancedBetSlipEachWayExtraSelector);t._stakeEntryType!=t._stakeEntryTypes.deviceKeyBoard&&t._stakeEntryHander._isShowing&&t._stakeEntryHander.hide()};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.HeaderLinksReceiptRender=function(n){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"};this._headerLinks=this._bsInst.headerLinks};b365.Ui.Betslip.HeaderLinksReceiptRender.prototype={render:function(){var t,n,i;if(this._isValid&&this._headerLinks&&this._headerLinks.length>0)for(t=0;t<this._headerLinks.length;t++)n=this._headerLinks[t],i=$("<span/>",{"class":n.cssClass,html:n.text}),n.handler&&i.click(n.handler),i.appendTo(".br-Header_Links");this._bsInst.headerLinks=null}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.FooterLinksSlipRender=function(n,t){this._bsInst=n;this._isValid=function(){return typeof this._bsInst!="undefined"};this._footerLinks=this._bsInst.headerLinks;this._targetElem=t};b365.Ui.Betslip.FooterLinksSlipRender.prototype={render:function(){var t,n,i;if(this._isValid&&this._footerLinks&&this._footerLinks.length>0)for(t=0;t<this._footerLinks.length;t++)n=this._footerLinks[t],i=$("<a/>",{"class":n.cssClass,html:n.text}),n.handler&&i.click(n.handler),i.appendTo(this._targetElem);this._bsInst.footerLinks=null}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.MatchAlertsReceipt=function(){function n(n,t){this._bsInst=n;this._bsController=t}return n.prototype._bsInst=null,n.prototype._matchAlertFixtures=[],n.prototype._bsController=null,n.prototype._numberOfFixtures=0,n.prototype._numberOfSubscriptions=0,n.prototype._matchAlertsContainer=null,n.HEADER_LINK="br-Header_MatchAlertsHeader-link",n.HEADER_INNERTEXT="br-Header_MatchAlertsHeader-innerText",n.HEADER_BUTTON="br-Header_MatchAlertsHeader-button",n.HEADER_BUTTON_ACTIVE="br-Header_MatchAlertsHeader-buttonActive",n.ROW_CONTAINER="br-Header_MatchAlertsRowContainer",n.ROW="br-Header_MatchAlertsRowContainer-row",n.ROW_BUTTON="br-Header_MatchAlertsRow-button",n.ROW_TEXT="br-Header_MatchAlertsRow-text",n.ROW_BUTTON_ACTIVE="br-Header_MatchAlertsRow-buttonActive",n.prototype.render=function(){var t=this,u,f,h,e,c,o,s,i,l,r;if((t._matchAlertFixtures=[],t._numberOfFixtures=0,t._numberOfSubscriptions=0,t._matchAlertsContainer=document.getElementById("brHeaderMatchAlerts"),t._matchAlertsContainer)&&(t._numberOfFixtures=parseInt(t._matchAlertsContainer.getAttribute("data-n"),10),!(t._numberOfFixtures<1))&&(t._matchAlertsContainer.className=t._matchAlertsContainer.className.replace(" hidden",""),u=document.getElementsByClassName(n.ROW_CONTAINER)[0],u)&&(t._numberOfFixtures>1&&(u.className+=" hidden"),f=document.getElementsByClassName(n.HEADER_LINK),f&&f.length>0&&(h=new b365.Ui.Betslip.ResponsiveClickHandler(f[0],t._ExpandClickHandler.bind(t),!1)),e=document.getElementsByClassName(n.HEADER_BUTTON),e&&e.length>0&&(c=new b365.Ui.Betslip.ResponsiveClickHandler(e[0],t._HeaderClickHandler.bind(t),!1)),o=u.getElementsByClassName(n.ROW),o)){for(s=0;s<o.length;s++)(i=o[s],i)&&(l=new b365.Ui.Betslip.ResponsiveClickHandler(i,t._ItemClickHandler.bind(t,i),!1),r={},r.fixtureId=i.getAttribute("data-fixtureid"),r.classificationId=i.getAttribute("data-classification"),r.alertKey=i.getAttribute("data-alertkey"),r.team1Id=i.getAttribute("data-team1id"),r.team2Id=i.getAttribute("data-team2id"),r.subscribed=!1,t._matchAlertFixtures.push(r));t._bsController.populateMatchAlerts(t._matchAlertFixtures)}},n.prototype.setBetReceiptMatchAlertsState=function(t){var u=this,e=document.getElementsByClassName(n.ROW_CONTAINER)[0],i,o,f,r,s;if(e){for(i=0,o=t.length;i<o;i++)(f=e.querySelectorAll("div."+n.ROW+"[data-fixtureid='"+t[i].fixtureId+"']")[0],r=u.getFixtureByFixtureId(t[i].fixtureId),f&&r)&&(s=f.getElementsByClassName(n.ROW_BUTTON)[0],r.subscribed=t[i].subscribed,u.toggleClass(s,n.ROW_BUTTON_ACTIVE,r.subscribed),r.subscribed?u._numberOfSubscriptions++:u._numberOfSubscriptions--);this._SetHeaderButtonState()}},n.prototype._HeaderClickHandler=function(){var r=this,u=document.getElementsByClassName(n.HEADER_BUTTON)[0],t,f,e,i,o,s;if(u&&(t=u.className.indexOf(n.HEADER_BUTTON_ACTIVE)===-1,r.toggleClass(u,n.HEADER_BUTTON_ACTIVE,t),r.toggleAllFixtures(t),f=document.getElementsByClassName(n.ROW_CONTAINER)[0],f))for(e=f.getElementsByClassName(n.ROW),i=0,o=e.length;i<o;i++)s=e[i].getElementsByClassName(n.ROW_BUTTON)[0],r.toggleClass(s,n.ROW_BUTTON_ACTIVE,t)},n.prototype._ExpandClickHandler=function(){var t=document.getElementsByClassName(n.ROW_CONTAINER)[0];this.toggleClass(t,"hidden");this._bsInst.changeBetslipHeight()},n.prototype._ItemClickHandler=function(t){var i=this,r=t.getElementsByClassName(n.ROW_BUTTON)[0],u,f;r&&(u=parseInt(t.getAttribute("data-fixtureid"),10),f=i.toggleFixtureSubscription(u,null),i.toggleClass(r,n.ROW_BUTTON_ACTIVE,f),i._SetHeaderButtonState())},n.prototype.toggleFixtureSubscription=function(n,t){var u=this,i=u.getFixtureByFixtureId(n),r;return i?(r=t!=null?t:!i.subscribed,i.subscribed=r,this._bsController.setMatchAlertSubscriptionState([i]),r?u._numberOfSubscriptions++:u._numberOfSubscriptions--,r):!1},n.prototype.toggleAllFixtures=function(n){for(var t=this,i=0;i<t._matchAlertFixtures.length;i++)t._matchAlertFixtures[i].subscribed=n;this._bsController.setMatchAlertSubscriptionState(t._matchAlertFixtures);t._numberOfSubscriptions=n?t._numberOfFixtures:0},n.prototype._SetHeaderButtonState=function(){var t=this,i=document.getElementsByClassName(n.HEADER_BUTTON)[0];t.toggleClass(i,n.HEADER_BUTTON_ACTIVE,t._numberOfSubscriptions==t._numberOfFixtures)},n.prototype.getFixtureByFixtureId=function(n){for(var i=this,t=0,r=i._matchAlertFixtures.length;t<r;t++)if(n==i._matchAlertFixtures[t].fixtureId)return i._matchAlertFixtures[t];return null},n.prototype.toggle className=function(n,t,i){if(n){var r=n.className.indexOf(t);r===-1?(i===!0||i==null)&&(n.className+=" "+t):(i===!1||i==null)&&(n.className=n.className.replace(" "+t,""))}},n}();Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.DuplicateBetHandler=function(n,t){this._bsInst=n;this._bsController=t;this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.DuplicateBetHandler.prototype={handle:function(){this._isValid()&&(new b365.Ui.Betslip.ViewResetter(this._bsInst,this._bsController).reset(),new b365.Ui.Betslip.InProgressDisplayHandler(this._bsInst,this._bsController).handle(["hide",betSlipML.pleasecheckmembers]))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ViewResetter=function(n,t){this._bsInst=n;this._bsController=t;this._bsWrapper=$("#bsDiv");this._isValid=function(){return typeof this._bsInst!="undefined"}};b365.Ui.Betslip.ViewResetter.prototype={reset:function(){this._isValid()&&(this._bsInst.clearBets(!1),new b365.Ui.Betslip.UpdateStateHandler(this._bsInst).handle(),new b365.Ui.Betslip.LockUnlockHandler(this._bsInst,this._bsController).handle(!1,!1),$(".emptyBetslip",this._bsWrapper).removeClass("hidden"),$(".single-section, .multiple-section, .cast-section",this._bsWrapper).remove(),$("a.placeBet",this._bsWrapper).disableElement("disabled"),$("select.bet-slip-type",this._bsWrapper).disableElement(),$("#BetSlipTypeSelector",this._bsWrapper).disableElement(),$(".totals",this._bsWrapper).hide(),$("#taxWarningHeader").addClass("hidden"))}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.PhoneBetHandler=function(n,t){this._bsInst=n;this._controller=t;this._popup=null;this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._controller!="undefined"}};b365.Ui.Betslip.PhoneBetHandler.prototype={initiate:function(n){$("#phoneBetOverlay").length==0&&(this.addOverlay(),this._bsInst.refresh(this._bsInst.reqTypePhoneBet,"cs="+encodeURIComponent(n),this._controller))},displayPopup:function(n){n&&this.addPopup(n)},addPopup:function(n){this._popup=$(n);this._popup.css({top:this.getPopupTopPosition()});this.addPopupListeners();$("body").append(this._popup)},addPopupListeners:function(){$("#closeIcon",this._popup).on("click",$.proxy(function(){this.removePopup();this.removeOverlay()},this));$("#phoneBetOverlay").on("click",$.proxy(function(){this.removePopup();this.removeOverlay()},this));var n=this;$(window).off("resize.phonepopup").on("resize.phonepopup",function(){n._popup.css({top:n.getPopupTopPosition(0)})})},addOverlay:function(){var n=$("<div/>",{id:"phoneBetOverlay",css:{height:document.body.scrollHeight}});$("body").append(n);$("html").addClass("overlay-on")},removePopup:function(){this._popup.remove()},removeOverlay:function(){$("#phoneBetOverlay").remove();$("html").removeClass("overlay-on")},getPopupTopPosition:function(n){var t=typeof n!="undefined"?n:$(window).scrollTop();return Math.round($(window).height()*.15)+t}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.MaintenanceMessageHandler=function(){this._popup=null;this._isValid=function(){return!0}};b365.Ui.Betslip.MaintenanceMessageHandler.prototype={displayPopup:function(n){n&&(this.addOverlay(),this.addPopup(n))},addPopup:function(n){var t='<div  className="popupContainer maintenanceMessage"><div  className="popupHeader"><\/div><div  className="popupText"><div>'+n+'<\/div><div  className="greenButton" id="okButton">OK<\/div><\/div><\/div>';this._popup=$(t);this._popup.css({top:this.getPopupTopPosition()});this.addPopupListeners();$("body").append(this._popup)},addPopupListeners:function(){$("#okButton",this._popup).on("click",$.proxy(function(){this.removePopup();this.removeOverlay()},this));var n=this;$(window).off("resize.maintenancepopup").on("resize.maintenancepopup",function(){n._popup.css({top:n.getPopupTopPosition(0)})})},addOverlay:function(){var n=$("<div/>",{id:"maintenanceMessageOverlay",css:{height:document.body.scrollHeight}});$("body").append(n)},removePopup:function(){this._popup.remove()},removeOverlay:function(){$("#maintenanceMessageOverlay").remove()},getPopupTopPosition:function(n){var t=typeof n!="undefined"?n:$(window).scrollTop();return Math.round($(window).height()*.15)+t}},function(){Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ItemSubscriptionManager=function(n,t){this._bsInst=n;this._bsController=t;this._bsWrapper=$("#bsDiv");this._items={};this._isValid=function(){return typeof this._bsInst!="undefined"&&typeof this._bsController!="undefined"}};b365.Ui.Betslip.ItemSubscriptionManager.prototype={attach:function(n){this.subscribe(n)},subscribe:function(n){var h,o,c,a,f,e,l,v,i,u,s,r,t;if(b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping={},b365.Ui.Betslip.ItemSubscriptionManager.BBSubscriptionMapping={},this._isValid()&&this._bsWrapper.find(".betReceipt").length<=0){for(this._bsController=n,h=document.getElementsByClassName("suspended"),u=0;u<h.length;u++)b365.Ui.Betslip.ItemDisplay.itemSuspen(h[u]);for(o=this._bsInst.getBetItems(this._bsInst.betTypeNormal),i=0;i<o.length;i++)if(a=o[i].getCnItem("fp"),f=$('li[data-item-fpid="'+a+'"]',this._bsWrapper),f&&(e=f.find(".bs-WinPlaceEachWay_Items"),e.length==0&&(e=f.find(".js-RelatedMarketMenu"))),e&&e.length>0)for(l=e[0].children,v=l.length,r=0;r<v;r++)t=l[r].children[0].getAttribute("data-topic"),t&&(b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[t]||(b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[t]=[],this._bsController.subscribeItem(t)),b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[t].push(f[0]));else t=o[i].getTopic(),t&&!b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[t]&&(this._bsController.subscribeItem(t),b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[t]=[],b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[t].push(f[0]));for(c=this._bsInst.getBetItems(this._bsInst.betTypeBetBuilder),i=0;i<c.length;i++)for(u=c[i],s=u.getBBItems(),r=0;r<s.length;r++)t=s[r].getValue("TP"),t&&(b365.Ui.Betslip.ItemSubscriptionManager.BBSubscriptionMapping[t]||(b365.Ui.Betslip.ItemSubscriptionManager.BBSubscriptionMapping[t]=[],this._bsController.subscribeItem(t)),b365.Ui.Betslip.ItemSubscriptionManager.BBSubscriptionMapping[t].push({index:i,betItem:u,subItem:s[r]}))}},unsubscribeItem:function(n,t){var f=n.getTopic(),e,u,l,i,r,a;if(t=="betbuilder")for(e=n.getBBItems(),i=0;i<e.length;i++)topic=e[i].getValue("TP"),topic&&!b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[topic]&&this._bsController.unsubscribeItem(topic);if(f){var s=f.substr(2),h=document.querySelector("li[data-item-fpid='"+s+"']"),o=[f],c=h.querySelectorAll("div[data-participantid]:not([data-participantid='"+s+"'])");for(u=0;u<c.length;u++)l=c[u],o.push("BS"+l.getAttribute("data-participantid"));for(i=0;i<o.length;i++)(r=o[i],b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[r])&&(b365.Ui.Betslip.ItemSubscriptionManager.BBSubscriptionMapping[r]||(a=b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[r].indexOf(h),b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[r]&&(b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[r].splice(a,1),b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[r].length==0&&(this._bsController.unsubscribeItem(r),b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[r]=null))))}},unsubscribe:function(){var n,r,t,i;if(this._isValid()){n=[];for(r in b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping)n.push(r);for(t=0;t<n.length;t++)i=n[t],this._bsController.unsubscribeItem(i),b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping[i]=null}},subscriptionHandler:function(n,t){var l=n.data.ID,c=n.data.IT,o,h,s,u=b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping["BS"+l],f,i,e,r;if(u)for(i=0;i<u.length;i++){this._bsController&&this._bsController._dlg&&(o=$("#okButton"),o.length>0&&(h=o[0].getAttribute("data-action"),h&&h==="refer"&&(s=$("#bsCD"),s.length>0&&s[0].hasAttribute("style")&&s.css("display")!="none"&&this._bsController._dlg.hideDialog(),o.removeClass("disabled"),$("#closeButton").removeClass("disabled"))));$(u[i]).find(".bs-WinPlaceEachWay_Items").length>0?(r=new b365.Ui.Betslip.ItemDisplayAusRacing(this._bsInst,this._bsController),r.initialize($(u[i]),n)):r=$(u[i]).find(".js-RelatedMarketMenu").length>0?new b365.Ui.Betslip.ItemDisplayEachWayExtra($(u[i]),this._bsInst,this._bsController,n):new b365.Ui.Betslip.ItemDisplay($(u[i]),this._bsInst,this._bsController,n);switch(t){case"delete":r.itemDeleteHandler(n);break;case"update":r.itemUpdateHandler(n);break;default:r.commitChanges()}}if(f=b365.Ui.Betslip.ItemSubscriptionManager.BBSubscriptionMapping[c],f)for(i=0;i<f.length;i++)if(e=$('li[data-item-id="'+f[i].index+'"][data-item-type="betbuilder"]',this._bsWrapper).get(0),e){r=new b365.Ui.Betslip.ItemDisplayBetBuilder(e,this._bsInst,this._bsController,c,f[i].index,f[i].betItem,f[i].subItem,n);switch(t){case"delete":r.itemDeleteHandler(n);break;case"update":r.itemUpdateHandler(n);break;default:r.initialize()}}}};b365.Ui.Betslip.ItemSubscriptionManager.SubscriptionMapping={};b365.Ui.Betslip.ItemSubscriptionManager.BBSubscriptionMapping={}}();Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ItemDisplay=function(n,t,i,r,u){this._SUSPENDED="suspended";this._HANDICAP="hcapChange";this._ODDSCHANGED="oddsChange";this._Attribute_ID="ID";this._Attribute_ODDS="OD";this._Attribute_HANDICAP="HA";this._Attribute_SUSPENDED="SU";this._Attribute_HASH="HS";this._Attribute_CHANGE_STAMP="SA";this._OddsType_DECIMAL=2;this._OddsType_AMERICAN=3;this._oddsTypeOverride=0;this._hasNormalOdds=!1;this._betSlipWrapper=null;this._item=$(n);this._bsInst=t;this._bsController=i;this._stem=r;this._statusContainer=$('<div  className="bs-ItemStatus"><\/div>');this._isValid=function(){return typeof this._bsInst!="undefined"&&!$(".betReceipt",this._getbetSlipWrapper).length>0&&this._stem&&!this._bsInst._lock};this._anyOthersSuspended=function(){for(var i=n[0].parentNode.childNodes,t=0;t<i.length;t++)if(i[t]!==n&&i[t].className.indexOf("suspended")>-1)return!0;return!1};this._suspend=function(){this._betItem.setStItem("_s","1");this._item.addClass(this._SUSPENDED);this._suspendedChanged=!0;new b365.Ui.Betslip.OddsLineChangedHandler(this._bsInst,this._bsController).handle(!0)};this._getbetSlipWrapper=function(){return this._betSlipWrapper||(this._betSlipWrapper=$("#bsDiv")),this._betSlipWrapper};this._initialize=function(){var n=this,t;n._isValid()&&(t=n._stem.data?n._stem.data:n._stem.target.data,this._handicapText=n._item.find(".bs-Selection_Handicap")[0],this._oddsText=n._item.find(".bs-Odds")[0],this._oddsChoiseSelector=n._item.find(".bs-OddsChoice_SelectionText")[0],n._hasNormalOdds=n._bsInst.getSlipType()!==n._bsInst.slipFixedTeaser,this._oddsText&&this._oddsText.tagName.toLowerCase()==="select"&&(this._oddsText=this._oddsText.children[0]),t&&(n._betItem=n._bsInst.getBetItemByCn(n._bsInst.betTypeNormal,"fp",t[n._Attribute_ID])),n._betItem&&(n._oddsTypeOverride=n._betItem.getOddsOverride()||n._oddsTypeOverride,n.decimalPlaces=n._betItem.getDecimalPlaces()||n.decimalPlaces))};u||this._initialize()};b365.Ui.Betslip.ItemDisplay.prototype.itemUpdateHandler=function(n){var t=this,i=n.data;t._oddsChanged=t._oddsChanged||t._Attribute_ODDS in i&&t._betItem.getCnItem("o")!==i[t._Attribute_ODDS]&&t._hasNormalOdds;t._handicapChanged=t._handicapChanged||t._Attribute_HANDICAP in i&&t._betItem.getCnItem("ln")&&parseFloat(t._betItem.getCnItem("ln"))!==parseFloat(i[t._Attribute_HANDICAP]);t._suspendedChanged=t._Attribute_SUSPENDED in i&&i[t._Attribute_SUSPENDED]==="1";t.commitChanges()};b365.Ui.Betslip.ItemDisplay.prototype.itemDeleteHandler=function(){var n=this;n._isValid()&&n._suspend();n.commitChanges()};b365.Ui.Betslip.ItemDisplay.prototype.commitChanges=function(){var n=this,a=this._item.hasClass("suspended"),v=this._anyOthersSuspended(),s,b,r,c,e,y,i,o,l,p,w;if(n._isValid()){var t=n._stem.data,h=n._oddsChanged||n._handicapChanged,u=n._suspendedChanged,f=0;if(n._oddsChanged&&n._handicapChanged?f=3:n._handicapChanged?f=2:n._oddsChanged&&(f=1),f>0&&n._betItem.setStItem("olc",String(f)),(n._oddsChanged||n._handicapChanged)&&n._Attribute_CHANGE_STAMP in t&&n._betItem.setCnItem("sa",t[n._Attribute_CHANGE_STAMP]),s=!1,n._oddsChanged&&n._oddsText){if(b=n._betItem.getCnItem("o"),r=t[n._Attribute_ODDS],r=n._bsController.getFormatedOdds(r,n.decimalPlaces,+n._oddsTypeOverride),c=Number($("#bsDiv>ul:first-child").attr("data-tcm")),c&&c=="1"&&(e=$("#bsDiv>ul:first-child").attr("data-mod"),e&&(e=e.split("#"),y=n._bsController.getFormatedOdds(t[n._Attribute_ODDS],n.decimalPlaces,2),s=y<Number(e[0]),s?this._item.addClass("bs-MinOddsContigency"):this._item.removeClass("bs-MinOddsContigency"))),n._oddsChoiseSelector){if(n._betItem.getStItem("sp")==="1"){n._betItem.setCnItem("o",t[n._Attribute_ODDS]);n._betItem.setStItem("olc",0);n._bsController._enhancedBetSlipOddsSelector.updateOdds(t,r);n._bsInst.updateState();return}$(n._oddsChoiseSelector).text(r||"");n._bsController._enhancedBetSlipOddsSelector.updateOdds(t,r);n._item.addClass(n._ODDSCHANGED)}else $(n._oddsText).text(r||""),n._item.addClass(n._ODDSCHANGED);n._betItem.setCnItem("o",t[n._Attribute_ODDS])}n._handicapChanged&&n._handicapText&&(i=t[n._Attribute_HANDICAP]||"",i.length>0&&i.indexOf(".")===-1&&(i=(i.indexOf("+")>-1?"+":"")+Number(i).toFixed(1)),n._bsInst.getSlipType()===n._bsInst.slipFixedTeaser&&(i=i.replace("+","")),$(n._handicapText).text(i),n._item.addClass(n._HANDICAP),n._betItem.setCnItem("ln",t[n._Attribute_HANDICAP]));o=!1;n._suspendedChanged&&(n._betItem.setStItem("_s","1"),o=!0);l=n._item.find(".bs-OddsContainer");(u||n._oddsChanged)&&(o||s?(n._item.addClass(n._SUSPENDED),l.find(".bs-ItemStatus").length===0&&(l.append(this._statusContainer),this._statusContainer.text(betSlipML.suspended))):n._item.removeClass(n._SUSPENDED));(h||u)&&n._bsInst.updateState();h&&new b365.Ui.Betslip.TotalsCalculator(n._bsInst,n._bsController).calculate();(h||u)&&new b365.Ui.Betslip.OddsLineChangedHandler(n._bsInst,n._bsController).handle(v||o);n._suspendedChanged===!1&&this._item.hasClass("suspended")&&(n._item.removeClass(n._SUSPENDED),n._betItem.setStItem("_s","0"),n._bsInst.updateState(),new b365.Ui.Betslip.OddsLineChangedHandler(n._bsInst,n._bsController).handle(v||o));typeof u!="undefined"&&(u&&!a||!u&&a)&&(p=n._item.attr("data-item-exclusion"),w=n._item.attr("data-item-exclusion2"),n._betItem.setCnItem("ex",p),n._betItem.setCnItem("x2",w),n._bsController.getMultipleItemsController().check());n._oddsChanged=!1;n._handicapChanged=!1;n._suspendedChanged=undefined}};b365.Ui.Betslip.ItemDisplay.itemSuspen=function(n){var t=n.getElementsByClassName("bs-OddsContainer")[0],r=n.getElementsByClassName("bs-ItemStatus")[0],i;t||(t=n);!r&&t&&(i=document.createElement("div"),i.className="bs-ItemStatus",i.appendChild(document.createTextNode(betSlipML.suspended)),t.appendChild(i))};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ItemDisplayAusRacing=function(n,t){this._betSlipInstance=n;this._betSlipController=t;this._betCookie=null;this._betItem=null;this._ausDropDownItem=null;this._ausItemDataNode=null;this._stem=null;this._betSlipWrapper=null;this._oddsContainer=null;this._oddsText=null;this._oddsChoiceSelector=null;this._FIXED_EACH_WAY_PLBT_ID="99991";this._SUSPENDED=" suspended";this._ODDSCHANGED=" oddsChange";this._DISABLED=" inplaysuspend";this._SELECTED=" selected";this._Attribute_ID="ID";this._Attribute_ODDS="OD";this._Attribute_HANDICAP="HA";this._Attribute_SUSPENDED="SU";this._Attribute_HASH="HS";this._Attribute_CHANGE_STAMP="SA";this._OddsType_DECIMAL=2;this._OddsType_AMERICAN=3;this._oddsTypeOverride=0;this._statusContainer=$('<div  className="bs-ItemStatus"><\/div>');this._oddsChanged=!1;this._suspendedState=0;this._isValid=function(){var n=this;return typeof n._betSlipInstance!="undefined"&&!$(".betReceipt",n._getbetSlipWrapper).length>0&&n._stem&&!n._betSlipInstance._lock};this._anyOthersSuspended=function(){for(var i=this,t=i._betItem.parentNode.children,r=t.length,n=0;n<r;n++)if(t[n]!==i._betItem&&t[n].className.indexOf("suspended")>-1)return!0;return!1};this._suspend=function(){var n=this;n._changeAusDropdownItemSuspendStatus(!0);new b365.Ui.Betslip.OddsLineChangedHandler(n._betSlipInstance,n._betSlipController).handle(!0)};this._getbetSlipWrapper=function(){var n=this;return n._betSlipWrapper||(n._betSlipWrapper=$("#bsDiv")),n._betSlipWrapper};this._changeAusDropdownItemSuspendStatus=function(n){var t=this,i,f,r,u,e=t._ausDropDownItem.className.indexOf(t._SELECTED)>-1;if(!e)for(r=t._ausDropDownItem.parentNode.children,f=r.length,i=0;i<f;i++)if(r[i].className.indexOf(t._SELECTED)>-1){u=r[i];break}t._ausItemDataNode.setAttribute("data-suspended",n?"1":"0");e||u&&u.children[0].getAttribute("data-item")===t._FIXED_EACH_WAY_PLBT_ID?(n?(t._betItem.className=t._betItem.className+t._SUSPENDED,t._oddsContainer.querySelectorAll(".bs-ItemStatus").length===0&&(t._oddsContainer.append(t._statusContainer),t._statusContainer.text(betSlipML.suspended))):t._betItem.className=t._betItem.className.replace(t._SUSPENDED,""),t._betCookie.setStItem("_s",n?"1":"0"),t._betSlipInstance.updateState(),t._suspendedState=2):t._suspendedState=0};this._isToteWin=function(){var n=this._ausItemDataNode.getAttribute("data-item");return n==="20205"||n==="20212"||n==="40234"||n==="40212"||n==="880205"||n==="880209"?!0:!1};this._isTotePlace=function(){var n=this._ausItemDataNode.getAttribute("data-item");return n==="20206"||n==="20213"||n==="40235"||n==="40213"||n==="880206"||n==="880210"?!0:!1}};b365.Ui.Betslip.ItemDisplayAusRacing.prototype.initialize=function(n,t){var i=this,r;(i._stem=t,i._isValid())&&(i._betItem=n[0],i._ausItemDataNode=n[0].querySelector('[data-participantid="'+t.data.ID+'"]'),i._ausDropDownItem=i._ausItemDataNode.parentNode,i._oddsContainer=i._betItem.querySelectorAll(".bs-OddsContainer")[0],i._oddsText=i._betItem.querySelectorAll(".bs-Odds")[0],i._oddsChoiceSelector=i._betItem.querySelectorAll(".bs-OddsChoice_SelectionText")[0],r=t.data?t.data:t.target.data,i._oddsText&&i._oddsText.tagName.toLowerCase()==="select"&&(i._oddsText=i._oddsText.children[0]),r&&(i._betCookie=i._betSlipInstance.getBetItemByCn(i._betSlipInstance.betTypeNormal,"fp",r[i._Attribute_ID]),i._betCookie||(i._betCookie=i._betSlipInstance.getBetItemByCn(i._betSlipInstance.betTypeNormal,"pp",r[i._Attribute_ID]))),i._betCookie&&(i._oddsTypeOverride=i._betCookie.getOddsOverride()||i._oddsTypeOverride,i.decimalPlaces=i._betCookie.getDecimalPlaces()||i.decimalPlaces))};b365.Ui.Betslip.ItemDisplayAusRacing.prototype.itemUpdateHandler=function(n){var t=this,i=n.data;t._oddsChanged=t._oddsChanged||t._Attribute_ODDS in i&&t._ausItemDataNode.getAttribute("data-odds")!==i[t._Attribute_ODDS];t._suspendedState=t._Attribute_SUSPENDED in i&&i[t._Attribute_SUSPENDED]==="1"?2:1;t.commitChanges()};b365.Ui.Betslip.ItemDisplayAusRacing.prototype.itemDeleteHandler=function(){var n=this;n._isValid()&&n._suspend();n.commitChanges()};b365.Ui.Betslip.ItemDisplayAusRacing.prototype.commitChanges=function(){var n=this,k=n._betItem.className.indexOf("suspended")>-1,d=n._anyOthersSuspended(),i,h=!1,t,r,g,c,l,u,nt,tt,it,e,f,rt,a=!1,ut=!1,v,o,y,p,s,w,b;if(n._isValid()){if(i=n._stem.data,n._oddsChanged&&!n._isToteWin()&&!n._isTotePlace()){if(t=i[n._Attribute_ODDS],r=n._betSlipController.getFormatedOdds(t,n.decimalPlaces,+n._oddsTypeOverride),n._ausItemDataNode.setAttribute("data-odds",t),n._ausItemDataNode.setAttribute("data-displayodds",r),g=n._ausDropDownItem.className.indexOf(n._SELECTED)>-1,g)a=!0;else{for(e=n._ausDropDownItem.parentNode.children,rt=e.length,f=0;f<rt;f++)if(e[f].className.indexOf(n._SELECTED)>-1){c=e[f];break}c&&c.children[0].getAttribute("data-item")===n._FIXED_EACH_WAY_PLBT_ID&&(a=!0,ut=!0)}a&&(n._betCookie.setStItem("olc","1"),n._Attribute_CHANGE_STAMP in i&&n._betCookie.setCnItem("sa",i[n._Attribute_CHANGE_STAMP]),l=Number($("#bsDiv>ul:first-child").attr("data-tcm")),l&&l=="1"&&(u=$("#bsDiv>ul:first-child").attr("data-mod"),u&&(u=u.split("#"),nt=n._betSlipController.getFormatedOdds(i[n._Attribute_ODDS],n.decimalPlaces,2),h=nt<Number(u[0]),n._betItem.className=h?n._betItem.className+" bs-MinOddsContigency":n._betItem.className.replace(" bs-MinOddsContigency",""))),ut?(n._ausItemDataNode.getAttribute("data-iswin")==="1"?(s=n._ausItemDataNode.parentNode.nextElementSibling.children[0],s&&(y=t,p=r,w=s.getAttribute("data-odds"),b=s.getAttribute("data-displayodds"))):(o=n._ausItemDataNode.parentNode.previousElementSibling.children[0],o&&(y=o.getAttribute("data-odds"),p=o.getAttribute("data-displayodds"),w=t,b=r)),n._betCookie.setCnItem("o",y),n._betCookie.setCnItem("po",w),v=p+", "+b):(v=r,n._betCookie.setCnItem("o",t)),n._oddsText.innerHTML=v||"",n._betItem.className=n._betItem.className+n._ODDSCHANGED);new b365.Ui.Betslip.TotalsCalculator(n._betSlipInstance,n._betSlipController).calculate()}(n._suspendedState!==0||n._oddsChanged)&&(n._suspendedState===2||h?n._changeAusDropdownItemSuspendStatus(!0):n._changeAusDropdownItemSuspendStatus(!1));n._suspendedState===1&&n._betItem.className.indexOf("suspended")>-1&&(n._changeAusDropdownItemSuspendStatus(!1),new b365.Ui.Betslip.OddsLineChangedHandler(n._betSlipInstance,n._betSlipController).handle(d||n._suspendedState!==0));n._suspendedState!==0&&(n._suspendedState===2&&!k||n._suspendedState===1&&k)&&(tt=n._betItem.getAttribute("data-item-exclusion"),it=n._betItem.getAttribute("data-item-exclusion2"),n._betCookie.setCnItem("ex",tt),n._betCookie.setCnItem("x2",it),n._betSlipController.getMultipleItemsController().check());(n._oddsChanged||n._suspendedState!==0)&&n._betSlipInstance.updateState();(n._oddsChanged||n._suspendedState!==0)&&new b365.Ui.Betslip.OddsLineChangedHandler(n._betSlipInstance,n._betSlipController).handle(d||n._suspendedState!==0);n._oddsChanged=!1;n._handicapChanged=!1;n._suspendedState=0}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ItemDisplayEachWayExtra=function(n,t,i,r,u){this._SUSPENDED="suspended";this._ODDSCHANGED="oddsChange";this._Attribute_ID="ID";this._Attribute_ODDS="OD";this._Attribute_SUSPENDED="SU";this._Attribute_HASH="HS";this._Attribute_CHANGE_STAMP="SA";this._OddsType_DECIMAL=2;this._OddsType_AMERICAN=3;this._oddsTypeOverride=0;this._betSlipWrapper=null;this._item=$(n);this._bsInst=t;this._bsController=i;this._stem=r;this._statusContainer=$('<div  className="bs-ItemStatus"><\/div>');this._isValid=function(){return typeof this._bsInst!="undefined"&&!$(".betReceipt",this._getbetSlipWrapper).length>0&&this._stem&&!this._bsInst._lock};this._anyOthersSuspended=function(){for(var i=n[0].parentNode.childNodes,t=0;t<i.length;t++)if(i[t]!==n&&i[t].className.indexOf("suspended")>-1)return!0;return!1};this._suspend=function(){this._betItem&&(this._betItem.setStItem("_s","1"),this._item.addClass(this._SUSPENDED),this._suspendedChanged=!0,new b365.Ui.Betslip.OddsLineChangedHandler(this._bsInst,this._bsController).handle(!0))};this._getbetSlipWrapper=function(){return this._betSlipWrapper||(this._betSlipWrapper=$("#bsDiv")),this._betSlipWrapper};this._initialize=function(){var n=this,t;n._isValid()&&(t=n._stem.data?n._stem.data:n._stem.target.data,this._oddsText=n._item.find(".bs-Odds")[0],this._oddsChoiseSelector=n._item.find(".bs-OddsChoice_SelectionText")[0],this._oddsText&&this._oddsText.tagName.toLowerCase()==="select"&&(this._oddsText=this._oddsText.children[0]),t&&(n._betItem=n._bsInst.getBetItemByCn(n._bsInst.betTypeNormal,"fp",t[n._Attribute_ID])),n._betItem&&(n._oddsTypeOverride=n._betItem.getOddsOverride()||n._oddsTypeOverride,n.decimalPlaces=n._betItem.getDecimalPlaces()||n.decimalPlaces))};u||this._initialize()};b365.Ui.Betslip.ItemDisplayEachWayExtra.prototype.itemUpdateHandler=function(n){var t=this,i=n.data;t._oddsChanged=t._oddsChanged||t._Attribute_ODDS in i&&i[t._Attribute_ID]===t._item[0].getAttribute("data-item-fpid");t._suspendedChanged=t._Attribute_SUSPENDED in i&&i[t._Attribute_ID]===t._item[0].getAttribute("data-item-fpid");t.commitChanges()};b365.Ui.Betslip.ItemDisplayEachWayExtra.prototype.itemDeleteHandler=function(n){var t=this,i=n.data,r=i[t._Attribute_ID]===t._item[0].getAttribute("data-item-fpid");t._isValid()&&r&&t._suspend();t.commitChanges()};b365.Ui.Betslip.ItemDisplayEachWayExtra.prototype.commitChanges=function(){var n=this,l=this._item.hasClass("suspended"),b=this._anyOthersSuspended(),h,f,y,i,c,p,w,r;if(n._isValid()){var t=n._stem.data,o=n._oddsChanged,u=n._suspendedChanged,s=0;n._oddsChanged&&(s=1);n._betItem&&(s>0&&n._betItem.setStItem("olc",String(s)),n._oddsChanged&&n._Attribute_CHANGE_STAMP in t&&n._betItem.setCnItem("sa",t[n._Attribute_CHANGE_STAMP]));var e=!1,a=t[n._Attribute_ODDS],v=n._bsController.getFormatedOdds(a,n.decimalPlaces,+n._oddsTypeOverride);n._oddsChanged&&n._oddsChoiseSelector&&(h=Number($("#bsDiv>ul:first-child").attr("data-tcm")),h&&h=="1"&&(f=$("#bsDiv>ul:first-child").attr("data-mod"),f&&(f=f.split("#"),y=n._bsController.getFormatedOdds(t[n._Attribute_ODDS],n.decimalPlaces,2),e=y<Number(f[0]),e?this._item.addClass("bs-MinOddsContigency"):this._item.removeClass("bs-MinOddsContigency"))),n._betItem&&($(n._oddsChoiseSelector).text(v||""),n._item.addClass(n._ODDSCHANGED),n._betItem.setCnItem("o",t[n._Attribute_ODDS])));i=!1;n._suspendedChanged&&(i=t[n._Attribute_SUSPENDED]=="1",n._betItem&&(i?n._betItem.setStItem("_s","1"):n._betItem.setStItem("_s","0")));c=n._item.find(".bs-OddsContainer");n._betItem&&((u||n._oddsChanged)&&(i||e?(n._item.addClass(n._SUSPENDED),c.find(".bs-ItemStatus").length===0&&(c.append(this._statusContainer),this._statusContainer.text(betSlipML.suspended))):n._item.removeClass(n._SUSPENDED)),(o||u)&&n._bsInst.updateState(),o&&new b365.Ui.Betslip.TotalsCalculator(n._bsInst,n._bsController).calculate(),(o||u)&&new b365.Ui.Betslip.OddsLineChangedHandler(n._bsInst,n._bsController).handle(b||i),typeof u!="undefined"&&(u&&!l||!u&&l)&&(p=n._item.attr("data-item-exclusion"),w=n._item.attr("data-item-exclusion2"),n._betItem.setCnItem("ex",p),n._betItem.setCnItem("x2",w),n._bsController.getMultipleItemsController().check()));r=this._item[0].querySelector(".bs-EachWayExtraBetType_MenuItemWrapper[data-participantid='"+t[n._Attribute_ID]+"']");r&&(r.setAttribute("data-odds",a),r.querySelector(".bs-EachWayExtraBetType_MenuItemOdds").innerText=v,i=t[n._Attribute_SUSPENDED]=="1",(i||r.className.indexOf("suspend")>-1||this._oddsChanged)&&(r.className=i||e?r.className+" suspend":r.className.replace(" suspend","")));n._oddsChanged=!1;n._suspendedChanged=undefined}};b365.Ui.Betslip.ItemDisplayEachWayExtra.itemSuspen=function(n){var t=n.getElementsByClassName("bs-OddsContainer")[0],r=n.getElementsByClassName("bs-ItemStatus")[0],i;t||(t=n);!r&&t&&(i=document.createElement("div"),i.className="bs-ItemStatus",i.appendChild(document.createTextNode(betSlipML.suspended)),t.appendChild(i))};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetBuilderPriceCalc=function(){function t(){}var n={},i=0,r=function(t,r,f){for(var c=r.getBBItems(),l="f="+r.getStItem("f")+"&l="+window.sProps.languageId+"&p=",o="",e,h,s=0;s<c.length;s++)o.length&&(o+="|"),o+=c[s].getValue("fp");l+=encodeURIComponent(o);e=new XMLHttpRequest;h=!1;e.onreadystatechange=function(){if(e.readyState==4&&!h){if(h=!0,e.onreadystatechange=null,!n[t])return;delete n[t];i--;e.status==200?u(r,e.responseText,f):f.updateOdds(null)}};e.open("POST","/betbuilderapi/priceip",!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.withCredentials=!1;e.send(l)},u=function(n,t,i){var e=n.getBBItems(),u="bbprice",r,f;window.top.ns_gen5_data.DataUtil.ParseMessage(t,u);r=window.top.Locator.treeLookup.getReference(u);r&&(f=r.data.OD,i.updateOdds(f))};return t.PendingRequests=function(){return i>0},t.FetchPrice=function(t,u,f){if(!n[t]){i++;var e=setTimeout(function(){r(t,u,f)},Math.floor(Math.random()*5e3));n[t]=e}},t.CancelPriceFetch=function(t){var r=n[t];return r?(clearTimeout(r),delete n[t],i--,!0):!1},t}();Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ItemDisplayBetBuilder=function(){function n(n,u,f,e,o,s,h,c){this._bsInst=u;this._bsController=f;this._topic=e;this._index=o;this._betItem=s;this._subItem=h;this._bsWrapper=$("#bsDiv");this._element=$(n);this._stem=c;this._Attribute_ID="ID";this._Attribute_ODDS="OD";this._Attribute_HANDICAP="HA";this._Attribute_SUSPENDED="SU";this._Attribute_HASH="HS";this._Attribute_CHANGE_STAMP="SA";this._oddsTypeOverride=0;this.decimalPlaces=2;this._hasNormalOdds=this._bsInst.getSlipType()!==this._bsInst.slipFixedTeaser;this._betSlipWrapper=null;this.isValid=function(){return typeof this._bsInst!="undefined"&&!$(".betReceipt",this._getbetSlipWrapper).length>0&&this._stem&&!this._bsInst._lock};this.fetchPrice=function(){b365.Ui.Betslip.BetBuilderPriceCalc.FetchPrice(this._index,this._betItem,this);$(".acceptChanges.bs-BtnWrapper",this._bsWrapper).addClass("bbPricefetch");$(".placeBet.bs-BtnWrapper",this._bsWrapper).addClass("bbPricefetch")};this.suspend=function(n){var u,f,e,r;if(n)b365.Ui.Betslip.BetBuilderPriceCalc.CancelPriceFetch(this._index)&&this._element.addClass(i),$(".acceptChanges.bs-BtnWrapper",this._bsWrapper).removeClass("bbPricefetch"),$(".placeBet.bs-BtnWrapper",this._bsWrapper).removeClass("bbPricefetch"),u=this._element.find(".bs-OddsContainer"),this._betItem.setStItem("_s","1"),this._subItem.setValue("_s","1"),u.find(".bs-ItemStatus").length===0&&(f=$('<div  className="bs-ItemStatus"><\/div>'),u.append(f),f.text(betSlipML.suspended)),this._element.addClass(t);else{for(this._subItem.setValue("_s","0"),e=this._betItem.getBBItems(),r=0;r<e.length;r++)if(e[r].getValue("_s")==="1"){n=!0;break}n||(this._betItem.setStItem("_s","0"),this._element.removeClass(t),this._element.hasClass(i)&&(this.fetchPrice(),this._element.removeClass(i)))}new b365.Ui.Betslip.OddsLineChangedHandler(this._bsInst,this._bsController).handle(n);this._bsInst.updateState()};this.commitChanges=function(){if(this.isValid()&&!this._element.hasClass(r)){var n=this._stem.data;this._suspendedChanged&&this.suspend(n[this._Attribute_SUSPENDED]==="1");this._oddsChanged&&(this._element.hasClass(t)?this._element.addClass(i):this.fetchPrice());this._oddsChanged=!1;this._suspendedChanged=!1}}}var t="suspended",i="fetch",u="oddsChange",r="deleted";return n.prototype.initialize=function(){var n,i,r;this.isValid()&&(n=this._stem.data,this._betItem&&(this._oddsTypeOverride=this._betItem.getOddsOverride()||this._oddsTypeOverride,i=this._element.hasClass(t),this._oddsChanged=this._Attribute_ODDS in n&&this._subItem.getValue("o")!==n[this._Attribute_ODDS]&&this._hasNormalOdds,this._suspendedChanged=this._Attribute_SUSPENDED in n&&n[this._Attribute_SUSPENDED]==="1"!==i,(this._oddsChanged||this._suspendedChanged)&&this.commitChanges(),r=this._Attribute_HANDICAP in n&&this._subItem.getValue("ln")&&parseFloat(this._subItem.getValue("ln"))!==parseFloat(n[this._Attribute_HANDICAP]),r&&this.itemDeleteHandler()))},n.prototype.updateOdds=function(n){var t,i;if(b365.Ui.Betslip.BetBuilderPriceCalc.PendingRequests()||($(".acceptChanges.bs-BtnWrapper",this._bsWrapper).removeClass("bbPricefetch"),$(".placeBet.bs-BtnWrapper",this._bsWrapper).removeClass("bbPricefetch"),$(".updatingOdds.bs-BtnWrapper",this._bsWrapper).addClass("hidden")),!n){this.suspend(!0);return}if(t=this._stem.data,this._subItem.setValue("o",t[this._Attribute_ODDS]),i=this._betItem.getStItem("o",n),i==n&&$(".acceptChanges.bs-BtnWrapper",this._bsWrapper).hasClass("hidden")){$(".placeBet.bs-BtnWrapper",this._bsWrapper).removeClass("hidden");return}this._betItem.setStItem("olc","1");this._betItem.setStItem("o",n);this._bsInst.updateState();this._element.addClass(u);var r=this._betItem.getOddsOverride()||this._oddsTypeOverride,f=this._bsController.getFormatedOdds(n,2,+r),e=this._element.find(".bs-BetBuilderSelection_Odds");e.html(f);b365.Ui.Betslip.BetBuilderPriceCalc.PendingRequests()||(new b365.Ui.Betslip.OddsLineChangedHandler(this._bsInst,this._bsController).handle(!1),new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this._bsController).calculate())},n.prototype.itemUpdateHandler=function(n){var t=n.data,i;this._oddsChanged=this._oddsChanged||this._Attribute_ODDS in t&&this._subItem.getValue("o")!==t[this._Attribute_ODDS]&&this._hasNormalOdds;this._suspendedChanged=this._Attribute_SUSPENDED in t&&t[this._Attribute_SUSPENDED]!==this._betItem.getCnItem("o");i=this._Attribute_HANDICAP in t&&this._subItem.getValue("ln")&&parseFloat(this._subItem.getValue("ln"))!==parseFloat(t[this._Attribute_HANDICAP]);i&&this.itemDeleteHandler();this.commitChanges()},n.prototype.itemDeleteHandler=function(){this.suspend(!0);b365.Ui.Betslip.BetBuilderPriceCalc.CancelPriceFetch(this._index);this._element.addClass(r)},n}();Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.MultipleItemsController=function(n,t){this._bsInst=n;this._bsController=t;this._multiConstruct=null;this._singlesValue=null;this._multiOpen=null;this._stagedToCallTimer=null;this._restrictedMultiples="";this._requesting=!1;this._rerequest=!1;this._isValid=function(){return typeof this._bsInst!="undefined"};this._clearMultiples=function(){var n=this._findMultiples();n&&(n.innerHTML="",n.setAttribute("style","display:none;"));this._bsInst.contentChangedOnClient()};this._findMultiples=function(){var n=document.getElementsByClassName("bs-MultipleBets")[0];return n||(n=document.getElementsByClassName("bs-MultipleBetsBanker")[0]),n||(n=document.getElementsByClassName("bs-TeaserBets")[0]),n};this._restoreState=function(){var e=this._bsInst.getValueFromBSCookie("mo").replace("||","")==="1",u,n,s,h,f,t,c,i,r;if(e&&!this._multiOpen||!e&&this._multiOpen?new b365.Ui.Betslip.ToggleMultiples(this._bsInst,this._bsController).toggle():e&&this._multiOpen&&new b365.Ui.Betslip.ToggleMultiples(this._bsInst,this._bsController).reset(),new b365.Ui.Betslip.RestoreStateHandler(this._bsInst).handle(),this._multiConstruct!==""){var l=document.getElementsByClassName("bs-MultipleBets_Stake"),o=$bto.parseCookieString(this._multiConstruct,this._bsInst.betTypeMultiple),a=this._bsInst.getBetItems(this._bsInst.itemTypeMultiple);for(u=0;u<l.length;u++)if(n=l[u],n){if(s=new b365.Ui.Betslip.ItemInformation(n),!s)continue;if(h=s.itemIndexAndType()[0],h==="-1")n.value!==this._singlesValue&&(n.value=this._singlesValue);else for(f=0;f<a.length;f++)if(t=a[f],c=t&&t.getCnItem&&t.getCnItem("id"),c===h){for(i=0;i<o.length;i++)if(r=o[i],r&&r.getCnItem&&r.getCnItem("id")===c){t.parse(r.toString());o.splice(i,1);break}!n.value!==t.getStItem("st")&&(n.value=t.getStItem("st")||"");break}}this._multiConstruct=null}new b365.Ui.Betslip.TotalsCalculator(this._bsInst,this._bsController).calculate();this._styleRestrictions()};this._styleRestrictions=function(){for(var t=document.querySelectorAll('[data-item-type="single"]'),n=0;n<t.length;n++)this._restrictedMultiples.indexOf(t[n].getAttribute("data-item-fpid"))>-1&&(t[n].className=t[n].className+" bs-RestrictedCong")};this._skipServerCheck=function(){return this._bsInst.getSlipType()===this._bsInst.slipBanker?this._bsInst.unsuspendedItemCount()<3:this._bsInst.unsuspendedItemCount()===1}};b365.Ui.Betslip.MultipleItemsController.prototype={check:function(){var n=this;if(this._isValid()){if(this._requesting){this._rerequest=!0;return}this._stagedToCallTimer&&(window.clearTimeout(this._stagedToCallTimer),this._stagedToCallTimer=null);this._stagedToCallTimer=window.setTimeout(function(){n._bsInst.updateState();n.cacheState();n._skipServerCheck()?n._clearMultiples():(n._requesting=!0,n._bsInst.req(n._bsInst.reqTypeFetchMultiples));n._stagedToCallTimer=null},50)}},process:function(n){if(this._requesting=!1,this._rerequest){this.check();return}this._bsInst.handleInProg("hide");var t=this._findMultiples();t&&(t.outerHTML=n,this._restoreState(),this._bsInst.contentChangedOnClient())},cacheState:function(){var r=document.getElementById("bsMultipleContainer"),i,n,t,u;for(this._multiConstruct=$bto.serialize(this._bsInst.getBetItems(this._bsInst.betTypeMultiple)),this._multiOpen=r&&r.className.indexOf("open")>-1||!!this._multiOpen,i=document.getElementsByClassName("bs-MultipleBets_Stake"),n=0;n<i.length;n++)if(t=i[n],t&&(u=new b365.Ui.Betslip.ItemInformation(t),u.itemIndexAndType()[0]==="-1")){this._singlesValue=t.value;break}},setRestrictedMultiples:function(n){this._restrictedMultiples=n}};Array.prototype.indexOf||(Array.prototype.indexOf=function(n,t){t||(t=0);for(var i=t;i<this.length;i++)if(this[i]===n)return i;return-1});Array.prototype.map||(Array.prototype.map=function(n,t){var e,u,i,r,f,o,s;if(this==null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(e=t),u=new Array(f),i=0;i<f;)i in r&&(o=r[i],s=n.call(e,o,i,r),u[i]=s),i++;return u});Array.prototype.filter||(Array.prototype.filter=function(n){var i,f,r,e,t,u;if(this===void 0||this===null)throw new TypeError(" this is null or not defined");if(i=Object(this),f=i.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(r=[],e=arguments.length>=2?arguments[1]:void 0,t=0;t<f;t++)t in i&&(u=i[t],n.call(e,u,t,i)&&r.push(u));return r});Array.prototype.reduce||(Array.prototype.reduce=function(n){if(typeof n!="function")throw new TypeError(n+" is not a function");var i=Object(this),u=i.length>>>0,t=0,r;if(arguments.length==2)r=arguments[1];else{while(t<u&&!(t in i))t++;if(t>=u)throw new TypeError("Reduce of empty array with no initial value");r=i[t++]}for(;t<u;t++)t in i&&(r=n(r,i[t],t,i));return r});Element.prototype.getElementsByClassName||(Element.prototype.getElementsByClassName=function(n){var t=this;return t.querySelectorAll?t.querySelectorAll("."+n):[]});document.getElementsByClassName||(document.getElementsByClassName=function(n){var t=document;return t.querySelectorAll?t.querySelectorAll("."+n):[]});window.addEventListener||function(n,t,i,r,u,f,e){n[r]=t[r]=i[r]=function(n,t){var i=this;e.unshift([i,n,t,function(n){n.currentTarget=i;n.preventDefault=function(){n.returnValue=!1};n.stopPropagation=function(){n.cancelBubble=!0};n.target=n.srcElement||i;typeof t=="function"?t.call(i,n):t.handleEvent(n)}]);this.attachEvent("on"+n,e[0][3])};n[u]=t[u]=i[u]=function(n,t){for(var r=0,i;i=e[r];++r)if(i[0]==this&&i[1]==n&&i[2]==t)return this.detachEvent("on"+n,e.splice(r,1)[0][3])};n[f]=t[f]=i[f]=function(n){return this.fireEvent("on"+n.type,n)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);window.location.pathname.indexOf("LottoInterface.aspx")<=0&&(window.addEventListener?window.addEventListener("load",initBetslip):window.attachEvent("onload",initBetslip));var $log=function(){if("console"in window){Array.prototype.splice.call(arguments,0,0,(new Date).getTime()+"  ");try{console.log.apply(console,arguments)}catch(n){console.log(Array.prototype.join.call(arguments,"  "))}}},bsApp,BetslipApp=function(){var n=this,t;n.bsController=null;n.betslipWebModule=null;n.betCount=0;n.subscriptionManager=null;n.confirmationManger=null;n.betslipHeight=0;n.receiptAnimation=null;n.isIe=window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./);n.matchAlertsEnabled=null;n.overlay=null;n.domainId=0;n.DomainIdEnum={unknown:0,it:1,com:2,es:3,gr:4,au:5,dk:6};n.deviceTagType=null;t=window.location.hostname.split(".").pop();window.location.hostname&&n.DomainIdEnum.hasOwnProperty(t)&&(n.domainId=n.DomainIdEnum[t]);n.bsContext={LoadBetCallModule:function(t){n.betslipWebModule&&n.betslipWebModule.loadBetCallModule&&n.betslipWebModule.loadBetCallModule(t)},GetBetCallController:function(){return n.betslipWebModule&&n.betslipWebModule.getBetCallController?n.betslipWebModule.getBetCallController():null},RefreshBalanceOnBetCallEnd:function(){if(n.betslipWebModule&&n.betslipWebModule.refreshUserBalance)return n.betslipWebModule.refreshUserBalance()},ClientEnhancedMode:function(){return!1},ShowStakePadToolTips:function(){return!1},ClientBetSlipShowing:function(){},ClientUsesSelect:function(){return!1},ClientActionInProgress:function(){return!1},GetCurrencyObject:function(){return{decimalSeparator:window.sProps.balance.currencyDecimalSeparator,thousandsSeparator:window.sProps.balance.currencyGroupSeparator}},ClientLoginDelegate:function(){n.betslipWebModule&&n.betslipWebModule.showBetslipLogin&&n.betslipWebModule.showBetslipLogin()},ClientQuickBetLoginDelegate:function(){if(n.betslipWebModule&&n.betslipWebModule.showBetslipLogin)n.betslipWebModule.showBetslipLogin(!0)},clientAddQuickBetToBetslip:function(){n.betslipWebModule&&n.betslipWebModule.addQuickBetToBetslip&&n.betslipWebModule.addQuickBetToBetslip()},ShowBetslipBreakdownDialog:function(t){n.betslipWebModule&&n.betslipWebModule.showBetslipBreakdownDialog&&n.betslipWebModule.showBetslipBreakdownDialog(t)},ShowPitcherDetails:function(t){n.betslipWebModule&&n.betslipWebModule.showPitcherDetails&&n.betslipWebModule.showPitcherDetails(t)},updateCurrenyRate:function(t){n.betslipWebModule&&n.betslipWebModule.updateCurrenyRate&&n.betslipWebModule.updateCurrenyRate(t)},ClientContinueDelegate:function(){n.removeBets();n.refreshSlip()},IsReqOnBetAddedEnabled:function(){return!1},IsReqOnBetDeletedEnabled:function(){return!0},KeyboardType:function(){return""},IsAuthenticated:function(){return n.betslipWebModule?n.betslipWebModule.isAuthenticated():!1},JoinNow:function(){return!0},MembersHistory:function(){n.betslipWebModule&&n.betslipWebModule.launchMembersHistory&&n.betslipWebModule.launchMembersHistory()},BetPlacementNotification:function(t){n.betslipWebModule.betPlacementNotification(t)},BetSource:function(){return"FlashInPLay"},DeviceType:function(){if(n.deviceTagType!==null)return n.deviceTagType;if(n.domainId!==n.DomainIdEnum.it)return n.deviceTagType="",n.deviceTagType;n.deviceTagType="OtherDesktopApp";var t=navigator.userAgent.toLowerCase()||"",u=navigator.platform.toUpperCase()||"",o=typeof window.orientation!="undefined"?!1:!0,v=u.indexOf("MAC")>=0,y=u.indexOf("WIN")>=0,p=u.indexOf("LINUX")>=0,f=t.indexOf("android")>-1,r=!1,s=!1,i=!1,c=u==="IPHONE"||t.indexOf("iphone")>=0,l=u==="IPAD"||t.indexOf("ipad")>=0,a=u==="IPOD"||t.indexOf("ipod")>=0,e=c||l||a,h=t.indexOf("windows phone")>-1||t.indexOf("microsoft build")>-1;return f&&(r=t.indexOf("mobile")>=0,r||(s=!0),i=t.indexOf("b365sports")>-1),e&&(r=c||a,r||(s=!0),i=t.indexOf("bet365wrapper")>-1),h&&(r=!0),e&&i&&(n.deviceTagType="iOSMobileApp"),e&&!i&&(n.deviceTagType="iOSMobileBrowser"),o&&!i&&v&&(n.deviceTagType="iOSDesktopBrowser"),l&&i&&(n.deviceTagType="iOSTabletApp"),o&&(f||p)&&(n.deviceTagType="AndroidDesktopBrowser"),r&&f&&i&&(n.deviceTagType="AndroidMobileApp"),r&&f&&!i&&(n.deviceTagType="AndroidMobileBrowser"),s&&f&&i&&(n.deviceTagType="AndroidTabletApp"),h&&(n.deviceTagType="WindowMobileBrowser"),h||!y||!o||f||e||(n.deviceTagType="WindowsDesktopBrowser"),n.deviceTagType},ShowStreaming:function(){return!0},ShowFullTextMode:function(){return!0},OnStreamingClick:function(){},ShowConfirmation:function(t,i){n.confirmationManger||(n.confirmationManger=new BetSlipShowConfirmationHandler(t));n.confirmationManger.handle(i)},showSiteConfirmation:function(t){n.betslipWebModule.showBetslipSiteDialog(t)},showPushbetDialog:function(t){n.betslipWebModule.showPushbetDialog(t)},getPushPopupStatus:function(t){return n.betslipWebModule.currentPushBetPopupStatus(t)},repositionPopup:function(){n.betslipWebModule&&(n.bsContext.additionalResizeRequired(),n.betslipWebModule.repositionPopup())},additionalResizeRequired:function(){n.betslipWebModule&&n.betslipWebModule.setAdditionalResizeRequired&&n.betslipWebModule.setAdditionalResizeRequired(!0)},ShowDialog:function(){},ShowTooltip:function(){},RefreshUserBalance:function(){return!1},ItemsRemoved:function(t){n.itemsRemoved(t.Id)},SetupTruncated2dpPriceForReturnsCalc:function(){window.bs.useTruncated2dpPriceForReturnsCalc=n.domainId===n.DomainIdEnum.it?!window.pushedConfig||!window.pushedConfig.getIsPSQFV4Enabled():!1},StakeEntryRule:function(){return null},PushBetRulesUrl:function(){return""},HighlightSelectedBets:function(){},PushBetPopupAcceptedHandler:function(t){return n.betslipWebModule&&n.betslipWebModule.pushBetPopupAcceptedHandler&&n.betslipWebModule.pushBetPopupAcceptedHandler(t),null},IsMatchAlertsEnabled:function(){return n.matchAlertsEnabled!=null?n.matchAlertsEnabled:n.betslipWebModule&&n.betslipWebModule.isMatchAlertsAvailiable?(n.matchAlertsEnabled=n.betslipWebModule.isMatchAlertsAvailiable(),n.matchAlertsEnabled):!1},ShowSiteOverlaySpinner:function(){},HideSiteOverlaySpinner:function(){},BetCallTwilioSupported:function(){return window.sProps&&window.sProps.clickToCall&&sProps.clickToCall.twiliosupported===!0},AppType:function(){return""},AppVersion:function(){return""},ToggleQuickBetHelpTooltip:function(t){n.betslipWebModule&&n.betslipWebModule.resetBetslipProgress&&n.betslipWebModule.toggleQuickBetHelpTooltip(t)},betCallConnectedDelegate:function(){},betCallDisconnectedDelegate:function(){},subscribeItem:function(t){n.betslipWebModule&&!n.subscriptionManager&&(n.subscriptionManager=n.betslipWebModule.getBetslipSubscriptionManager());n.betslipWebModule&&n.subscriptionManager&&n.subscriptionManager.subscribe(t)},unsubscribeItem:function(t){n.betslipWebModule&&!n.subscriptionManager&&(n.subscriptionManager=n.betslipWebModule.getBetslipSubscriptionManager());n.betslipWebModule&&n.subscriptionManager&&n.subscriptionManager.unsubscribe(t)},getFormatedOdds:function(t,i,r){return n.betslipWebModule&&n.betslipWebModule.getFormatedOdds?n.betslipWebModule.getFormatedOdds(t,i,r):t},getUsersOddsType:function(){return n.betslipWebModule&&n.betslipWebModule.getUsersOddsType?n.betslipWebModule.getUsersOddsType():1},setBetguid:function(t){n.betslipWebModule&&n.betslipWebModule.setBetguid&&n.betslipWebModule.setBetguid(t)},getBetguid:function(){return n.betslipWebModule&&n.betslipWebModule.getBetguid?n.betslipWebModule.getBetguid():null},setTelebetBetslip:function(t){if(n.betslipWebModule&&n.betslipWebModule.setTelebetBetslip)return n.betslipWebModule.setTelebetBetslip(t)},setMicrophoneAvailable:function(t){if(n.betslipWebModule&&n.betslipWebModule.setMicrophoneAvailable)return n.betslipWebModule.setMicrophoneAvailable(t)},resizeBetslip:function(){n.resizeBetslip&&n.resizeBetslip()},RetainSelectionsDelegate:function(){n.receiptAnimation&&(n.receiptAnimation.animationRunning=!1)},setQuickBetTooltipDismissed:function(t){n.betslipWebModule&&n.betslipWebModule.setQuickBetTooltipDismissed&&n.betslipWebModule.setQuickBetTooltipDismissed(t)},getQuickBetTooltipDismissed:function(){if(n.betslipWebModule&&n.betslipWebModule.getQuickBetTooltipDismissed)return n.betslipWebModule.getQuickBetTooltipDismissed()},setQuickBetEnabled:function(t){n.betslipWebModule&&n.betslipWebModule.setQuickBetEnabled&&n.betslipWebModule.setQuickBetEnabled(t)},getQuickBetEnabled:function(){if(n.betslipWebModule&&n.betslipWebModule.getQuickBetEnabled)return n.betslipWebModule.getQuickBetEnabled()},setAusMultiplesAvailable:function(t){n.betslipWebModule&&n.betslipWebModule.setAusMultiplesAvailable&&n.betslipWebModule.setAusMultiplesAvailable(t)},getAusMultiplesAvailable:function(){if(n.betslipWebModule&&n.betslipWebModule.getAusMultiplesAvailable)return n.betslipWebModule.getAusMultiplesAvailable()},setMatchAlertSubscriptionState:function(t){n.betslipWebModule&&n.betslipWebModule.setMatchAlertSubscriptionState&&n.betslipWebModule.setMatchAlertSubscriptionState(t)},populateMatchAlerts:function(t){n.betslipWebModule&&n.betslipWebModule.populateMatchAlerts&&n.betslipWebModule.populateMatchAlerts(t)}};n.init=function(){n.betslipWebModule=getBetslipWebModule();n.betslipWebModule&&(n.betslipWebModule.registerSABSWA(n),n.betslipWebModule.userPrefs&&n.betslipWebModule.userPrefs.setTwilioSupported&&n.betslipWebModule.userPrefs.setTwilioSupported(n.bsContext.BetCallTwilioSupported()));n.bsController=new window.BetSlipController(window.bs,n.bsContext);n.bsController.initialise();n.bsController.OnBetslipContentLoaded();n.bsController.setPushMarketsEnabled(n.domainId==1);new BetslipEventAttacher(window.bs,n).attach();n.setupView();n.bsController.initialiseMicrophone();n.bsContext.SetupTruncated2dpPriceForReturnsCalc();n.bsController.refreshBetslip();n.subscriptionManager=n.betslipWebModule&&n.betslipWebModule.getBetslipSubscriptionManager()};n.register=function(){n.betslipWebModule=getBetslipWebModule();n.betslipWebModule&&n.betslipWebModule.registerSABSWA?n.betslipWebModule.registerSABSWA(n):setTimeout(n.register,1e3)};n.setupView=function(){window.addEventListener("resize",n.resizeHandler)};n.resizeHandler=function(){n.bsController.resizeHandler()};n.refreshSlip=function(t){n.bsController.refreshBetslip(t)};n.subscriptionHandler=function(t,i){n.bsController.subscriptionHandler(t,i)};n.addBet=function(t){var r,i="";if(n.receiptAnimation&&(n.receiptAnimation.animationRunning=!1),n.bsController._bsInst.locked&&n.bsController._bsInst.locked()){n.resetBetslipProgress();return}(i=typeof t=="string"?t+n.getMediaType(t):t.ConstructString?t.ConstructString+n.getMediaType(t):t,i)&&(r=$.proxy(function(){n.addBetSuccessCallBack(t)},this),n.bsController.addBet(i,!1,r))};n.getMediaType=function(n){var t=document.getElementById("CpKey"),i;return t&&t.value!==""?(i=new CouponKey(t.value),i.inplay?n.indexOf("TP=")>-1?"mt=1":"mt=14":""):""};n.addBetSuccessCallBack=function(t){n.betslipWebModule&&(n.betslipWebModule.addBetSuccess(t),n.bsController.betCallHandler&&n.bsController.betCallHandler.showLoginPrompt()&&(n.bsController.setTelebetBetslip&&n.bsController.setTelebetBetslip(n.hasPhoneOnlyItemOnSlip()),n.betslipWebModule.showBetslipLogin()))};n.deleteBet=function(t){n.bsController.deleteBet(t)};n.deleteCastBet=function(t){n.bsController.deleteCastBet(t)};n.phoneBet=function(t){n.bsController.initiatePhoneBetRequest(t)};n.placeBet=function(){n.bsController.placeBet()};n.removeBets=function(){n.getBetCount(n.bsController._bsInst)>0?n.bsController.removeBets():n.bsController.itemsRemoved()};n.checkPlaceBetStatus=function(){n.placeBetAfterLogin()&&(n.placeBet(),siteDataSession.setItem("loginPlaceBet","false"))};n.placeBetAfterLogin=function(){return!!siteDataSession.getItem("loginPlaceBet")&&(siteDataSession.getItem("loginPlaceBet")=="true"?!0:!1)};n.placeBetSuccess=function(){n.betslipWebModule&&n.betslipWebModule.placeBetSuccess&&n.betslipWebModule.placeBetSuccess()};n.resetBetslipProgress=function(){n.betslipWebModule&&n.betslipWebModule.resetBetslipProgress&&n.betslipWebModule.resetBetslipProgress()};n.hideBetslip=function(){};n.hasPhoneOnlyItemOnSlip=function(){var t,n,i;if(window.bs)for(t=window.bs.getBetItems(),n=0,i=t.length;n<i;n++)if(t[n].getStItem("pom")==="Y")return!0;return!1};n.showBetslip=function(){var t,c,i,f,e,r,u,o,s,l,h,a;$("#betslipContainer").show();$("#Site").attr("data-bsmode","on");$("#Main").hide();$("#betslipBar").hide();viewLoaded();n.overlay&&n.overlay.remove();Modernizr.inplaypush&&(t=document.getElementById("betslipContainer"),c=document.getElementById("PageFooter"),i=c.parentNode,f=document.getElementById("betslipBar"),e=document.getElementById("NavBar"),r=document.getElementById("BackToTopBigBttn"),u=r?r.childNodes[1]:null,o=e?e.clientHeight:0,s=f?f.clientHeight:0,l=i?i.clientHeight:0,h=clientViewport().height,a=h-l-o-s,t&&(t.style.minHeight=a+"px",i&&r&&u&&(h>t.clientHeight+o+s?u.setAttribute("class","hidden"):u.setAttribute("class",""))))};n.updateBetslipBar=function(){};n.resizeBetslip=function(){var t,v=document.getElementsByClassName("betReceipt").length>0,f=!1,e=document.documentElement.className.indexOf("ie-8")>-1,o=document.getElementById("betslipContainer"),s=document.getElementsByClassName("bs-dialogMessage"),h=document.querySelectorAll(".placeBet .bs-Btn"),u,r,c;if(n.betslipWebModule){if(v&&!e&&(n.receiptAnimation||(n.receiptAnimation=new b365.Ui.Betslip.ReceiptLoadAnimation),n.receiptAnimation.setup(n.bsController,n.betslipHeight)&&(f=!0,t=n.receiptAnimation.height)),s.length>0&&s[0].className.indexOf("confirmDialogue")>-1&&(u=s[0].getBoundingClientRect(),r=u.top*2+(u.bottom-u.top),o&&r>o.scrollHeight)){c=e||document.documentElement.className.indexOf("ie-9")>-1;c&&(document.getElementsByClassName("bs-dialogOverlay")[0].style.height=r);n.betslipWebModule.resizeBetslip(t,{runAnimation:f,animStart:function(){n.receiptAnimation.animate()}});o.style.height=r+"px";n.betslipHeight=r+"px";return}if(t||(t=document.getElementById("betslipContainer").clientHeight),!n.betslipWebModule.isPopupShown()||this.betslipWebModule.isAdditionalResizeRequired()?(n.betslipWebModule.resizeBetslip(t,{runAnimation:f,animStart:function(){n.receiptAnimation.animate()}}),this.betslipWebModule.isAdditionalResizeRequired()&&this.betslipWebModule.setAdditionalResizeRequired(!1)):n.betslipWebModule.isPopupShown()&&n.betslipWebModule.resizeBetslip(t,null,!0),h[0]){var i=h[0],l=i.offsetHeight,a=e?32:31;l>a&&i.className.indexOf(" bs-Btn-wrapped")==-1?i.className=i.className+" bs-Btn-wrapped":l<=a&&(i.className=i.className.replace(" bs-Btn-wrapped",""))}n.betslipHeight=t}};n.popupShow=function(t){n.betslipWebModule&&(t+=30,n.betslipWebModule.popupShow(t))};n.popupHide=function(){n.betslipWebModule&&n.betslipWebModule.popupHide();n.bsController&&n.bsController.webPopupManager&&n.bsController.webPopupManager.popupHide()};n.getBetCount=function(t){return t=t||n.bsController._bsInst,t.getValueFromBSCookie("processed").replace("||","")=="true"?0:t.numItems(!1)};n.setBetslipBarDisplay=function(){};n.addOnBetAddedReqComplete=function(){n.betslipWebModule&&n.betslipWebModule.addBetCompleted&&(n.betslipWebModule.addBetCompleted(),document.documentElement.className.indexOf("ie-8")>-1&&window.setTimeout(function(){n.resizeBetslip()},1e3))};n.addOnRefreshReqComplete=function(){n.betslipWebModule&&n.betslipWebModule.refershBetslipCompleted&&n.betslipWebModule.refershBetslipCompleted()};n.getBetslipItems=function(){for(var n=window.bs.getBetItems(),r={},e,u,i,f,t=0;t<n.length;t++)n[t].getCnItem("id")&&(e=n[t].getCnItem("id"),u=e.replace("Y","").replace("N",""),r[u]={ConstructString:n[t].toString(),Uid:u});for(n=window.bs.getBetItems(window.bs.itemTypeCast),i=0;i<n.length;i++)n[i].getCnItem("fp")&&(f=n[i].getCnItem("fp"),r[f]={ConstructString:n[i].toString(),Uid:f});return r};n.getBalanceFromMarkup=function(){return""};n.getStakeFromMarkup=function(){var n=$("ul","#bsDiv").attr("data-st");return typeof n!="undefined"?n:""};n.isSelected=function(t){var i=n.bsController._bsInst,r=t+"Y",u=t+"N";return n.betCount=n.getBetCount(i),n.betCount>0&&(i.getBetItemByCn(i.betTypeNormal,"id",t)!==undefined||i.getBetItemByCn(i.betTypeNormal,"id",r)!==undefined||i.getBetItemByCn(i.betTypeNormal,"id",u)!==undefined)};n.itemsRemoved=function(t){n.betslipWebModule&&(n.betslipWebModule.deHighlightBet(t),n.betslipWebModule.removePushBetFromPrefs(t))};n.animateReceiptToMyBetsButton=function(n){var u=n,t=$("#betslipContainer"),i=document.createElement("div"),r=document.body.clientWidth;i.id="betslipContainerMyBetsClone";i.innerHTML="<div  className='content' style='height:' + $receiptElement.height() + 'px;width:' + $receiptElement.width() + 'px; '><\/div>";i.setAttribute("style",t[0].getAttribute("style")+" height:"+t.height()+"px; left:"+(r-t.width())/2+"px;");t[0].parentNode.insertBefore(i,t[0])};n.setMyBetsCount=function(){};n.setOddsType=function(t){document.getElementsByClassName("br-Receipt").length==0&&n.bsController.setOddsType(t)};n.setQuickBetState=function(t){n.bsController._quickBet&&n.bsController._quickBet.setSwitchAndState&&n.bsController._quickBet.setSwitchAndState(t)};n.toggleQuickBet=function(){n.bsController._bsContext&&n.bsController._bsContext.ToggleQuickBet&&n.bsController._bsContext.ToggleQuickBet()};n.registerBetslipWebModule=function(t,i){n.betslipWebModule=t;window.pushedConfig=i};n.addOnDeleteBetReqComplete=function(){n.betslipWebModule&&n.betslipWebModule.removeBetCompleted&&n.betslipWebModule.removeBetCompleted()};n.addOnAddBetFailed=function(){n.betslipWebModule&&n.betslipWebModule.resetBetslipProgress&&n.betslipWebModule.resetBetslipProgress()};n.navigationChanged=function(t){n.bsController.quickBetContext.navigationChanged(t);n.getBetCount()===0&&n.resizeBetslip()};n.addOnBetSlipLoaded=function(){n.betslipWebModule&&n.betslipWebModule.addOnBetSlipLoaded&&(n.betslipWebModule.addOnBetSlipLoaded(),n.resizeBetslip())};n.isQuickBetEnabled=function(){return n.bsController.quickBetContext.canHandleBets()};n.isLocked=function(){return n.bsController.isLocked()};n.setBetReceiptMatchAlertsState=function(t){n.bsController.setBetReceiptMatchAlertsState(t)};n.getTaxConfig=function(){return $("#bsDiv > ul").attr("data-txr")};n.updateBonusBalace=function(t){n.bsController.updateFreeBetBar(t);n.bsController._bsInst.changeBetslipHeight()};n.dispatchParticipantEvent=function(t){n.betslipWebModule&&n.betslipWebModule.dispatchParticipantEvent&&n.betslipWebModule.dispatchParticipantEvent(t)}},betslipDialogueHeaderLinksProvider=function(){function n(n){var t=this;t._headerLinks=[];t._bsController=n;t._buttonCss className="br-Header_Done";n.IsItalianDomain()&&(t._buttonCssClass+=" br-Italy_Header_Disabled")}return n.prototype.provide=function(){var n=this;return n._headerLinks.push(n.getContinueLink()),n._headerLinks},n.prototype.getContinueLink=function(){var n=this;return{text:window.betSlipML.done,cssClass:n._buttonCssClass,handler:null}},n}(),BetslipEventAttacher=function(n,t){this._bsInst=n;this._bsAppContext=t;this._bsController=t.bsController;this._bsBarHandler=null};BetslipEventAttacher.prototype={attach:function(){var n=this;n._bsController.addOnBetSlipLoaded(function(){n._bsAppContext.addOnBetSlipLoaded()});n._bsController.addOnBetSlipItemsChanged(function(t){var i=n._bsAppContext.getBetCount(t);n._bsAppContext.updateBetslipBar(i)});n._bsController.addOnAcceptChanges(function(){});n._bsController.addOnBetAdded(function(){});n._bsController.addOnEditBet(function(){});n._bsController.addOnBetAddedReqComplete(function(){n._bsAppContext.addOnBetAddedReqComplete&&n._bsAppContext.addOnBetAddedReqComplete()});n._bsController.addOnRefreshReqComplete(function(){n._bsAppContext.addOnRefreshReqComplete&&n._bsAppContext.addOnRefreshReqComplete()});n._bsController.addOnAddReceiptHeaderLinks(function(t){t.headerLinks=new betslipDialogueHeaderLinksProvider(n._bsController).provide()});n._bsController.addOnAddReceiptLiveAlertSignUp(function(){});n._bsController.addOnPlaceBet(function(){});n._bsController.addOnPlaceBetSuccess(function(){var t=$(".placeBet").attr("data-atype"),i;n._bsAppContext.placeBetSuccess();t!="cnf"&&t!="cnf-ref"&&(i=n._bsAppContext.getStakeFromMarkup(),$("#bsDiv").removeClass("confirmCurve"))});n._bsController.addOnMaxSelections(function(){n._bsAppContext.resetBetslipProgress()});n._bsController.addOnChangeBetslipHeight(function(){n._bsAppContext.resizeBetslip()});n._bsController.addOnPopupShow(function(t,i){n._bsAppContext.popupShow(i)});n._bsController.addOnPopupHide(function(){n._bsAppContext.popupHide()});n._bsController.addOnContentChangedOnClient(function(){n._bsAppContext.resizeBetslip()});n._bsController.addOnBetslipError(function(){});$("#bsDiv").off("b365.Ui.Betslip.failedtoaddbet").on("b365.Ui.Betslip.failedtoaddbet",function(t,i){n._bsAppContext.betSelect.deselectBet(i)});n._bsController.addOnDeleteBetReqComplete(function(){n._bsAppContext.addOnDeleteBetReqComplete&&n._bsAppContext.addOnDeleteBetReqComplete()});n._bsController.addOnAddBetFailed(function(){n._bsAppContext.addOnAddBetFailed&&n._bsAppContext.addOnAddBetFailed()})},updateBalance:function(){}};BetSlipShowConfirmationHandler=function(n){this._bsInst=n;this._overlay=new BetSlipPopupOverlay("bs-dialogOverlay",!1,100,!1);this._element=$("#bsCD");this._confirmationObject=null;this._controller=null;this._title=null;this._message=null;this._additional className=null;this._showDialog=function(){this._overlay.add();this._completion()};this._completion=function(){this._setMessageAttributes();this._element.css("top",Math.round(clientViewport().height*.1)+$(window).scrollTop()+"px").fadeIn();this._additionalClass!==""&&this._element.addClass(this._additionalClass);this._bsInst.contentChangedOnClient()};this._setMessageAttributes=function(){var n=$(".bs-dialogMessage_Title",this._element),t=$(".bs-dialogMessage_Content",this._element);n.html(this._title);t.html(this._message);this._setButtonAttributes()};this._setButtonAttributes=function(){$("#okButton",this._element).html(this._confirmationObject.Button1Text);$("#okButton",this._element).attr("data-action",this._confirmationObject.Button1Action);$("#closeButton",this._element).html(this._confirmationObject.Button2Text);$("#closeButton",this._element).attr("data-action",this._confirmationObject.Button2Action)}};BetSlipShowConfirmationHandler.prototype={handle:function(n){var t=this,i;this._element=$("#bsCD");this._confirmationObject=n;this._controller=n.Controller;this._title=n.Title;this._message=n.Msg;this._additional className=n.additionalClass;$("#closeButton, #okButton").removeClass("disabled");t._showDialog();i={hideDialog:function(){var i=$("#bsDiv"),u=i.find(".bs-Btn"),n,r;t._element.hide();t._overlay.remove();t._additionalClass!==""&&t._element.removeClass(t._additionalClass);u.length>0&&(n=i.find("#buttonContent"),n.length>0&&(n=n[0].innerHTML,u[0].innerHTML=n));t._confirmationObject&&t._confirmationObject.hasOwnProperty("OutofContextDialogue")||($("#betslipContainer").show(),i.find(".bs-Footer").removeClass("hidden"));r=document.getElementById("betslipContainer");r&&(r.style.height="");t._bsInst.contentChangedOnClient()}};t._controller.setDialog(i)}};BetSlipPopupOverlay=function(n,t,i,r){this._overlay_Z_Index=i;this._spinnerRequired=r;this._overlay className=n;this._overlayElem=null;this._overlaySpinnerElem=null};BetSlipPopupOverlay.prototype={add:function(){this._overlayElem||(this._overlayElem=$("<div/>",{"class":this._overlayclass?this._overlayclass:"",css:{width:"100%",height:document.body.scrollHeight,"z-index":this._overlay_Z_Index},click:function(){return!1}}),$(document.body).prepend(this._overlayElem),this._spinnerRequired&&this.addSpinner(),$("html").addClass("overlay-on"),this.addResizeListener())},addSpinner:function(){this._overlaySpinnerElem=$("<div/>",{id:"spinnerBox","class":"OverlaySpinnerBox"});this._overlaySpinnerElem.css("top",Math.round(clientViewport().height*.5)+$(window).scrollTop()+"px");this._overlayElem.append(this._overlaySpinnerElem)},addResizeListener:function(){var n=this;$(window).bind("resize.overlay",function(){setTimeout($.proxy(n.adjustHeight,n),750)})},adjustHeight:function(){this._overlayElem.css("height",document.body.scrollHeight)},remove:function(){this._overlayElem&&(this._overlayElem.remove(),this._overlayElem=null);$("html").removeClass("overlay-on");$(window).off("resize.overlay")},removeSpinner:function(){this._overlaySpinnerElem.remove()}};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.BetCreditCalculator=function(n,t){this._bsInst=n;this._betSlipController=t;this._freeBetReceipt=document.getElementsByClassName("br-Receipt")[0]||document.getElementsByClassName("bs-Confirm")[0];this._freeBetsStateCookieKey="fs";this._cookieValSeparator="||";this._selectedFreeBets=this._freeBetReceipt?document.querySelectorAll(".br-FreeBetIcon_Redeemed,.br-UsingFreeBet"):document.getElementsByClassName("bs-FreeBetCheckBox-selected");this._isCurrentlySelected=this._bsInst.getValueFromBSCookie(this._freeBetsStateCookieKey).replace(this._cookieValSeparator,"")==1;this._freeBetBar=document.getElementsByClassName("bs-useBetCredit")[0];this._isoCurrencyText=this._freeBetReceipt?$("#bsDiv").children(".br-Receipt").data("isocode")||$("#bsDiv").children(".bs-Confirm").data("isocode"):$("#bsDiv").children("ul:first-child").data("isocode");this._formatter=new b365.Ui.Formatter;this._decimalSeperator=this._betSlipController._currencyDisplayHelper.getDecimalSeperator();this._itemToReturnDisplayHelper=new b365.Ui.Betslip.ItemToReturnDisplayHelper(t);this._getFreeBetAmount=function(){var n=0;return this._freeBetBar?n=Number(this._freeBetBar.getAttribute("data-bb")):this._freeBetReceipt&&(n=Number(this._freeBetReceipt.getAttribute("data-bb"))),this._isCurrentlySelected?n:0};this._getFreeBetBetslip=function(){var e=this._bsInst.getBetItems(this._bsInst.itemTypeSingle),v=this._bsInst.getBetItems(this._bsInst.itemTypeMultiple),h=this._bsInst.getBetItems(this._bsInst.itemTypeCast),nt=this._bsInst.getBetItems(this._bsInst.itemTypeBetBuilder),i,tt,u,it,f,rt,ut,ft,s,y,et,l=this._betSlipController.ausMultiplesEnabled(),c=[],ct=$("#bsDiv>ul").attr("data-equally-divided")=="True",ot=getBetslipWebModule(),w=!1,k=!1,d=!1,st=[],ht=this._freeBetReceipt?!0:!1,r={},n,g,b,o,t,p,a;for(r.freeBetAmount=this._getFreeBetAmount(),r.betslipType=this._bsInst.getSlipType(),r.betItems=[],i=0,tt=e.length;i<tt;i++)n={},k=e[i].getStItem("_s")==="1",d=e[i].getStItem("sp")==="1",n.stake=!e[i].getStItem("st")?0:Number(e[i].getStItem("st")),n.freeBetTokenSelected=e[i].getStItem("ft")?!0:!1,n.odds=d||k&&!l?[""]:[$blib.getItemOdds(this._bsInst.itemTypeSingle,e[i])],st.push(n.odds[0]),n.placeOdds=e[i].getCnItem("po"),n.ewSelected=e[i].getStItem("ew")=="1"?!0:!1,n.ausEWSelected=!!n.placeOdds,n.ausEWSelected?(c.push([(i+1).toString()]),c[c.length-1].push(n.placeOdds)):(!l||n.ewSelected)&&(g=$('li[data-item-id="'+i+'"]').find(".placedivider")[0],g&&(b=Number(g.getAttribute("data-place-divider")),b&&b>0&&(n.placeOdds=ot.getFractionalPlaceOdds(n.odds[0],b),c.push([(i+1).toString()]),c[c.length-1].push(n.placeOdds)))),n.betCount=1,n.index=i,n.type="single",n.combinations=[["1"]],r.betItems.push(n);for(f=0,rt=h.length;f<rt;f++)ut=h[f].getCnItem("bc")?Number(h[f].getCnItem("bc")):h[f].getStItem("bc")?Number(h[f].getStItem("bc")):1,ft=Number(h[f].getStItem("st")),o={},o.stake=ft,o.ewSelected=!1,o.freeBetTokenSelected=h[f].getStItem("ft")?!0:!1,o.odds=[$blib.getItemOdds(this._bsInst.betTypeCast,h[f])],o.betCount=ut,o.combinations=[["1"]],o.index=f,o.type="cast",r.betItems.push(o);for(u=0,it=v.length;u<it;u++)t={},p=l&&this._betSlipController.complexMultiplesInfo&&this._betSlipController.complexMultiplesInfo.length>u?this._betSlipController.complexMultiplesInfo[u]:null,t.betCount=!ht&&p?p.LC:v[u].getCnItem("bc"),t.betType=v[u].getCnItem("id"),w=t.betCount==="1"&&["54","55"].indexOf(t.betType)===-1,t.stake=!v[u].getStItem("st")?0:Number(v[u].getStItem("st")),t.ewSelected=v[u].getStItem("ew")=="1"||l&&c.length>0?!0:!1,t.freeBetTokenSelected=!1,t.odds=st,t.combinations=p?p.combinations:w?ot.getDefaultMultipleCombination(e.length):[["1"]],t.calculateBetCount=!ht&&l&&!!t.combinations,t.calculateReturnValue=(l||w)&&!!t.combinations,t.index=u,t.type="multiple",t.calculateAccumulatedOdds=w,t.oddsType=this._betSlipController.getUsersOddsType(),r.betItems.push(t),r.calculateMultipleReturnValue=r.calculateMultipleReturnValue||t.calculateReturnValue||l;for(y=0,et=nt.length;y<et;y++)a=nt[y],s={},s.index=y,k=a.getStItem("_s")==="1",d=a.getStItem("sp")==="1",s.odds=[$blib.getItemOdds(this._bsInst.itemTypeBetBuilder,a)],s.freeBetTokenSelected=!!a.getStItem("ft"),s.stake=a.getStItem("st")?Number(a.getStItem("st")):0,s.oddsType=this._betSlipController.getUsersOddsType(),s.type="betbuilder",s.betCount=1,r.betItems.push(s);return r.equallyDivided=ct,r.eachWaySelections=c,r};this._getCookieBetItem=function(n,t){return n==="multiple"?this._bsInst.getBetItems(this._bsInst.itemTypeMultiple)[t]:n==="cast"?this._bsInst.getBetItems(this._bsInst.itemTypeCast)[t]:n==="betbuilder"?this._bsInst.getBetItems(this._bsInst.itemTypeBetBuilder)[t]:this._bsInst.getBetItems(this._bsInst.itemTypeSingle)[t]};this._updateFreeBetStakesAndReturns=function(n){var i,h,t,e,v,rt="",ut=!1,ht=$('li[data-item-id="-1"][data-item-type="multiple"]').length>0,r,y=0,c=$("#bsDiv .bs-TotalToReturn_Wrapper")[0],p,o,w,b,ft,u,k,et,ot,d,s,f,l,a,nt,tt;if(ausMultiplesEnabled=this._betSlipController.ausMultiplesEnabled(),someRelated=$('#bsDiv li[data-item-type="single"].bs-RestrictedCong').length>0,reverseIf=this._bsInst.getSlipType()==this._bsInst.slipReverseIF,it=this._betSlipController._currencyDisplayHelper.getDecimalSeperator(),this._freeBetReceipt)for(i=0,h=n.betItems.length;i<h;i++)if(t=n.betItems[i],t.type==="multiple"&&!isNaN(t.stake)){ut=!0;break}for(p=!1,i=0,h=n.betItems.length;i<h;i++){if(t=n.betItems[i],e=this._getCookieBetItem(t.type,t.index),rt!==t.type&&(rt=t.type,v=ht&&t.type==="multiple"?1:0),o=$(".bs-Alert"),w=$(".placeBet.bs-BtnWrapper"),t.type==="multiple"&&!t.freeBetTokenSelected&&isNaN(t.betItemBetCreditStake)){o.removeClass("hidden");o.addClass("alert");w.addClass("bs-BtnDisabled disabled");this._betSlipController.clientActionInProgress(!0);b365.Ui.Betslip.BetCreditCalculator.prototype.previousErrorMessage||(b365.Ui.Betslip.BetCreditCalculator.prototype.previousErrorMessage=document.querySelector(".bs-Alert_Msg").innerText||"placeholder");document.querySelector(".bs-Alert_Msg").innerText=betSlipML.SplitError;p=!0;break}else p||b365.Ui.Betslip.BetCreditCalculator.prototype.previousErrorMessage&&(o.addClass("hidden"),o.removeClass("alert"),w.removeClass("bs-BtnDisabled disabled"),this._betSlipController.clientActionInProgress(!1),document.querySelector(".bs-Alert_Msg").innerText=b365.Ui.Betslip.BetCreditCalculator.prototype.previousErrorMessage,b365.Ui.Betslip.BetCreditCalculator.prototype.previousErrorMessage="");if(this._freeBetReceipt)if(t.type==="multiple"&&(isNaN(t.stake)||t.stake==0))continue;else if(t.type!=="multiple"&&!ut&&(isNaN(t.stake)||t.stake==0))continue;if(r=$('li[data-item-type="'+t.type+'"]')[v],r)if(this._updateBetSlipItemFreeBetStatusUI(t,r),b=r.getElementsByClassName("bs-BetCreditItem")[0],b&&(e.removeStItem("fb"),t.betItemCookieFreeStake&&e.setStItem("fb",t.betItemCookieFreeStake),this._updateItemFreeStakeUI(t,b)),ft=t.type==="multiple"?r.getElementsByClassName("MultipleBets_ToReturnValue")[0]:r.getElementsByClassName("bs-StakeToReturn_Value")[0],t.type==="single"||t.type==="betbuilder")t.type==="single"&&(y++,(t.ewSelected||t.ausEWSelected)&&y++),u=r.getElementsByClassName("bs-StakeToReturn_Text")[0],u&&(t.ewSelected||(ft.innerHTML=t.betItemReturnsValue>=0?t.betItemReturns:$blib.roundDecimal(String(0),it)),s=t.betItemReturnsValue>=0?t.betItemReturns:$blib.roundDecimal(String(0),this._decimalSeperator),f=t.betItemBetCreditStake>0||t.betItemFreeStake>0?betSlipML.netreturn:betSlipML.toreturn,u.innerHTML=f,k=r.getElementsByClassName("bs-StakeToReturn_Text")[0],k&&(k.innerHTML=f),t.betItemReturnsValue>=0&&e.setStItem("tr",t.betItemReturnsValue),this._itemToReturnDisplayHelper.setReturnValue(i,t.type,s),et="",t.odds.length>0&&(et=t.odds[0]),ot=isNaN(t.betItemReturnsValue),ot&&!reverseIf?this._itemToReturnDisplayHelper.setVisibility(i,t.type,!1,ausMultiplesEnabled?!1:t.ewSelected):t.ewSelected&&!reverseIf?this._itemToReturnDisplayHelper.setVisibility(i,t.type,!1,!0,!0):this._itemToReturnDisplayHelper.setVisibility(i,t.type,!0,!1));else if(t.type==="multiple"&&(ausMultiplesEnabled||t.calculateReturnValue)){e.setCnItem("bc",t.betCount.toString());d=r.getElementsByClassName("bs-MultipleBets_BetCount")[0];d&&(d.innerHTML=t.betCount+"x");var g=r.getElementsByClassName("bs-MultipleBets_Odds")[0],u=r.getElementsByClassName("bs-MultipleBets_ToReturn")[0],st=document.getElementsByClassName("bs-RestrictedCong").length>0;u&&(s=t.betItemReturnsValue>=0?t.betItemReturns:"0"+this._decimalSeperator+"00",f=t.betItemBetCreditStake>0||t.betItemFreeStake>0?betSlipML.netreturn:betSlipML.toreturn,u.innerHTML=f+'<span  className="bs-MultipleBets_ToReturnValue"><\/span>',this._itemToReturnDisplayHelper.setMultipleReturnValue(t.betType,t.type,s),l=isNaN(t.betItemReturnsValue)||st?"display:none;":"",u.setAttribute("style",l),g&&(l=!t.accumulatedOdds||st?"display:none;":"",g.innerHTML=t.accumulatedOdds||"",g.setAttribute("style",l)))}v++}if(this._updateTotalStakeUI(n),a=$('#bsDiv .bs-MultipleBets [data-item-id="-1"]'),a&&a.length>0&&(nt=$(a[0]).find(".bs-MultipleBets_BetCount")[0],nt&&(nt.innerHTML=y+"x")),tt=n.totalReturns,c&&ausMultiplesEnabled)if(tt==0||someRelated)$(c).addClass("hidden");else{$(c).removeClass("hidden");var it=this._betSlipController._currencyDisplayHelper.getDecimalSeperator(),ct=Number(n.totalBetCreditStake)>0?betSlipML.TotalNetReturn:betSlipML.TotalToReturn,lt="{0} <span  className='bs-TotalToReturn_Span bs-TotalToReturn_TextValue'>{1}<\/span>".replace("{0}",ct).replace("{1}",$blib.roundDecimal(String(tt),it));c.innerHTML=lt}this._bsInst.updateState()};this._setBetslipFreeBetInfo=function(){var n=this._getFreeBetBetslip(),i=this._betSlipController.ausMultiplesEnabled(),t=getBetslipWebModule();t&&(t.calculateFreebetStakes(n),this._updateFreeBetStakesAndReturns(n))};this._updateBetSlipItemFreeBetStatusUI=function(n,t){this._freeBetReceipt||(n.betItemBetCreditStake||n.betItemFreeStake?t.className.indexOf("freeBetStakeApplied")<0&&(t.className+=" freeBetStakeApplied"):t.className=t.className.replace(/(?:^|\s)freeBetStakeApplied(?!\S)/,""))};this._updateItemFreeStakeUI=function(n,t){var e="",h=t.getElementsByClassName("bs-BetCreditInfo")[0],i,o,r,u,s,f;this._freeBetReceipt?(o=t.getAttribute("data-freestake"),isFreeToken=t.getAttribute("data-isfreetoken"),i=isFreeToken==="0"?Number(o):null):i=Number($blib.roundDecimal(n.betItemBetCreditStake+""));i&&(r=betSlipML.UsingBetCredits,this._freeBetReceipt&&(r=betSlipML.UsedBetCredits),f=Number($blib.roundDecimal(n.stake*n.betCount*(n.ewSelected&&!(getBetslipWebModule().getUserCountryID()==="13"&&n.type=="multiple")?2:1)+"")),this._freeBetReceipt?(u=$blib.pad2DP(this._formatter.roundDecimal(o),window.sProps.balance.currencyDecimalSeparator),f>i&&(s=f-i)):(u=$blib.pad2DP(this._formatter.roundDecimal(i),window.sProps.balance.currencyDecimalSeparator),s=n.betItemActualStake),e=i===f?r.replace("[X]",u):r.replace("[X]",u)+" + "+$blib.roundDecimal(s+"",window.sProps.balance.currencyDecimalSeparator)+" "+this._isoCurrencyText);e?(h.innerHTML=e,t.className.indexOf("visible")<0&&(t.className+=" visible")):t.className=t.className.replace(/(?:^|\s)visible(?!\S)/g,"")};this._updateTotalStakeUI=function(n){var u=document.getElementById("bcTotals"),f=$(".bs-useBetCreditInfoReturns"),i=this._freeBetReceipt?!0:!1,r=this._freeBetReceipt?this._freeBetReceipt.getAttribute("data-tst"):"",e=this._freeBetReceipt?this._freeBetReceipt.getAttribute("data-tbc"):"",o=this._freeBetReceipt?this._freeBetReceipt.getAttribute("data-tfb"):"",s=this._freeBetReceipt?this._freeBetReceipt.getAttribute("data-st"):"",w,c,t,tt,p;if(u){if(w=u.getElementsByClassName("bs-BetCreditTotal")[0],c=u.getElementsByClassName("bs-BetCreditTotalDetails")[0],c){var h="",b="NetReturns",k=betSlipML.TotalStake,l,it,rt=!1,a=!1,v=!1,ut=!1,y=Number(n.totalStake.replace(",",".")),d=Number(n.totalFreeBetStake.replace(",",".")),g=Number(n.totalBetCreditStake.replace(",",".")),nt=i?r.replace(",",".")>0:y-d-g>0;if(this._isCurrentlySelected&&(v=!0,h+="BetCredits",b+="BetCredits"),this._selectedFreeBets.length>0){for(a=!0,l=0,it=this._selectedFreeBets.length;l<it;l++)if(this._selectedFreeBets[l].getAttribute("data-inplay")==="1"){rt=!1;break}h+="FreeBet";b+="FreeBet";rt&&(h+="Inplay")}nt&&(ut=!0,h+="PlusStake");t=betSlipML[h];tt=betSlipML[b];t?(r&&r>0&&(r=$blib.roundDecimal(r+"",this._decimalSeperator)),e&&e>0&&(e=$blib.roundDecimal(e+"",this._decimalSeperator)),o&&o>0&&(o=$blib.roundDecimal(o+"",this._decimalSeperator)),s&&s>0&&(s=$blib.roundDecimal(s+"",this._decimalSeperator)),v&&a&&ut?(t=t.replace("{0}",i?e:n.totalBetCreditStake),t=t.replace("{1}",i?r:$blib.roundDecimal(y-d-g+"",this._decimalSeperator)),t=t.replace("{2}",this._isoCurrencyText),t=t.replace("{3}",i?o:n.totalFreeBetStake)):v&&a?(t=t.replace("{0}",i?e:n.totalBetCreditStake),t=t.replace("{1}",i?o:n.totalFreeBetStake)):v?(t=t.replace("{0}",i?e:n.totalBetCreditStake),nt&&(t=t.replace("{1}",i?r:$blib.roundDecimal(y-g+"",this._decimalSeperator)),t=t.replace("{2}",this._isoCurrencyText))):a&&(t=t.replace("{0}",i?o:n.totalFreeBetStake),nt&&(t=t.replace("{1}",i?r:$blib.roundDecimal(y-d+"",this._decimalSeperator)),t=t.replace("{2}",this._isoCurrencyText))),c.innerHTML=t,w&&(k=k.replace("{0}",i?s+" "+this._isoCurrencyText:""),w.innerHTML=k)):c.innerHTML="";tt&&f.length>0?f.text(tt):f.text("")}(this._isCurrentlySelected||this._selectedFreeBets.length>0)&&!b365.Ui.Betslip.BetCreditCalculator.prototype.previousErrorMessage?(p=document.getElementsByClassName("br-Totals")[0],p&&p.className.indexOf("hidden")<0&&(p.className+=" hidden"),u.className.indexOf("visible")<0&&(u.className+=" visible"),f.length>0&&f.removeClass("hidden")):(u.className=u.className.replace(/(?:^|\s)visible(?!\S)/g,""),f.length>0&&f.addClass("hidden"))}}};b365.Ui.Betslip.BetCreditCalculator.prototype={calculate:function(){this._setBetslipFreeBetInfo()},previousErrorMessage:""};Type.registerNamespace("b365.Ui.Betslip");b365.Ui.Betslip.ToggleBetCredit=function(n,t){this._bsInst=n;this._bsController=t;this._selectedVal="1";this._selectedCSS="checked";this._betCreditSelected="bs-Wrapper_betCredit";this._unselectedVal="0";this._freeBetsStateCookieKey="fs";this._cookieValSeparator="||";this._freeBetHdr=$(".bs-CheckBoxBetCredit");this._cont=$(".bs-useBetCredit");this._betslipContainer=$("#bsDiv");this._taxTextNode=document.querySelector("#taxWarningHeader");b365.Ui.Betslip.ToggleBetCredit.taxText=this._taxTextNode&&!b365.Ui.Betslip.ToggleBetCredit.taxText?this._taxTextNode.innerText:b365.Ui.Betslip.ToggleBetCredit.taxText;this._taxText=b365.Ui.Betslip.ToggleBetCredit.taxText;this._netTaxText=betSlipML.NetReturnTax;this._isValid=function(){return typeof this._bsInst!="undefined"};this._isValid()&&(this._isCurrentlySelected=this._bsInst.getValueFromBSCookie(this._freeBetsStateCookieKey).replace(this._cookieValSeparator,"")==this._selectedVal)};b365.Ui.Betslip.ToggleBetCredit.prototype={taxText:"",toggle:function(){var n,t;this._isValid()&&$("#bsDiv .betReceipt").length==0&&(this._isCurrentlySelected?(this._freeBetHdr.removeClass(this._selectedCSS),this._cont.removeClass(this._selectedCSS),this._betslipContainer.length>0&&this._betslipContainer.removeClass(this._betCreditSelected)):(n=this._bsInst.getBetItems(this._bsInst.itemTypeSingle).concat(this._bsInst.getBetItems(this._bsInst.itemTypeBetBuilder)),n.length===1&&n[0].getStItem("ft")&&n[0].getStItem("ft").length>0&&(t=document.getElementsByClassName("bs-FreeBetCheckBox-selected")[0],this._bsController._freeBetClickHandler.toggle(t)),this._freeBetHdr.addClass(this._selectedCSS),this._cont.addClass(this._selectedCSS),this._betslipContainer.length>0&&this._betslipContainer.addClass(this._betCreditSelected)),this._taxTextNode&&(this._taxTextNode.innerText=this._isCurrentlySelected?this._taxText:this._netTaxText),this._bsInst.setValueInBSCookie(this._freeBetsStateCookieKey,this._isCurrentlySelected?this._unselectedVal:this._selectedVal),new b365.Ui.Betslip.BetCreditCalculator(this._bsInst,this._bsController,this._isCurrentlySelected).calculate(),this._bsInst.changeBetslipHeight())},reset:function(){this._isCurrentlySelected?(this._freeBetHdr.addClass(this._selectedCSS),this._betslipContainer.length>0&&this._betslipContainer.addClass(this._betCreditSelected)):(this._freeBetHdr.removeClass(this._selectedCSS),this._betslipContainer.length>0&&this._betslipContainer.removeClass(this._betCreditSelected));this._taxTextNode&&(this._taxTextNode.innerText=this._isCurrentlySelected&&this._taxTextNode?this._netTaxText:this._taxText);new b365.Ui.Betslip.BetCreditCalculator(this._bsInst,this._bsController).calculate()}}
/*
//@ sourceMappingURL=betslip.js.map
*/